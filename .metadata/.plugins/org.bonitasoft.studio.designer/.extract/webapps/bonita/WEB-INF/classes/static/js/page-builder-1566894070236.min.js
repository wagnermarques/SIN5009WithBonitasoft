/**
 * Copyright (C) 2015 Bonitasoft S.A.
 * Bonitasoft, 32 rue Gustave Eiffel - 38000 Grenoble
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 2.0 of the License, or
 * (at your option) any later version.
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 * You should have received a copy of the GNU General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 */
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/assets/asset-edit-popup.html",'<div class=EditAssetPopUp> <div class=modal-header> <h3 class=modal-title>{{vm.asset.name}}</h3> <save-indicator class=EditAssetPopUp-saveIndicator></save-indicator> </div> <div class=modal-body> <ace-editor class=EditAssetPopUp-editor mode={{vm.aceMode}} ng-model=vm.content> </ace-editor> </div> <div class=modal-footer> <button type=button class="btn btn-primary" ng-click=vm.save() ng-disabled=!vm.hasChanged() uib-tooltip="{{ \'This will also update the content of the preview window\' | translate }}" tooltip-popup-delay=500 tooltip-append-to-body=true translate>Save</button> <button class="btn btn-link EditAssetPopUp-dismissBtn" type=button ng-click=$dismiss()> <span class=u-fadeIn ng-if=!vm.hasChanged() translate>Close</span> <span class=u-fadeIn ng-if=vm.hasChanged() translate>Discard changes</span> </button> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/assets/asset-popup.html",'<form name=addAsset action={{vm.assetSavingAction}} novalidate ng-submit="vm.saveExternalAsset(vm.newAsset, $event)" ng-upload=vm.onComplete(content)> <div class=modal-header> <h3 class=modal-title ng-if=vm.isNewAsset translate>Add a new asset</h3> <h3 class=modal-title ng-if=!vm.isNewAsset><span translate>Edit asset</span><strong> {{vm.asset.name}}</strong></h3> </div> <div class=modal-body> <div class=form-group> <label class="control-label control-label--required" for=type translate>Type</label> <select name=type ng-model=vm.newAsset.type class=form-control ng-options="type.key as type.value for type in vm.assetTypes" ng-change=vm.updateSavingAction(vm.newAsset.type)></select> </div> <ng-include src=vm.templates[vm.newAsset.type]></ng-include> </div> <div class=modal-footer> <button class="btn btn-primary" ng-disabled="!addAsset.$valid || (vm.isExternalAsset(vm.newAsset) && vm.isExisting(vm.newAsset))"> {{ vm.isNewAsset ? \'Add\': \'Save\' | translate }} </button> <button class="btn btn-link" type=button ng-click=vm.cancel() translate>Cancel</button> </div> </form> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/assets/asset-preview-popup.html",'<div> <div class=modal-header> <h3 class=modal-title translate>{{asset.name}} content<expand-modal></expand-modal></h3> </div> <div class=modal-body> <div class="container-fluid text-center"> <iframe ng-src={{url}} width=100% class=asset-preview-iframe></iframe> </div> </div> <div class=modal-footer> <button class="btn btn-link" type=button ng-click=cancel() translate>Cancel</button> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/assets/generic-asset-form.html",'<div class=form-group> <label class="control-label control-label--required" for=source translate>Source</label> <select id=source name=source class=form-control ng-model=vm.newAsset.external ng-disabled=!vm.isNewAsset ng-options="v.key as v.value for (k, v) in vm.assetSources"></select> </div> <div class=form-group ng-if=vm.isExternalAsset(vm.newAsset)> <label class="control-label control-label--required" for=name> <span translate>URL</span> </label> <input type=text name=url ng-model=vm.newAsset.name class=form-control autofocus placeholder=http://.... required ng-pattern=vm.urlPattern> <div class=text-danger ng-if="addAsset.url.$dirty && addAsset.url.$error.pattern"> <i class="fa fa-warning">&nbsp;</i><translate>Invalid URL: it must only contain alphanumeric character or #!:.?+=&%@-/</translate> </div> <div class=text-danger ng-if="addAsset.$dirty && vm.isExisting(vm.newAsset)"> <i class="fa fa-warning">&nbsp;</i><span ng-bind-html=vm.getWarningMessage(vm.newAsset)></span> </div> </div> <div class=form-group ng-if=!vm.isExternalAsset(vm.newAsset)> <label class="control-label control-label--required" for=file> <span translate>File</span> </label> <div class="input-group file-upload"> <input id=file type=text readonly disabled placeholder="{{\'Select your file\' | translate}}" value={{vm.newAsset.name}} class=form-control> <span class=input-group-btn> <span class=btn ng-class="{\'btn-default disabled\':$isUploading, \'btn-primary\':!$isUploading}"> <input class=file-upload-input ng-class="{\'file-upload-input--disabled\':$isUploading}" name=file type=file ng-model=vm.newAsset.name required file-input-change> <i class=fa ng-class="{\'fa fa-spinner fa-pulse\':$isUploading, \'fa-folder\':!$isUploading}"> </i></span> </span> </div> <div class=text-warning ng-if=vm.isExisting(vm.newAsset)> <i class="fa fa-warning">&nbsp;</i><span ng-bind-html=vm.getWarningMessage(vm.newAsset)></span> <br><translate>Click <em>Add</em> to override.</translate> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/assets/help-popup.html",'<div class=modal-header> <button type=button class=close ng-click=$dismiss()><span aria-hidden=true>&times;</span></button> <h3 class=modal-title translate>Help</h3> </div> <div class=modal-body> <uib-tabset class=tabs-left> <uib-tab heading="{{ \'General\' | translate }}"> <p translate> Assets enable you to add web resources to pages and forms. Available asset types are <strong>JavaScript</strong>, <strong>CSS</strong>, <strong>Image</strong> and (in Subscription editions) <strong>Localization</strong>. Assets can be <strong>Local</strong> (file stored into the page artifact) or External (URL). The Localization asset is always local. </p> <p translate> A local asset name must not contain special characters or spaces. An external asset name must be a standard URL. </p> <p translate ng-if=!isPage> To use the same asset in several pages, you can add it to a custom widget and use this custom widget in your application pages or forms. When you add a custom widget with assets to a page, those assets are automatically linked to the page. </p> </uib-tab> <uib-tab heading="{{ \'Asset use\' | translate }}" ng-if=isPage> <p translate> Add JavaScript assets for custom scripts. They will be loaded and made available at page level. You can use them in variables of type JavaScript expression. In the value field of the variable, simply call the function and pass the required parameters. </p> <p translate> Add CSS assets at page level and use them to edit the CSS classes property of any widget. (UI Designer integrates default Bootstrap style) </p> <p translate> To manage multiple version of dependencies, make sure only one version of an asset is active inside a page. </p> <p translate> To load an image for any custom widget, add image assets at page level. Access it with <code>asset/img/[image name]</code>. </p> <p translate> To use an image asset in the image widget, set the <code>Source type</code> property to <i>Asset</i>, and then enter the image name in the <code>Asset name</code> input field. </p> <p> <translate>To use a localization asset, replace the default localization.json file with a file of the same format containing all the keys in the page and the translations into the target languages. The localization asset is at page level. The format of the file must be:</translate> <pre><code>{\n    "fr-FR": {\n        "Title": "Titre",\n        "Default label": "Libell\xe9 par d\xe9faut",\n        ...\n    },\n    "es-ES": {\n        "Title": "T\xedtulo",\n        "Default label": "Etiqueta por defecto",\n        ...\n    }\n    ...\n}</code></pre> <translate>See the default localization asset for an example.</translate> </p> </uib-tab> <uib-tab heading="{{ \'Asset use\' | translate }}" ng-if=!isPage> <p translate> In a JavaScript asset, you can specify a dependency on an Angular module. First add the JavaScript asset, and then add the module name in the dedicated section. You can find the the available modules on <a href="http://ngmodules.org/">http://ngmodules.org/</a>. </p> <p translate> To load a local image asset in a custom widget, you need to reference it in the template inside a <code>&lt;img&gt;</code> tag with a relative path as follows: <br><code ng-non-bindable>&lt;img src="widgets/[custom widget id]/assets/img/[image name]"&gt;</code> </p> </uib-tab> <uib-tab heading="{{ \'Asset list\' | translate }}" ng-if=isPage> <p translate> The list contains page assets, the assets of the widgets used in this page and assets used by base framework. </p> <p translate> You can delete page assets only, view local assets, and edit external assets of a page. </p> <p translate> You cannot have more than one localization asset. When you upload a new asset file, it overwrites the existing one. </p> <p translate> By default, only page assets are displayed. To display others scopes assets, we should check Widget or Base Framework checkbox. </p> <p translate> You cannot move, delete or disable <b>Base framework</b> assets. They are here only to show you which library is used to build your artifact </p> </uib-tab> <uib-tab heading="{{ \'Asset list\' | translate }}" ng-if=!isPage> <p translate> In this list, you can use the arrows to reorder assets, view local assets, edit external assets, and delete any. </p> <p translate> At runtime, assets of a custom widget are loaded in the order defined. </p> </uib-tab> <uib-tab heading="{{ \'Asset reordering\' | translate }}" ng-if=isPage> <p translate> In the Asset list, you can manually change the order of CSS and Javascript page assets. Reorder this files can be useful to override some css classes or javascript functions. </p> <p translate> Image or Localization assets are not imported in index.html. So we don\'t need to reorder them. </p> <p translate> At runtime, CSS and JavaScript assets are loaded in the page header. This loading is done as it\'s represented in this list, CSS first then Javascript. All assets are loaded in order they are listed, widget assets before page assets (in alphabetical order of the widgets name). </p> <p translate> Note that reordering assets is disabled when the list is a search results list. Indeed, reordering is only relevant if the complete list of page assets is displayed. </p> <p translate> <b>Note</b>: Custom-widget assets are only editable in widget editor. You can\'t modify them at page level to avoid side effects on other pages. So if you want to reorder custom-widget assets, please go to widget editor. </p> </uib-tab> <uib-tab heading="{{ \'Custom services\' | translate }}"> <p> <translate>To extend a page or form with custom AngularJS services (such as filters, constants, or factories), use the <code>bonitasoft.ui.extensions</code> module.</translate> <br><button ng-click="extensionsExamplesCollapsed = !extensionsExamplesCollapsed" type=button class="btn btn-link" translate>Example: relative time filter</button> </p> <section> <div class=well uib-collapse=!extensionsExamplesCollapsed> <div> <h4 translate>Relative time filter</h4> <p translate> This filter uses the <a href="http://momentjs.com/">moment.js</a> library to transform the display of a relative time. For example, it transforms \'01/01/2011\' to \'4 years ago\'. </p> <p> <ul> <li translate>Import the moment.js library as an external asset.</li> <li> <p translate>Create a JavaScript file named <code>date-ago-filter.js</code> that updates the <code>bonitasoft.ui.extensions</code> module with the filter:</p> <pre><code ng-non-bindable>angular.module(\'bonitasoft.ui.extensions\')\n  .filter(\'dateAgo\', [\'$window\', function ($window) {\n    return function dateAgo(input) {\n      var compar = new Date(input);\n      return $window.moment(compar).fromNow();\n    };\n}]);</code></pre></li> <li translate>Import this JavaScript file as a local page asset.</li> <li translate>Create a JSON variable named <code>updateDate</code> to hold a timestamp as a number</li> <li translate>To display the date in a widget property evaluated as an expression, use the <code>dateAgo</code> filter on the <code>updateDate</code> variable as follows: <code>updateDate | dateAgo</code></li> </ul> </p> </div> </div> </section> </uib-tab> </uib-tabset> </div> <div class=modal-footer> <button class="btn btn-link" ng-click=$dismiss() translate>Close</button> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/assets/malformed-json-error-message.html","<p> <strong translate>Malformed json file</strong> <div translate>Asset has not been saved</div> <div translate>Error at line <code>{{ infos.location.line\xa0}}</code>, column <code>{{ infos.location.column }}</code></div> </p> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/assets/page-assets.html",'<div class=Toolbar> <div class=Toolbar-action> <button class="btn btn-default btnAsset--create" ng-click=vm.openAssetPopup() translate> Add a new asset </button> <button class="btn btn-default btn-asset--help" ng-click=vm.openHelp() title="{{\'Open help\' | translate}}"> <i class="fa fa-question-circle"></i> </button> </div> <div class=Toolbar-filter> <label class=checkbox-inline ng-repeat="(key, filter) in vm.scopeFilter"> <input type=checkbox ng-model=filter.filter> <translate>{{filter.value}}</translate> </label> </div> <div> <search value=searchTerm placeholder="{{ \'Search\' | translate }}"></search> </div> </div> <table class="Table AssetTable"> <thead> <th class=AssetTable-active translate>Active</th> <th class="AssetTable-name text-left" translate>Name</th> <th class=AssetTable-source translate>Source</th> <th class=AssetTable-scope translate>Scope</th> <th class=AssetTable-actions translate>&nbsp;</th> <th class=AssetTable-actions>&nbsp;</th> <th class=AssetTable-scrollbar>&nbsp;</th> </thead> </table> <div class=BottomPanel-scrollableView> <div ng-repeat="(key,type) in vm.types"> <asset-section type=type id=key search-term=searchTerm scope-filter=vm.scopeFilter assets=vm.getAssetsByTypeForCurrentScope(key) assets-count=vm.getNbrOfAssetsByType(key) on-delete=vm.delete(asset) deactivate-asset=vm.deactivateAsset(asset) increment-order-asset=vm.incrementOrderAsset(asset) decrement-order-asset=vm.decrementOrderAsset(asset) open-asset-edit-popup=vm.openAssetEditPopup(asset) open-asset-preview-popup=vm.openAssetPreviewPopup(asset) get-asset-url=vm.getAssetUrl(asset) is-editable=vm.isEditable(asset) is-viewable=vm.isViewable(asset)> </asset-section> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/assets/widget-assets.html",'<table class="table table-striped"> <thead> <tr> <th class=col-xs-8 colspan=2> <h4 class=CustomEditor-section> <span class=CustomEditor-section-underline translate>Assets</span> </h4> </th> <th class="col-xs-4 Property-actions" colspan=2> <button class="btn btn-default btn-data--help" ng-click="vm.openHelp(\'widget\')" title="{{\'Open help\' | translate}}"><i class="fa fa-question-circle"></i></button> <button id=addasset title="Add a new asset" class="btn btn-bonita-primary" ng-disabled=!widget.custom ng-click=vm.openAssetPopup()> <i class="fa fa-plus"></i> <span translate>Add</span> </button> </th> </tr> <tr> <th class=col-xs-1>&nbsp;</th> <th class=col-xs-7 translate>Name</th> <th class=col-xs-1 translate>Type</th> <th class=col-xs-3>&nbsp;</th> </tr> </thead> <tbody> <tr ng-repeat="asset in vm.component.assets | orderBy:\'order\' as results"> <td> <a ng-click=vm.decrementOrderAsset(asset) ng-if="!$first && widget.custom" title="{{ \'Move asset up\' | translate }}"><i class="fa fa-arrow-up asset-ordering-action clickable"></i></a> <a ng-click=vm.incrementOrderAsset(asset) ng-if="!$last && widget.custom" title="{{ \'Move asset down\' | translate }}"><i class="fa fa-arrow-down asset-ordering-action clickable"></i></a> </td> <td>{{asset.name}}</td> <td>{{asset.type | assetType}}</td> <td class="col-xs-2 Property-actions"> <button file-download class="btn btn-bonita-default" href={{vm.getAssetUrl(asset)}} title="{{\'Download asset\' | translate }}" ng-if=!vm.isExternal(asset)> <i class="fa fa-alias-import"></i> </button> <button class="btn btn-bonita-default" title="{{ \'View asset content\' | translate }}" ng-if=vm.isViewable(asset) ng-click=vm.openAssetPreviewPopup(asset)> <i class="fa fa-search"></i> </button> <button id=editAsset class="btn btn-bonita-default" ng-disabled=!widget.custom ng-click=vm.openAssetEditPopup(asset) title="{{ \'Update asset\' | translate }}" ng-if=vm.isEditable(asset)> <i class="fa fa-pencil"></i> </button> <button id=deleteAsset class="btn btn-bonita-default" ng-disabled=!widget.custom ng-click=vm.delete(asset) title="{{ \'Delete asset\' | translate }}"> <i class="fa fa-trash"></i> </button> </td> </tr> <tr ng-if="results.length===0"> <td colspan=4>No asset</td> </tr> </tbody> </table> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/editor.html",'<div class=Editor> <header ui-view=header confirm-on-exit confirm-data=page></header> <div class=content-wrapper>  <div class=Palette ng-class="{\'Palette--closed\': isPaletteClosed}" editor-palette on-resize=resizePaletteHandler(isClosed)> </div> <div id=editor-container ng-class="{\'\': !sectionOpened}"> <h4 ng-if=!page class=Editor-loadingText translate>Loading {{mode}}...</h4> <div class=workspace> <container ng-if=page container=page editor=editor id=editor ng-click="editor.selectComponent(null, $event)" component-highlighter=component-element--hover data-is-editor-container=true bo-dropzone bo-drop-success="appendComponent($event, $data)"></container> <div class="alert alert-editor-hint" ng-if="page.rows.length === 1 && page.rows[0].length === 0"> <i class="fa fa-rotate-90 fa-share"></i> <h4 class=hint-title translate>This page is empty.</h4> <translate> To add content, drag and drop components from the palette to the whiteboard above. </translate> </div> </div> <bottom-panel mode="{{ mode }}"></bottom-panel> </div> <div class=PropertyPanel ng-class="{\'PropertyPanel--closed\': isPropertyPanelClosed}" resizable r-directions="[\'left\']"> <button title="{{\'Toggle properties panel\' | translate}}" class=PropertyPanel-toggle ng-click=editor.togglePropertyPanel()> </button> <div class=PropertyPanel-popover ng-include="\'js/editor/properties-panel/properties-panel.html\'"></div> </div> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/custom-widget/create-property.html",'<div class=modal-header> <h3 class=modal-title ng-if=!paramToUpdate translate>Create new property</h3> <h3 class=modal-title ng-if=paramToUpdate><span translate>Edit property</span> <i>{{ currentParam.name }}</i></h3> </div> <form class=CustomWidgetProperty name=propertyForm ng-submit=ok()> <div class=modal-body> <div class=form-group> <label for=name class="control-label control-label--required" translate>Name</label> &nbsp;<small class=text-muted translate>(used in your template and controller)</small> <input id=name class=form-control name=name ng-model=currentParam.name ng-pattern="\'[a-zA-Z0-9]*$\'" required autofocus> <span ng-if=propertyForm.name.$error.pattern class=text-danger translate>Property names must start with a letter and contain only alphanumeric characters</span> </div> <div class=form-group> <label for=label class="control-label control-label--required" translate>Label</label> &nbsp;<small class=text-muted translate>(displayed in editor\'s property panel)</small> <input id=label class=form-control name=label ng-model=currentParam.label required> </div> <div class=form-group> <label for=help class=control-label><translate>Tooltip</translate> <i class="fa fa-info-circle" uib-tooltip="{{ \'The tooltip will be display as such, close to the property label.\' | translate}}"></i> </label> <textarea id=help class="EditWidgetPopup-help form-control" name=help ng-model=currentParam.help placeholder="{{ \'Describes the property\' | translate}}">\n        </textarea></div> <div class=form-group> <label for=caption class=control-label translate>Caption</label> <small class="help-block EditWidgetPopup-captionMarginTop">{{\'The caption will be displayed as such below the property label.\' | translate}}</small> <input id=caption class=form-control name=caption ng-model=currentParam.caption placeholder="{{ \'Can be used to define the expected input format\' | translate}}"> </div> <div class=form-group> <label for=bond class="control-label control-label--required" translate>Treat value as</label> <div id=bond class="btn-group CustomWidgetProperty--fullWidth" uib-dropdown> <button id=bondButton type=button class="btn btn-default CustomWidgetProperty--textLeft CustomWidgetProperty--fullWidth" uib-dropdown-toggle> {{bonds[currentParam.bond].name | translate}} <span ng-show="bond !== \'constant\'">-</span> <i class="ui-icon ui-{{currentParam.bond}}"> &nbsp;</i><span class="fa fa-caret-down CustomWidgetProperty-dropdownCaret"></span> </button> <ul class="dropdown-menu CustomWidgetProperty--fullWidth" role=menu aria-labelledby=bondButton> <li ng-repeat="(bond, bondDetails) in bonds" ng-click=updateBond(bond) required role=menuitem><a>{{bondDetails.name | translate}} <span ng-show="bond !== \'constant\'">-</span> <i class="ui-icon ui-{{bond}}"></i></a></li> </ul> </div> <div class=CustomWidgetProperty-treatAsDescription> <small ng-click="bondHelpToggled = !bondHelpToggled" class=clickable> <span ng-if=bondHelpToggled class="fa fa-caret-down"></span><span ng-if=!bondHelpToggled class="fa fa-caret-right"></span> <u>Description</u></small> <div class="col-md-12 row" uib-collapse=!bondHelpToggled> <div><ng-include src=bonds[currentParam.bond].template></ng-include></div> </div> </div> </div> <div class=form-group ng-if=isTypeSelectable()> <label for=type class="control-label control-label--required" translate>Type</label>  <div id=type class="btn-group CustomWidgetProperty--fullWidth" uib-dropdown> <button id=typeButton type=button class="btn btn-default CustomWidgetProperty--textLeft CustomWidgetProperty--fullWidth" uib-dropdown-toggle>{{currentParam.type | translate}} <span class="fa fa-caret-down CustomWidgetProperty-dropdownCaret"></span></button> <ul class="dropdown-menu CustomWidgetProperty--fullWidth" role=menu aria-labelledby=typeButton> <li ng-repeat="type in types" ng-click="currentParam.defaultValue = null" required role=menuitem><a ng-click="currentParam.type = type">{{type | translate}}</a></li> </ul> </div> </div> <div class=form-group ng-if=isTypeChoicable()> <label for=choices class="control-label control-label--required" translate>Choices (comma separated)</label> <input id=choices class=form-control name=choices ng-model=currentParam.choiceValues ng-list required> </div> <div class=form-group ng-if="currentParam.bond !== \'variable\'"> <div ng-switch=currentParam.type> <label for=default class=control-label translate>Default</label> <input id=default class=form-control name=default ng-model=currentParam.defaultValue ng-switch-default> <input id=default type=number class=form-control name=default ng-model=currentParam.defaultValue ng-switch-when=integer> <select id=default class=form-control name=default ng-init="currentParam.defaultValue = true" ng-model=currentParam.defaultValue ng-options="key for key in [true, false]" ng-switch-when=boolean> </select><input id=default type=text class=form-control name=default ng-list ng-model=currentParam.defaultValue ng-switch-when=collection> <select id=default class=form-control name=default ng-model=currentParam.defaultValue ng-switch-when=choice ng-options="choice for choice in currentParam.choiceValues"></select> </div> </div> </div>  <div class=clearfix></div> <div class=modal-footer> <button type=submit class="btn btn-bonita-default" ng-disabled=propertyForm.$invalid ng-click=ok()>{{ (paramToUpdate ? \'Save\' : \'Create\')|translate }}</button> <button type=button class="btn btn-link" ng-click=cancel() translate>Cancel</button> </div> </form> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/custom-widget/custom-widget-editor.html",'<div class=WidgetEditor> <div class=EditorHeader role=navigation confirm-on-exit confirm-data=widget> <div class=EditorHeader-menu> <a class="EditorHeader-back EditorHeader-navBtn" ng-click=back() uib-tooltip="{{ \'Back\' | translate }}" tooltip-placement=right tooltip-popup-delay=300> <i class="fa fa-chevron-left"></i> </a> <a ui-sref=designer.home class="EditorHeader-homeNav EditorHeader-navBtn" uib-tooltip="{{ \'Home page\' | translate }}" tooltip-placement=right tooltip-popup-delay=300> <i class="ui-icon ui-designer"></i> </a> <span class=EditorHeader-brand translate> widget editor </span> <h3 class="EditorHeader-name EditorHeader-name--custom"> <identicon ng-if=widget.custom name={{widget.id}} size=30 foreground-color="[203, 213, 225, 255]" background-color=[0,0,0,0]></identicon> {{widget.name}} </h3> <div class=EditorHeader-actions> <button ng-if=!widget.custom id=saveas-bonita type=button class="btn btn-bonita-primary" ng-click=saveAs(widget) translate>Save as...</button> <div ng-if=widget.custom class=btn-group uib-dropdown> <button id=save type=button class="btn btn-bonita-primary" ng-click=save() ng-disabled=!isPageDirty(widget) translate>Save</button> <button type=button class="btn btn-bonita-primary uib-dropdown-toggle" uib-dropdown-toggle> <span class="fa fa-caret-down"></span> <span class=sr-only>Save</span> </button> <ul class=dropdown-menu role=menu> <li><a id=saveAs class=clickable ng-click=saveAs(widget) translate>Save as ...</a></li> </ul> </div> <button type=button id=export ng-disabled=!widget.custom class="btn btn-bonita-primary" ng-click=saveAndExport() title="{{\'Export\'|translate}}"> <i class="ui-icon ui-export"></i> </button> </div> <save-indicator class=EditorHeader-saveIndicator></save-indicator> </div> <div class=EditorHeader-help> <button class="btn btn-bonita-help" ng-click=openHelp() title="{{\'Open help\' | translate}}"><i class="fa fa-question-circle"></i></button> </div> </div> <div class="container-fluid CustomEditor"> <div class=row> <div class=col-xs-7> <form id=widget-form name=widgetForm> <div> <h4 class=CustomEditor-section> <span class=CustomEditor-section-underline translate>Description</span> <i class="fa fa-info-circle CustomEditor-helper" tooltip-placement=bottom uib-tooltip="{{\'This description will be displayed as a tooltip in the palette\' | translate }}" tooltip-append-to-body=true></i> </h4> <textarea class="form-control textarea--widget" ng-disabled=!widget.custom ng-attr-placeholder="{{ \'Widget description\' | translate }}" ng-model=widget.description></textarea> </div> <div> <h4 class=CustomEditor-section> <span class=CustomEditor-section-underline translate>Template</span> </h4> <ace-editor id=template class=ace-editor--widget ng-class="{\'ace_editor-readonly\': !widget.custom}" mode=html readonly={{!widget.custom}} ng-model=widget.template></ace-editor> </div> <div> <h4 class=CustomEditor-section> <span class=CustomEditor-section-underline translate>Controller</span> </h4> <ace-editor id=controller class=ace-editor--widget ng-class="{\'ace_editor-readonly\': !widget.custom}" mode=javascript readonly={{!widget.custom}} ng-model=widget.controller></ace-editor> </div> </form> </div> <div class=col-xs-5> <div ui-view=asset></div> <div class=form-group> <h4 class=CustomEditor-section> <span class=CustomEditor-section-underline translate>Required angular modules</span> <i class="fa fa-info-circle CustomEditor-helper" uib-tooltip="{{\'Extra angular modules needed by this custom widget (comma separated)\' | translate }}" tooltip-append-to-body=true></i> </h4> <input type=text class=form-control id=requiredModules ng-disabled=!widget.custom ng-model=widget.requiredModules ng-list> </div> <table class="table table-striped"> <thead> <th class=col-xs-10> <h4 class=CustomEditor-section> <span class=CustomEditor-section-underline translate>Properties</span> </h4> </th> <th class="col-xs-2 Property-actions"> <button id=create title="Create a new property" class="btn btn-bonita-primary" ng-disabled=!widget.custom ng-click=createOrUpdate()> <i class="fa fa-plus"></i> <span translate>Create</span> </button> </th> </thead> <tbody> <tr ng-repeat="property in widget.properties"> <td class="col-xs-10 PropertyDescription"> <div class=PropertyName><strong>{{ property.name }}</strong></div> <div><small translate>Label</small>: {{ property.label }}</div> <div><small translate>Treat as </small><span> {{ bonds[property.bond].name | translate }}</span></div> <div><span ng-if=isTypeSelectable(property.bond)><small translate>Type</small>: {{property.type}}</span></div> <div ng-if="property.type === \'choice\'"><small translate>Choices</small>: {{ property.choiceValues.join(\', \') }}</div> <div ng-if="property.bond !== \'variable\'"><small translate>Default value</small>: {{ property.defaultValue }}</div> </td> <td class="col-xs-2 Property-actions"> <button id=editProperty class="btn btn-bonita-default" title="Update property" ng-disabled=!widget.custom ng-click=createOrUpdate(property)><i class="fa fa-pencil"></i></button> <button id=deleteProperty class="btn btn-bonita-default" title="Delete property" ng-disabled=!widget.custom ng-click=deleteParam(property)><i class="fa fa-trash"></i></button> </td> </tr> </tbody> </table> </div> </div> </div> </div> ')
}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/custom-widget/help-popup.html",'<div class=modal-header> <button type=button class=close ng-click=cancel()><span aria-hidden=true>&times;</span></button> <h3 class=modal-title translate>Help</h3> </div> <div class=modal-body> <uib-tabset class=tabs-left active=tabContainer.activeTab> <uib-tab id=help-general heading="{{ \'General\' | translate }}" index="\'general\'"> <p translate>This page allows you to view a standard widget, or edit a custom widget.</p> <p translate>If the standard widget does not meet your needs, you can create a custom widget to match exactly what you want to. To do this, clone the standard widget by saving it with a different name, and modify it. After creation, the custom widget is available in the palette for designing pages, forms, layouts or fragments.</p> <p translate>Widget implementation is based on the AngularJS framework.</p> <p translate>For more information, see the AngularJS guide on <a href=https://docs.angularjs.org/guide/templates>templates</a> and <a href=https://docs.angularjs.org/guide/controller>controllers</a>.</p> <p translate>For the moment, you cannot implement custom widget containers.</p> <p translate>Custom widgets are not clearly visible on the whiteboard but you can see them with the preview.</p> </uib-tab> <uib-tab id=help-template heading="{{ \'Template\' | translate }}" index="\'template\'"> <p translate>The widget HTML template is defined here.</p> <p translate>You can use standard HTML tags and AngularJS built-in directives, scope and interpolation system.</p> <p translate>Widget properties defined on the right can be used as variables in a template with properties.newProperty.</p> <p translate>Functions exposed in the controller can be used with ctrl.newFunction().</p> <p translate>You can use the <i>environment</i> property injected in the scope when inside the whiteboard editor. It allows to create a mockup display for the whiteboard as the real use data will not be available.</p> </uib-tab> <uib-tab id=help-controller heading="{{ \'Controller\' | translate }}" index="\'controller\'"> <p translate>The controller is a JavaScript function that augments the AngularJS scope and exposes functions that can be used in the widget template.</p> <p translate>Widget properties defined on the right can be used as variables in a controller with $scope.properties.</p> <p translate>To use AngularJS standard services, you must declare them in the main function arguments.</p> <p translate>Controller can be left empty if not needed.</p> </uib-tab> <uid-l10n-help-tab></uid-l10n-help-tab> <uib-tab id=help-migration heading="{{ \'Migration\' | translate }}" index="\'migration\'"> <uid-migration-help-tab></uid-migration-help-tab> </uib-tab> </uib-tabset> </div> <div class=modal-footer> <button class="btn btn-link" ng-click=cancel() translate>Close</button> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/custom-widget/save-as-popup.html",'<div class=modal-header> <h3 class=modal-title translate>Save {{ctrl.widget.name}} as...</h3> </div> <form class=form name=newWidget> <div class=modal-body id=modal-save-widget-as> <div class=form-group> <input name=name ng-model=ctrl.newName artifact-name-validation=bottom-left class=form-control id=widget-name placeholder="Widget Name" required autofocus> </div> </div> <div class=modal-footer id=modal-delete-widget-controls> <button class="btn btn-primary" ng-click=ctrl.ok() ng-disabled="!newWidget.name.$dirty || newWidget.$invalid || ctrl.newName == ctrl.widget.name" translate>Save</button> <button class="btn btn-link" ng-click="$dismiss(\'cancel\')" translate>Cancel</button> </div> </form> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/help-popup.html",'<div class=modal-header> <button type=button class=close ng-click=$dismiss()><span aria-hidden=true>&times;</span></button> <h3 class=modal-title translate>Help</h3> </div> <div class=modal-body> <uib-tabset class=tabs-left> <uib-tab heading="{{ \'Overview\' | translate }}"> <p translate> Use the UI Designer to create or edit web artifacts: <b>application pages</b> composing business applications, <b>process forms</b> linked to process instantiation or human tasks execution, as well as <b>application layouts</b>, applied to all pages of a business application. </p> <p translate>Artifact creation:</p> <ul> <li translate>Create an <b>application page</b> directly in the UI Designer</li> <li translate>Start creating a <b>process form</b> in Bonita Studio: from the appropriate pool or human task, create a contract and launch the UI Designer. It will auto-generate a dedicated form to edit. </li> <li translate>Start creating an <b>application layout</b> by importing the default layout, available in the Bonita Portal resources, and edit it. </li> </ul> <p translate> An artifact designed with the UI Designer can be exported to be shared with teammates (import in the UI Designer) or used in business applications (import in Bonita Portal). </p> <p translate> There is a set of <b>default widgets</b> for displaying information to and for gathering information from the end users. You can also create <b>custom widgets</b>. </p> <p class=CalloutSubscription> <span class=CalloutSubscription--title translate>Subscription edition</span> <translate>Create a fragment to reuse the same group of widgets with the same behavior in several pages or forms. </translate> </p> <p translate> The UI Designer generates <b>standard html application code, based on AngularJS</b>. Export pages if you want to further customize them in a different favorite web development environment. </p> </uib-tab> <uib-tab heading="{{ \'Integration with Bonita platform\' | translate }}"> <p translate> <b>To use a page in a business application</b>, export it from the UI Designer, import it into Bonita Portal resources, and from the relevant application, add it to the list of pages and to a navigation menu. </p> <p translate> <b>To use a form in a process</b>, map it in the studio to the relevant process or human task. It will be automatically packaged in the .bar archive ready to deploy in the portal.</p> <p class=CalloutSubscription> <span class=CalloutSubscription--title translate>Subscription edition</span> <span translate>To update a form during production, export the form from the UI Designer, import it into the relevant process in the portal, and then map it to the relevant task or process start event.</span> </p> <p translate> <b>To use a layout in a business application</b>, export it from the UI Designer, import it into the portal as a resource and map it as the layout of the relevant application. </p> </uib-tab> <uib-tab heading="{{ \'Noteworthy changes\' | translate }}" class=shaker> <uib-accordion> <uib-accordion-group is-open=status.bonita79open heading=true> <uib-accordion-heading> Bonita 7.9 <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.bonita79open, \'glyphicon-chevron-right\': !status.bonita79open}"></i> </uib-accordion-heading> <dt translate>Easily create forms to edit business variables or documents, or display business variables in read-only </dt> <p translate> This improvement is visible when creating the form from Bonita Studio. It will automatically create new variables in the UI Designer and bind them with the related widgets. For more information, read the <a href="https://www.bonitasoft.com/bos_redirect.php?bos_redirect_id=693&bos_redirect_product=bos&bos_redirect_major_version=7.9">dedicated documentation.</a> </p> <dt translate>Use provided UID widgets as a template for a custom widget</dt> <p translate> Extend Bonita standard widgets to fulfill the specific needs of your project, using the menu option <b>View</b> in the Properties panel of every standard widget. From there, save as your custom widget and implement the extension you need. </p> <dt translate>New embedded AngularJS filter to resolve the lazy references of a business object</dt> <p translate> To improve the management of embedded objects with lazy references, create a variable using the | lazyRef filter for the object to retrieve. For more information, read the <a href="https://www.bonitasoft.com/bos_redirect.php?bos_redirect_id=692&bos_redirect_product=bos&bos_redirect_major_version=7.9">dedicated documentation.</a> </p> <dt translate>Switch widget</dt> <p translate> Directly from the whiteboard or from the widget properties section, switch from your current widget to another one and keep the properties already configured. </p> <dt translate>Render a UID page ot form in the end-user browser</dt> <p translate> Open your preview in a browser tab to set new URL parameters, play with dynamic browser sizing, and to reuse the same URL in another browser for testing purposes. </p> </uib-accordion-group> <uib-accordion-group is-open=status.bonita78open> <uib-accordion-heading> Bonita 7.8 <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.bonita78open, \'glyphicon-chevron-right\': !status.bonita78open}"></i> </uib-accordion-heading> <dt translate>New modal container to create pop-ins</dt> <p translate> Available in the palette, it opens over the content of a page/form/layout. To manage such containers, the Button widget gains two actions: "Open modal" and "Close modal". </p> <dt translate>Change the type of a UI Designer artifact (page/form)</dt> <p translate> From the page or form editors, right by the "Save" button, a click on the arrow displays a new option "Convert to...". It has also been added in the "Save as" option to, for example, save a form as a case overview page. </p> <dt translate>Edit the display name and display description of a page, form, or layout from the Editor </dt> <p translate> Display name and description are used when the page, form, or layout are imported in the portal\'s Resources page. To edit them, click on the new "Tag" button. </p> <dt translate>Summary of the calls to Bonita REST API made in a page, form, or layout</dt> <p translate> The same "Tag" button displays a summary of all REST API calls made by the current artifact to the Bonita REST API." </p> </uib-accordion-group> <uib-accordion-group is-open=status.bonita77open> <uib-accordion-heading> Bonita 7.7 <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.bonita77open, \'glyphicon-chevron-right\': !status.bonita77open}"></i> </uib-accordion-heading> <dt translate>Identifier</dt> <p translate> Starting with version 7.7.0, the name of a UI artifact becomes its unique identifier, instead of a randomized identifier. This will make them easier to find in Bonita repositories. You may rename existing artifacts so they benefit from this change too. </p> <p class="alert alert-warning" translate> Because of this change, if you receive a fragment, rename it and then share it back, it will be considered as a new file by the other Bonita Studios or UI Designers. </p> <p translate> For more information, consult the official UI Designer overview documentation. </p> </uib-accordion-group> </uib-accordion> </uib-tab> </uib-tabset> </div> <div class=modal-footer> <button class="btn btn-link" ng-click=$dismiss() translate>Close</button> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/home.html",'<div class=Home> <header class=HomeHeader> <div class=HomeHeader-logo> <img src=img/logo.svg> </div> <h1 class=HomeHeader-title translate>UI Designer</h1> <div class=HomeHeader-help> <button class="btn btn-bonita-help shaker" ng-click=openHelp() uib-tooltip="{{\'Open help\' | translate}}" tooltip-popup-delay=500 tooltip-placement=left> <i class="fa fa-question-circle"></i></button> </div> </header> <div class="container container--Home"> <div class="row Home-toolbar"> <div class=Home-buttons> <uid-create-artifact artifacts=artifacts.all artifact-active=getActivatedArtifact()></uid-create-artifact> <uid-import-artifact></uid-import-artifact> </div> <div class="Home-sortType pull-right" uib-tooltip-html=getSortTooltipMessage($storage.homeSortOrder) tooltip-popup-delay=500> <switcher ng-model=$storage.homeSortOrder true-value="\'-lastUpdate\'" true-label="<i class=\'fa fa-long-arrow-down\'></i> <i class=\'fa fa-calendar\'></i>" false-value="\'+name\'" false-label="<i class=\'fa fa-sort-alpha-asc\'></i>"></switcher> </div> <form class=Home-search role=search> <search value=search placeholder="{{ \'Search on name\' | translate }}"></search> </form> </div> <div class="row row--Home"> <section class="col-xs-5 Favorite-section"> <legend class="CreateArtifact-label CreateArtifact-label--primary" translate>Favorites</legend> <artifact-list artifacts="artifacts.all | filter:{name: search, favorite: \'true\'} | orderBy:$storage.homeSortOrder" existing-artifacts=artifacts.all refresh-all=refreshAll> </artifact-list> </section> <section class="col-xs-7 Artifact-section"> <uib-tabset active=active> <uib-tab ng-repeat="type in ::types"> <uib-tab-heading class="tab-{{:: type.id}}"> {{:: type.name | translate }} <span class="badge ArtifactSection-badge" ng-class="{\'ArtifactSection-badge--hasResults\': search && artifacts[type.id].length}"> {{ artifacts[type.id].length }} </span> </uib-tab-heading> <artifact-list ng-if="type.active = ($index === active)" artifacts="artifacts[type.id] | orderBy:$storage.homeSortOrder" existing-artifacts=artifacts[type.id] refresh-all=refreshAll download-artifact=downloadArtifact></artifact-list> </uib-tab> </uib-tabset> </section> </div> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/preview/open-preview.html",'<button class="btn btn-bonita-primary" id=preview uib-tooltip="{{ \'Changes need to be saved to enable the preview\' | translate }}" tooltip-enable=ctrl.isDisabled tooltip-placement=bottom tooltip-popup-delay=300 ng-click=ctrl.openPreview() ng-disabled=ctrl.isDisabled> <i class="fa fa-play"></i> <span translate>Preview</span> </button> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/preview/preview.html",'<div class=Preview> <nav class="navbar Preview-header" role=navigation> <div class=navbar-header> <navbar-toggle on-click="isNavCollapsed = !isNavCollapsed"></navbar-toggle> <span class=navbar-brand translate>Preview - {{pageName}}</span> </div> <div class=container-fluid> <form class="nav navbar-form navbar-right collapse navbar-collapse" uib-collapse=isNavCollapsed> <app-selector on-change=refreshIframe()></app-selector> <language-picker on-change=refreshIframe()></language-picker> <resolutions-bar on-change=updateResolutionInUrl id=resolutions class="btn-group Preview-resolutionBar"> </resolutions-bar> <button class="btn btn-bonita-default" uib-tooltip="{{ \'Expand Preview in new window\' | translate }}" tooltip-placement=bottom tooltip-append-to-body=true ng-click=openExpandedPreviewWindow()> <i class="fa fa-lg fa-external-link"></i> </button> </form> </div> </nav> <iframe preview-localized-iframe class=Preview-viewport ng-src={{iframe.src}} width={{iframeWidth()}}></iframe> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/assets/table/asset-section.html",'<table class="Table AssetTable"> <tbody> <tr class="AssetTable-type clickable" ng-click="vm.type.value = !vm.type.value;"> <td colspan=6 class=AssetTable-name translate> <span ng-class="vm.type.value ? \'glyphicon glyphicon-menu-down\' : \'glyphicon glyphicon-menu-right\'"></span> <translate>{{vm.type.label}} ({{vm.getAssetsCounterByTypeForCurrentScope()}})</translate> </td> </tr> </tbody> </table> <div ng-show=vm.type.value class=AssetTable-displayed> <table class="Table AssetTable"> <tbody> <tr ng-repeat="asset in assets | orderBy:[\'scope\', \'componentId\',\'order\'] as results" ng-class="{\'text-muted\':!asset.active}" id="{{asset.id || asset.$$hashKey}}"> <td class=AssetTable-active> <input type=checkbox ng-model=asset.active ng-click="deactivateAsset({\'asset\': asset})" ng-disabled=vm.isBaseFramework(asset)> </td> <td class=AssetTable-name>{{asset.name}}</td> <td class=AssetTable-source> {{{true:\'External\', false:\'Local\'}[vm.isExternal(asset)] | translate }} </td> <td class=AssetTable-scope> {{asset.componentId}} <span ng-if=vm.isPageAsset(asset) translate>Page level</span> <span ng-if=vm.isBaseFramework(asset) translate>Base framework</span> </td> <td class="AssetTable-order text-right"> <div class="btn-group link-group btn-group-sm btn-group-bonita-asset"> <button class="btn btn-bonita-asset" ng-click="incrementOrderAsset({\'asset\': asset})" title="{{ \'Move asset down\' | translate }}" ng-if="vm.isPageAsset(asset) && vm.type.orderable" ng-disabled="!vm.isPageAsset(results[$index + 1]) || vm.assetAlreadyOnMove || searchTerm"> <i class="fa fa-arrow-down"></i> </button> <button class="btn btn-bonita-asset" ng-click="decrementOrderAsset({\'asset\': asset})" title="{{ \'Move asset up\' | translate }}" ng-if="vm.isPageAsset(asset) && vm.type.orderable" ng-disabled="!vm.isPageAsset(results[$index - 1]) || vm.assetAlreadyOnMove || searchTerm"> <i class="fa fa-arrow-up"></i> </button> </div> </td> <td class="AssetTable-actions text-right"> <div class="btn-group link-group btn-group-sm btn-group-bonita-asset"> <button file-download class="btn btn-bonita-asset" href="{{getAssetUrl({\'asset\': asset})}}" title="{{\'Download asset\' | translate }}" ng-if="!vm.isExternal(asset) && !vm.isBaseFramework(asset)"> <i class="fa fa-alias-import"></i> </button> <button class="btn btn-bonita-asset" ng-click="openAssetPreviewPopup({\'asset\': asset})" title="{{ \'View asset content\' | translate }}" ng-if="isViewable({\'asset\': asset, \'scope\': vm.component.type}) && !vm.isBaseFramework(asset)"> <i class="fa fa-search"></i> </button> <button class="btn btn-bonita-asset" ng-click="openAssetEditPopup({\'asset\': asset})" title="{{ \'Edit asset\' | translate }}" ng-if="isEditable({\'asset\': asset, \'scope\': vm.component.type}) && !vm.isBaseFramework(asset)"> <i class="fa fa-pencil"></i> </button> <button class="btn btn-bonita-asset" ng-click="onDelete({\'asset\': asset})" title="{{ \'Delete asset\' | translate }}" ng-if=vm.isPageAsset(asset)> <i class="fa fa-trash"></i> </button> <button class="btn btn-bonita-asset" ng-click=vm.redirectTo(asset.url) title="{{ \'Open documentation \' | translate }}" ng-if="vm.isBaseFramework(asset) && asset.url"> <i class="fa fa-link"></i> </button> </div> </td> </tr> <tr ng-if="results.length===0"> <td colspan=6 translate>{{vm.getEmptyAssetMessage(vm.key,vm.type)}}</td> </tr> </tbody> </table> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/common/directives/alerts.html",'<div class=ui-alert-wrapper ng-show="alerts.length > 0"> <div class="ui-alert ui-alert-{{alert.type}}" ng-repeat="alert in alerts"> <button type=button class=close ng-click=remove($index) aria-label=Close><span aria-hidden=true>&times;</span></button> <h4>{{ alert.title || alert.type | translate }}</h4> <p alert-content=alert></p> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/common/directives/artifact-name-validation.html",'<input uib-tooltip="{{ name.errorMessage() }}" tooltip-class=tooltip-danger tooltip-is-open=name.errorMessage() tooltip-placement="{{ ::name.placement }}" tooltip-trigger=outsideClick ng-maxlength="{{ ::name.maxlength }}" ng-pattern="\'[a-zA-Z0-9]*\'"> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/common/directives/expand-modal.tpl.html",'<button type=button ng-click=toggleExpand() uib-tooltip={{getTooltipMessage()}} class="pull-right btn btn-sm btn-default" tooltip-append-to-body=true tooltip-popup-delay=200> <i ng-if=!expanded class="fa fa-expand"></i> <i ng-if=expanded class="fa fa-compress"></i> </button> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/bottom-panel/bottom-panel.html",'<div class=BottomPanel ng-class="{\'BottomPanel--closed\': bottomPanel.isClosed()}" resizable r-directions="[\'top\']"> <div class=BottomPanel-tabs> <button ng-repeat="tab in bottomPanel.tabs" class=BottomPanel-tab ng-class="{\'BottomPanel-tab--active\': tab.isActive()}" ng-click=tab.activate()> {{ tab.name }} </button> </div> <div class=BottomPanel-content ui-view=data></div> </div>')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/header/convert-popup.html",'<div class=modal-header> <h3 class=modal-title translate>Convert {{ctrl.page.name}}</h3> </div> <form class="form EditorHeader-convert" name=convert novalidate> <div class=modal-body id=modal-convert> <p translate> In the Studio, a form must be linked to a process or a task, using the contract; a page is linked to an application descriptor.</p> <div class=form-group ng-if="ctrl.type.key === \'page\' || ctrl.type.key === \'form\'"> <label class=control-label for=type tranlate>Type</label> <div id=type class=radio ng-repeat="type in ctrl.types"> <label><input type=radio name=type id=type-{{type.key}} ng-model=ctrl.type ng-value=type>{{type.value | translate}}</label> </div> </div> </div> <div class=modal-footer id=modal-export-page-controls> <button class="btn btn-primary" ng-click=ctrl.save(editMetadata) name=save ng-disabled=editMetadata.$invalid translate>Save </button> <button class="btn btn-link" ng-click="$dismiss(\'cancel\')" name=cancel translate>Cancel</button> </div> </form> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/header/export-popup.html",'<div class=modal-header> <h3 class="modal-title break-word" translate>Export {{ctrl.page.name}}</h3> </div> <form class="form EditorHeader-exportForm" name=exportPage> <div class=modal-body id=modal-export-page> <div> <h4 translate>Exported formats</h4> <p translate>The .zip archive of an exported page contains: </p> <ul> <li translate>JSON descriptor to exchange between UI Designers</li> <li translate>Minified widgets JavaScript for optimized performance</li> <li translate>Standard widgets JavaScript for edition outside the UI Designer</li> </ul> <p> <b translate>Attention:</b> <span translate>if you edit the page, form or layout outside the UI Designer, you will not be able to reimport it.</span> <span translate>You will have to manage the minification and update the resources URL to trigger the cache busting.</span> <span translate>For more information, consult the <a href="https://documentation.bonitasoft.com/?page=live-update#cache_busting">documentation</a>.</span> </p> </div> <div class=checkbox> <label uib-tooltip="{{\'If checked, this popup will not be displayed again unless you clean up your browser cache\' | translate}}" tooltip-placement=top-left tooltip-append-to-body=true tooltip-popup-delay=300> <input name=doNotShowAgain ng-model=ctrl.doNotShowAgain id=doNotShowAgain type=checkbox> <translate>Do not show me this dialog again</translate> </label> </div> </div> <div class=modal-footer id=modal-export-page-controls> <button class="btn btn-primary" ng-click=ctrl.ok() name=export translate>Export</button> <button class="btn btn-link" ng-click="$dismiss(\'cancel\')" name=cancel translate>Cancel</button> </div> </form> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/header/header.html",'<div class=EditorHeader role=navigation> <div class=EditorHeader-menu> <a class="EditorHeader-navBtn EditorHeader-back" ng-click=vm.back() uib-tooltip="{{ \'Back\' | translate }}" tooltip-placement=right tooltip-popup-delay=300> <i class="fa fa-chevron-left"></i> </a> <a ui-sref=designer.home class="EditorHeader-navBtn EditorHeader-homeNav" uib-tooltip="{{ \'Home page\' | translate }}" tooltip-placement=right tooltip-popup-delay=300> <i class="ui-icon ui-designer"></i> </a> <span class=EditorHeader-brand translate> {{ vm.page.type }} editor </span> <form name=formName class="form-inline EditorHeader-form" autocomplete=off> <input type=text name=name artifact-name-validation=bottom class="form-control EditorHeader-name" id=pageName placeholder="{{ \'Enter \' + vm.mode + \' name\' | translate }}" ng-model=vm.page.name ng-trim=false ng-model-options="{ debounce: 500 }" ui-validate="{alreadyExists : \'!vm.isArtifactNameAlreadyExist($value, vm.page)\'}" ui-validate-watch="\'vm.page\'" required> <button type=button id=metadata ng-if="vm.page.type === \'page\' || vm.page.type === \'form\' || vm.page.type === \'layout\'" class="btn btn-bonita-primary" ng-click=vm.editMetadata(vm.page) uib-tooltip="{{ vm.page.type + \' information\' | translate }}" tooltip-placement=bottom tooltip-popup-delay=300> <i class="ui-icon ui-tags"></i> </button> <div class=btn-group uib-dropdown> <button id=save type=button class="EditorHeader-saveButton btn btn-bonita-primary" ng-disabled="!formName.$valid || !vm.isPageDirty(page)" ng-click=vm.save(vm.page) translate>Save</button> <button type=button class="btn btn-bonita-primary uib-dropdown-toggle" ng-disabled=!formName.$valid uib-dropdown-toggle> <span class="fa fa-caret-down"></span> <span class=sr-only translate>Save</span> </button> <ul class=dropdown-menu role=menu> <li><a id=saveAs class=clickable ng-click=vm.saveAs(vm.page) ng-disabled=!formName.$valid translate>Save as ...</a></li> <li ng-if="vm.page.type === \'page\' || vm.page.type === \'form\'"><a id=convert class=clickable ng-click=vm.convert(vm.page) ng-disabled=!formName.$valid translate>Convert to ...</a></li> </ul> </div> <button type=button id=export class="btn btn-bonita-primary" ng-disabled=!formName.$valid ng-click=vm.saveAndExport(vm.page) uib-tooltip="{{ \'Export\' | translate }}" tooltip-placement=bottom tooltip-popup-delay=300> <i class="ui-icon ui-export"></i> </button> </form> <open-preview on-open-preview=vm.save(vm.page) mode={{vm.mode}} artifact-id=vm.page.id is-disabled="!formName.$valid || vm.isPageDirty(vm.page)"></open-preview> <div ng-if=vm.page.hasValidationError uib-tooltip="{{ \'Validation error on the page. Fix is recommended before export\' | translate }}" tooltip-placement=bottom tooltip-popup-delay=300 style=margin-left:10px> <i class="fa fa-times-circle error-icon"></i> <translate>Validation Errors</translate> </div> <save-indicator class=EditorHeader-saveIndicator></save-indicator> </div> <div class=EditorHeader-resolutions> <div resolutions-bar id=resolutions class=btn-group></div> </div> <div class=EditorHeader-help> <button class="btn btn-bonita-help" open-help editor-mode={{vm.mode}} uib-tooltip="{{ \'Open help\' | translate }}" tooltip-placement=bottom tooltip-popup-delay=300><i class="fa fa-question-circle"></i></button> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/header/metadata-popup.html",'<div class=modal-header> <h3 class=modal-title translate>{{ctrl.page.name}} information</h3> </div> <form class="form EditorHeader-editMetadata" name=editMetadata novalidate> <div class=modal-body id=modal-edit-metadata> <h4 translate>Metadata</h4> <div class=form-group> <label class=control-label for=page-displayName translate>Display name</label> <i class="fa fa-info-circle" uib-tooltip="{{\'Used in the portal list of Resources. Part of the page.properties descriptor in the exported page archive. If empty, page technical name is used as fallback.\' | translate}}" tooltip-placement=right></i> <input name=displayName ng-model=ctrl.displayName class=form-control id=page-displayName placeholder="{{ \'Page display name\' | translate }}" maxlength=255> </div> <div class=form-group> <label for=page-description translate>Description</label> <i class="fa fa-info-circle" uib-tooltip="{{\'Used in the portal list of Resources. Part of the page.properties descriptor in the exported page archive.\' | translate}}" tooltip-placement=right></i> <textarea name=description ng-model=ctrl.description class=form-control id=page-description placeholder="{{ \'Page description\' | translate }}">\n        </textarea></div> <br> <h4> <translate>Bonita REST API calls</translate> <i class="fa fa-info-circle" uib-tooltip="{{\'Summary of the Bonita REST API calls made by the page.\' | translate}}" tooltip-placement=right></i> </h4> <div class=form-group> <ul> <li ng-repeat="resource in ctrl.resources track by $index"> {{resource }} </li> <li ng-show=!ctrl.resources.length translate>No Bonita REST API calls.</li> </ul> <p></p> </div> </div> <div class=modal-footer id=modal-export-page-controls> <button class="btn btn-primary" ng-click=ctrl.save(editMetadata) name=save ng-disabled=editMetadata.$invalid translate>Save</button> <button class="btn btn-link" ng-click="$dismiss(\'cancel\')" name=cancel translate>Cancel</button> </div> </form> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/header/save-as-popup.html",'<div class=modal-header> <h3 class="modal-title break-word" translate>Save {{ctrl.page.name}} as...</h3> </div> <form class=form name=newPage> <div class=modal-body id=modal-save-page-as> <div class=form-group> <label class=control-label for=page-name tranlate>Name</label> <input name=name ng-model=ctrl.newName artifact-name-validation=bottom-left class=form-control id=page-name placeholder="{{ \'Page Name\' | translate }}" required autofocus> </div> <div class=form-group ng-if="ctrl.type.key === \'page\' || ctrl.type.key === \'form\'"> <label class=control-label for=type tranlate>Type</label> <i class="fa fa-info-circle" uib-tooltip="{{\'You can change the type to be able to use this artifact as a process form or as an application page.\' | translate}}" tooltip-placement=right></i> <div id=type class=radio ng-repeat="type in ctrl.types"> <label> <input type=radio name=type id=type-{{type.key}} ng-model=ctrl.type ng-value=type>{{type.value | translate}} <i class="fa fa-info-circle" uib-tooltip="{{type.tooltip | translate}}" tooltip-placement=right></i> </label> </div> </div> </div> <div class=modal-footer id=modal-delete-page-controls> <button class="btn btn-primary" ng-click=ctrl.ok() ng-disabled="!newPage.name.$dirty || newPage.$invalid || ctrl.newName == ctrl.page.name" translate>Save</button> <button class="btn btn-link" ng-click="$dismiss(\'cancel\')" translate>Cancel</button> </div> </form> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")
}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/palette/editor-palette.html",'<section class=Palette-sections> <button class=Palette-section ng-class="{\'Palette-section--active\': palette.isActiveSection(section)}" ng-repeat="section in palette.sections track by $index | orderBy:\'order\'" ng-click=palette.toggleSection(section) aria-label="{{section.name | translate}}" uib-tooltip="{{section.name | translate}}" tooltip-placement=right tooltip-popup-delay=500 tooltip-append-to-body=true> <i class=ui-icon ng-class=palette.getIconClassName(section)></i> </button> </section> <div class=Palette-widgets ng-if="palette.currentSection !== undefined"> <search value=palette.currentSection.search placeholder="{{ \'Search\' | translate }}"></search> <div class=Palette-board> <div palette-widget class="PaletteItem text-center" ng-repeat="widget in palette.currentSection.widgets | filterByComponentName:palette.currentSection.search | orderBy:\'component.order\'" widget=widget is-fragment=palette.isFragment()> </div> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/palette/palette-widget.html",'<div ng-class="{\'display-widget\': widget.component.id === \'pbModalContainer\' && isFragment }"> <div uib-tooltip="{{ widget.component.description | translate }}" tooltip-popup-delay=1000 tooltip-append-to-body=true tooltip-placement=right tooltip-is-open=tooltipIsOpen ng-mousedown="tooltipIsOpen = !tooltipIsOpen"> <div id="{{ widget.component.id }}" bo-draggable-data=widget bo-draggable> <img class=PaletteItem-icon ng-if=widget.component.icon ng-src={{iconData}} height=20 width=50> <identicon ng-if=!widget.component.icon name={{widget.component.id}} size=30 background-color=[0,0,0,0]></identicon> <h5 class=PaletteItem-label>{{ widget.component.name }}</h5> </div> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/component-properties-template.html",'<div class=form-group> <label for=width> <translate>Width</translate> <i class="fa fa-info-circle" tooltip-placement=top-right uib-tooltip="{{ \'Specify the number of columns of the element. All elements can take up to 12 columns.\' | translate }}" tooltip-append-to-body=true></i> </label> <div class="inner-addon left-addon"> <i class="fa fa-{{ resolution().icon }} bold text-normal"></i> <input ng-model=currentComponent.dimension[resolution().key] type=number class="form-control property--width input-sm" id=width min=1 max=12> <div class=editor-field-icon-label translate translate-n=currentComponent.dimension[resolution().key] translate-plural=columns>column</div> </div> </div> <property-field ng-repeat="property in currentComponent.$$widget.properties" property=property property-value=currentComponent.propertyValues[property.name] properties=currentComponent.propertyValues page-data=page.data></property-field> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/container-properties-template.html","<div ng-include=\"'js/editor/properties-panel/component-properties-template.html'\"></div> <div ng-include=\"'js/editor/properties-panel/container-repeat-content-tip.html'\"></div> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/container-repeat-content-tip.html","<div class=ContainerProperties-RepeatContentTip> <span class=tip>Tip: </span><translate>To use the collection data in the widgets of this container, there are contextual variables that you can bind to the widget properties:</translate> <ul> <li><translate><strong>$index</strong>: the index of the current iteration of the collection (counting from zero)</translate></li> <li><translate><strong>$item</strong>: the element of the current iteration</translate></li> <li><translate><strong>$collection</strong>: the current collection</translate></li> </ul> </div> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/modal-container-properties-template.html",'<property-field ng-repeat="property in currentComponent.$$widget.properties" property=property property-value=currentComponent.propertyValues[property.name] properties=currentComponent.propertyValues page-data=page.data></property-field> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/properties-panel-action-menu-template.html",'<div id=action class="btn-group PropertyPanel-widget-action-btn" uib-dropdown> <button ng-if="currentComponent.$$widget.type !== \'container\'" id=widgetActionButton type=button class="btn btn-xs btn-bonita-action-widget PropertyPanel-widget-action-btn" uib-dropdown-toggle tooltip-placement=top-right uib-tooltip="{{ \'Widget actions\' | translate }}" tooltip-append-to-body=true> <span class="fa fa-ellipsis-h"> </span></button> <ul class="dropdown-menu dropdown-menu-right PropertyPanel-widget-action-menu" role=menu aria-labelledby=typeButton> <li><a ng-if=!currentComponent.$$widget.custom id=viewAction class="clickable PropertyPanel-widget-action-item" ng-click=saveAndEditCustomWidget(currentComponent.$$widget.id) translate>View...</a></li> <li><a ng-if=currentComponent.$$widget.custom id=editAction class="clickable PropertyPanel-widget-action-item" ng-click=saveAndEditCustomWidget(currentComponent.$$widget.id) translate>Edit...</a></li> <li><a id=switchAction class="clickable PropertyPanel-widget-action-item" ng-click=switchCurrentComponent(currentComponent) translate>Switch...</a></li> </ul> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/properties-panel.html",'<div class=PropertyPanel-inner ng-show=currentComponent> <div class=PropertyPanel-header> <button ng-if=currentComponent.$$widget.hasHelp ng-click=triggerWidgetHelp() class="btn btn-xs btn-bonita-help-widget PropertyPanel-help-btn" uib-popover-template=widgetHelpTemplateURL type=button popover-trigger=none popover-is-open=widgetHelpPopover.isOpen popover-placement=left-top popover-class=PropertyPanel-help-popover> <i class="fa fa-question-circle"></i> </button> <div ng-include="\'js/editor/properties-panel/properties-panel-action-menu-template.html\'"></div> <h3 class=PropertyPanel-title> {{ currentComponent.$$widget.name }} </h3> </div> <div class=PropertyPanel-content ng-include=currentComponent.$$propertiesTemplateUrl></div> </div> <div class=PropertyPanel-inner ng-show=!currentComponent> <div class=PropertyPanel-content> <h4 class=PropertyPanel-hint translate>Select an element on the whiteboard, then set its properties here</h4> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/property-field.html",'<div class=form-group ng-if=isDisplayed() data-property="{{ property.name }}"> <div class=property-label> <label><i ng-if=property.icon class=PropertyPanel-PropertyIcon ng-class=property.icon.className></i> {{ property.label | translate }} <i class="fa fa-info-circle" ng-if=property.help uib-tooltip="{{property.help | translate}}" tooltip-placement=top-right tooltip-append-to-body=true></i></label> <small class=help-block compile-template="property.caption | translate"></small> </div> <ng-include src=propertyField.getBondTemplate(property)></ng-include> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/property-typeahead.html",'<input type=text class=form-control ng-model=vm.model uib-typeahead="key for key in vm.getValues($viewValue)" typeahead-min-length=0 typeahead-on-select="vm.onSelectedCallback($item, $model, $label)"> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/tab-properties-template.html","<div class=form-group> <label for=tab-title-input translate>Title</label> <input ng-model=currentComponent.title name=tab-title-input class=form-control id=tab-title-input> </div> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/widgetHelpTemplate.html","<div class=modal-header> <button type=button class=close ng-click=triggerWidgetHelp()><span aria-hidden=true>&times;</span></button> <h3 class=modal-title translate>Help</h3> </div> <div compile-template=widgetHelpPopover.content class=PropertyPanel-help-popover-body></div> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/whiteboard/component-mover.html",'<section class=component-caption> {{component.$$widget.name}} <button ng-if=moveLeftVisible() ng-click=moveLeft() class="fa fa-arrow-circle-left btn-caption move-left" title="Move the component to the left"></button> <button ng-if=moveRightVisible() ng-click=moveRight() class="fa fa-arrow-circle-right btn-caption move-right" title="Move the component to the right"></button> <button ng-if="component.$$widget.type === \'widget\'" ng-click=onSwitch() class="fa fa-exchange btn-caption" title="Switch widget"></button> <button ng-click=onDelete() class="fa fa-times-circle btn-caption" title="Delete the component"></button> </section> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/whiteboard/component-template.html",'<component id="{{ component.$$id }}" class=component-element component=component editor=editor component-index=$index row=row container=container ng-click="editor.selectComponent(component, $event)" ng-class="{\'component-element--selected\': editor.isCurrentComponent(component)}"> </component> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/whiteboard/component.html","<div class=widget-wrapper> <component-mover class=component-mover component=component on-delete=editor.removeCurrentComponent() on-switch=editor.switchCurrentComponent() ng-if=editor.isCurrentComponent(component)></component-mover> <div class=widget-content></div> <drop-zone editor=editor row=row container=container component-index=componentIndex></drop-zone> </div> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/whiteboard/container-template.html",'<container id="{{ component.$$id }}" class=container-element container=component editor=editor ng-click="editor.selectComponent(component, $event)" ng-class="{\'component-element--selected\': editor.isCurrentComponent(component)}"> </container> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/whiteboard/container.html",'<div class=widget-wrapper> <i ng-if=isRepeated(container) class="fa fa-list-ul Component-marker" title="{{ \'Repeated container\' | translate }}"></i> <component-mover component=container on-delete=editor.removeCurrentComponent() ng-if=editor.isCurrentComponent(container)></component-mover> <div ng-repeat="row in container.rows" ng-init="rowIndex = $index"> <div ng-if="$first && !isEmpty(container)" class="row dropRow" bo-dropzone bo-drop-success="dropBeforeRow($data, $event, $index, container.rows)"></div> <div class="row row-builder" ng-class="{\'row-element\':moveRowUpVisible(row) || moveRowDownVisible(row) || container.rows.length > 1, \'row-separator\': !$last}"> <div class="component-caption component-caption--row" ng-if="moveRowUpVisible(row) || moveRowDownVisible(row) || container.rows.length > 1"> <translate>Row</translate> <button class="fa fa-arrow-circle-up btn-caption move-row-up" title="{{ \'Move the row up\' | translate }}" ng-click="moveRowUp(row, $event)" ng-if=moveRowUpVisible(row)></button> <button class="fa fa-arrow-circle-down btn-caption move-row-down" title="{{ \'Move the row down\' | translate }}" ng-click="moveRowDown(row, $event)" ng-if=moveRowDownVisible(row)></button> <button class="fa fa-times-circle btn-caption" title="Delete the row" ng-click=removeRow(row) ng-if="container.rows.length > 1"></button> </div> <div ng-repeat="component in row" class=component ng-class=editor.componentClasses(component) bo-draggable bo-draggable-data=component bo-drop-item="dropItem($data, row, rowIndex)"> <i ng-if=isModalInContainer(component) class="fa fa-times-circle Component-marker error-icon" title="{{ \'A modal container cannot be located in another container. Recommendation: drop all modal containers at the bottom of the whiteboard.\' | translate }}"></i> <div ng-include=component.$$templateUrl ng-class="{\'error\':isModalInContainer(component)}"></div> </div> <div ng-if="editor.rowSize(row) < 12" bo-dropzone bo-drop-success="dropAtEndOfTheRow($data, $event, row)" data-col="{{12 - editor.rowSize(row)}}" class="widget-placeholder drop-container col-xs-{{12 - editor.rowSize(row)}}"> </div> </div> <div ng-if=!isEmpty(container) class="row dropRow" ng-class="{ \'dropRow--last\': $last }" bo-dropzone bo-drop-success="dropAfterRow($data, $event, $index, container.rows)"></div> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/whiteboard/form-container-template.html",'<form-container id="{{ component.$$id }}" class=form-element form-container=component editor=editor ng-click="editor.selectComponent(component, $event)" ng-class="{\'component-element--selected\': editor.isCurrentComponent(component)}"> </form-container> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/whiteboard/form-container.html",'<div class=widget-wrapper> <component-mover component=formContainer on-delete=editor.removeCurrentComponent() ng-if=editor.isCurrentComponent(formContainer)></component-mover> <form name="form-{{ id }}"> <container container=formContainer.container editor=editor></container> </form> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/whiteboard/modal-container-template.html",'<modal-container id="{{ component.$$id }}" class=modal-element modal-container=component editor=editor ng-click="editor.selectComponent(component, $event)" ng-class="{\'component-element--selected\': editor.isCurrentComponent(component)}"> </modal-container> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/whiteboard/modal-container.html","<div class=widget-wrapper> <i title=\"{{ 'Modal container' | translate }}\"></i> <component-mover component=modalContainer on-delete=editor.removeCurrentComponent() ng-if=editor.isCurrentComponent(modalContainer)></component-mover> <container container=modalContainer.container editor=editor></container> </div> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/whiteboard/tabs-container-template.html",'<tabs-container id="{{ component.$$id }}" class=container-element tabs-container=component editor=editor ng-click="editor.selectComponent(component, $event)" ng-class="{\'component-element--selected\': editor.isCurrentComponent(component)}"> </tabs-container> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/whiteboard/tabs-container.html",'<div class=widget-wrapper> <component-mover component=tabsContainer on-delete=editor.removeCurrentComponent() ng-if=editor.isCurrentComponent(tabsContainer)></component-mover> <ul class="nav nav-tabs" role=tablist> <li class=tab-element ng-repeat="tab in tabsContainer.tabs" ng-class="{\'active\': isOpened(tab), \'current-tab\': editor.isCurrentComponent(tab)}"> <a class=clickable ng-click="openTab(tab, $event)"> <button ng-click=moveTabLeft(tab) ng-if=moveTabLeftVisible(tab) class="fa fa-arrow-circle-left move-tab-left btn-tab"></button> <button ng-click=moveTabRight(tab) ng-if=moveTabRightVisible(tab) class="fa fa-arrow-circle-right move-tab-right btn-tab"></button> <span class=tab-title>{{ tab.title }}</span> <button title="{{ \'Remove tab\' | translate }}" ng-click=removeTab(tab) ng-if=isRemoveTabVisible(tab) class="fa fa-times-circle btn-tab"></button> </a> </li> <li class=tab-element> <a class=clickable ng-click=addTab($event) title="{{ \'Add a new tab\' | translate }}"> <i class="fa fa-plus"></i> </a> </li> </ul> <div ng-repeat="tab in tabsContainer.tabs" ng-show=isOpened(tab)> <container container=tab.container component=tabsContainer editor=editor></container> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/artifact-list/alert-deletion-notpossible-popup.html",'<div id=cannot-delete-popup> <div class=modal-header> <h3 class=modal-title> <span translate>Deletion is not possible</span> </h3> </div> <div class=modal-body> <span translate>The {{ artifact.type }} cannot be deleted because it is used in:</span> <ul> <li ng-repeat="(type, artifacts) in usedBy"> <translate translate-n=usedBy[type].length translate-plural="{{ type }}s"> {{ type }} </translate> : <span style="margin-left: 2px" class="badge break-word" ng-repeat="artifact in artifacts"> {{ artifact.name }} </span> </li> </ul> </div> <div class=modal-footer> <button class="btn btn-primary" ng-click=cancel() translate>Close</button> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/artifact-list/artifact-list.html",'<p class=Artifact-empty ng-if="artifactList.all.length === 0" translate> No artifact found. </p> <ul class=ArtifactList ng-if=artifactList.all.length> <li class="ArtifactList-item ArtifactList-item--primary ArtifactList-{{:: artifact.type }}" id="{{:: artifact.id }}" ng-repeat="artifact in artifactList.all track by artifact.id"> <div class=Artifact-info ng-switch=artifactList.isInEditionMode($index)> <a ng-switch-default ng-href="{{:: artifact.editionUrl }}" class="Artifact-link Artifact-link--primary"> <span ng-if=artifact.icon class=Artifact-icon><identicon name={{artifact.id}} size=25 foreground-color="[198, 199, 228, 255]" background-color=[0,0,0,0]> </identicon> <i ng-if=artifact.hasValidationError class="fa identicon-error-overlay"></i> </span> <i ng-if=!artifact.icon class="ui-icon ui-{{:: artifact.type }}s Artifact-icon" uib-tooltip="{{::!artifact.hasValidationError ? artifact.type : artifactList.translateKeys(\'Validation error. Fix is recommended before export\')}}" tooltip-popup-delay=500> <i ng-if=artifact.hasValidationError class="fa error-overlay"></i> </i> <span class=Artifact-text> <span class=Artifact-name uib-tooltip-template="\'js/home/artifact-list/artifact-tooltip-template.html\'" tooltip-popup-delay=500 tooltip-placement=top-left>{{artifact.name}} </span> <span class=Artifact-metadata>{{:: artifactList.translateKeys(\'Last Update:\') }} {{:: artifact.lastUpdate | date:\'short\' }}</span> </span> </a> <form name=renameArtifact class=Artifact-form ng-switch-when=true ng-submit="renameArtifact.$valid && artifactList.renameItem(artifact)" ng-init="artifact.newName = artifact.name"> <div> <input name=name class=form-control required ui-validate="{alreadyExists : \'!artifactList.isArtifactNameAlreadyExist($value, artifact, artifactList.existingArtifacts)\'}" ui-validate-watch="\'artifact\'" data-autofocus id="page-name-input-{{:: $index }}" ng-model=artifact.newName ng-blur="renameArtifact.$valid && artifactList.renameItem(artifact)" artifact-name-validation> </div> </form> </div> <div class=Artifact-actions> <span ng-if=artifactList.isInEditionMode($index)> <button class="Artifact-button Artifact-button--primary Artifact-rename" ng-mousedown=artifactList.toggleItemEdition($index) type=button uib-tooltip="{{artifactList.translateKeys(\'Cancel\')}}"> <i class="fa fa-times"></i> </button> <span ng-if=artifactList.isValid($index)> <button class="Artifact-button Artifact-button--primary Artifact-rename" ng-click=artifactList.toggleItemEdition($index) type=button uib-tooltip="{{artifactList.translateKeys(\'Rename\')}}" tooltip-popup-delay=500 ng-if=":: artifactList.getRepository(artifact.type).rename"> <i class="fa fa-check"></i> </button> </span> </span> <span ng-if=!artifactList.isInEditionMode($index)> <button class="Artifact-button Artifact-button--primary Artifact-rename" ng-class ng-click=artifactList.toggleItemEdition($index) type=button uib-tooltip="{{artifactList.translateKeys(\'Rename\')}}" tooltip-popup-delay=500 ng-if=":: artifactList.getRepository(artifact.type).rename"> <i class="fa fa-pencil"></i> </button></span> <favorite-button artifact-repository=::artifactList.getRepository(artifact.type) artifact=":: artifact"></favorite-button> <button file-download class="Artifact-button Artifact-button--primary Artifact-export" ng-click=artifactList.exportArtifact(artifact) uib-tooltip="{{:: artifactList.translateKeys(\'Export\')}}" tooltip-popup-delay=500> <i class="ui-icon ui-export"></i> </button> <button class="Artifact-button Artifact-button--primary Artifact-delete" type=button ng-click=artifactList.deleteArtifact(artifact) uib-tooltip="{{:: artifactList.translateKeys(\'Delete\')}}" tooltip-popup-delay=500> <i class="fa fa-trash"></i> </button> </div> </li> </ul> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/artifact-list/artifact-tooltip-template.html","<div class=Artifact-tooltip> {{artifact.name }} <br> <div class=Artifact-metadata> {{:: artifactList.translateKeys('In folder:')}} /{{ artifact.id }} </div> </div> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/artifact-list/confirm-deletion-popup.html",'<div id=confirm-delete-popup> <div class=modal-header> <h3 class=modal-title translate>Confirm deletion</h3> </div> <div class="modal-body break-word" translate> Are you sure you want to delete the {{ artifact.type }} <b>{{ artifact.name }}</b>? </div> <div class=modal-footer> <button class="btn btn-primary" ng-click=ok() name=delete translate>Delete</button> <button class="btn btn-link" ng-click=cancel() name=cancel translate>Cancel</button> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/artifact-list/favorite-button.html",'<span ng-switch=vm.isFavorite()> <button ng-switch-when=true class="Artifact-button Artifact-favoriteButton Artifact-favoriteButton--checked" ng-click=vm.toggleFavorite() type=button uib-tooltip="{{:: \'Unmark as favorite\' | translate }}" tooltip-popup-delay=500> <i class="fa FavoriteButton-icon"></i> </button> <button ng-switch-default class="Artifact-button Artifact-favoriteButton" ng-click=vm.toggleFavorite() type=button uib-tooltip="{{:: \'Mark as favorite\' | translate }}" tooltip-popup-delay=500> <i class="fa FavoriteButton-icon"></i> </button> </span> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/create/create-popover.html",'<form class=NewArtifact name=newArtifactForm ng-submit="createCtrl.create(createCtrl.type, createCtrl.name)"> <div class=modal-header> <h3 class=modal-title translate>Create new artifact</h3> </div> <div class=modal-body> <div class="form-group NewArtifact-type"> <label for=type tranlate>Type</label> <div class=radio ng-repeat="type in createCtrl.types"> <label><input type=radio name=type id=type-{{type.key}} ng-model=createCtrl.type ng-value=type>{{type.value | translate}} <i ng-if=type.tooltip class="fa fa-info-circle" uib-tooltip="{{type.tooltip | translate}}" tooltip-placement=top></i> </label> </div> </div> <div class=form-group> <label for=name translate>Name</label> <input id=name name=name type=text class=form-control required autofocus placeholder="{{ createCtrl.type.value + \' name\' | translate }}" ng-model=createCtrl.name ui-validate="{alreadyExists : \'!createCtrl.isArtifactNameAlreadyExist($value, createCtrl.type)\'}" ui-validate-watch="\'createCtrl.type\'" artifact-name-validation> </div> </div> <div class=modal-footer> <button type=submit class="btn btn-primary" ng-disabled=newArtifactForm.$invalid translate>Create</button> <button type=button class="btn btn-link" ng-click=createCtrl.close() translate>Cancel</button> </div> </form> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/create/home-create.html",'<button type=button class="btn btn-bonita-primary HomeCreate" uib-tooltip="{{\'Create a new UI Designer artifact\' | translate}}" tooltip-popup-delay=500 tooltip-placement=bottom uib-popover-template="\'js/home/create/create-popover.html\'" popover-trigger=outsideClick popover-placement=bottom-left popover-is-open=createCtrl.isOpen popover-class=HomeCreate-popover> <i class="fa fa-plus"></i> <translate>Create</translate> </button> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/import/home-import.html",'<button type=button class="btn btn-bonita-default HomeImport" uib-tooltip="{{\'Import a UI Designer artifact\' | translate}}" tooltip-popup-delay=500 tooltip-placement=bottom uib-popover-template="\'js/home/import/import-popover.html\'" popover-trigger=outsideClick popover-placement=bottom-left popover-is-open=import.isOpen popover-class=HomeImport-popover> <i class="ui-icon ui-import"></i> <translate>Import</translate> </button> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/import/import-error-message.html","<p> {{ cause }} </p> <p> <div>{{ consequence }}</div> <div>{{ additionalInfos }}</div> </p> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/import/import-popover.html",'<form action="{{ import.url }}" name=uploadForm ng-upload=import.onComplete(content)> <div class=modal-header> <h3 class=modal-title>{{ import.popupTitle | translate }}</h3> </div> <div class=modal-body> <div class="input-group file-upload"> <input type=text readonly disabled placeholder="{{\'Select your .zip file\' | translate}}" value={{import.filename}} class=form-control> <span class=input-group-btn> <span class=btn ng-class="{\'btn-default disabled\':$isUploading, \'btn-primary\':!$isUploading}"> <input class=file-upload-input ng-class="{\'file-upload-input--disabled\':$isUploading}" name=file type=file accept=application/zip ng-model=import.filename required file-input-change> <i class=fa ng-class="{\'fa fa-spinner fa-pulse\':$isUploading, \'fa-folder\':!$isUploading}"> </i></span> </span> </div> </div> <div class=modal-footer> <button type=submit class="btn btn-primary" ng-disabled="uploadForm.$invalid || $isUploading" translate>Import</button> <button type=button class="btn btn-link" ng-click=import.close() translate>Cancel</button> </div> </form> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/import/import-report-item-list.html",'<ul> <li ng-repeat="(artifactType, artifacts) in dependencies"> <span class=text-muted> <i class="ui-icon ui-{{artifactType}}s"></i> <translate translate-n=artifacts.length translate-plural="{{ artifactType }}s" class=ImportReport-type>{{ artifactType }} </translate> </span> <strong>{{ joinOnNames(artifacts) }}</strong> </li> </ul> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/import/import-report-popup.html",'<div class=ImportReport> <div class=modal-header> <h3 class=modal-title><i class="fa fa-exclamation-triangle text-warning"></i><translate>Import {{ ::importReport.name }}</translate></h3> </div> <div class=modal-body> <p ng-if="importReport.report.overwritten && importReport.isPageImport()"> <translate>A {{ ::importReport.overwrittenType }} with the same identifier as <strong>{{ ::importReport.name }}</strong> already exists.</translate><br> <translate>The {{ ::importReport.overwrittenType }} <strong>{{ ::importReport.overwrittenName }}</strong> will be overwritten.</translate><br> <translate>To save <strong>{{ ::importReport.overwrittenName }}</strong> with a different identifier, open it and use <i>Save as</i> before you import.</translate> </p> <p ng-if="importReport.report.overwritten && !importReport.isPageImport()"> <translate>A {{ ::importReport.overwrittenType }} with the same Id as <strong>{{ ::importReport.name }}</strong> already exists.</translate><br> <translate>Id must be unique, so the {{ ::importReport.overwrittenType }} <strong>{{ ::importReport.overwrittenName }}</strong> will be overwritten.</translate><br> <translate>To save <strong>{{ ::importReport.overwrittenName }}</strong> with a different identifier, <i>rename</i> it before you import.</translate> </p> <div ng-if=importReport.hasDependencies()> <translate>The {{ ::importReport.type }} to import contains elements with the same Id as some existing elements.</translate> <import-report-item-list page-name=importReport.name type=importReport.type dependencies=importReport.report.dependencies.overwritten> </import-report-item-list> <p> <translate>Id must be unique, so those elements will be overwritten.</translate><br> <translate>To avoid them being overwritten, <i>rename</i> them before you import.</translate> </p> <div ng-if=importReport.report.dependencies.added> <p> <translate>The imported {{ ::importReport.type }} also contains new elements.</translate> <span ng-click="showDetails = !showDetails" class="clickable ImportReport--smallAndUnderlined"> <span ng-if=showDetails class="fa fa-caret-down"></span> <span ng-if=!showDetails class="fa fa-caret-right"></span> <translate>Details</translate> </span> </p> <div uib-collapse=!showDetails> <import-report-item-list page-name=importReport.name type=importReport.type dependencies=importReport.report.dependencies.added> </import-report-item-list> </div> </div> </div> <p translate>Do you still want to import this {{ ::importReport.type }} now ?</p> </div> <div class=modal-footer> <button type=button class="btn btn-primary" ng-click=importReport.forceImport() translate>Import</button> <button type=button class="btn btn-link" ng-click="$dismiss(\'cancel\')" translate>Cancel</button> </div> </div> ')
}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/import/import-success-message.html",'<div class=ImportReport ng-controller="ImportSuccessMessageController as import"> <p><span class=ImportReport-type>{{import.translateKeys(type)}}</span> <strong>{{ element.name }}</strong> <translate>successfully imported.</translate> </p> <section class=ImportReport-added ng-if=dependencies.added> <translate>Added artifacts</translate>: <import-report-item-list page-name=element.name type=type display-page=!overwritten dependencies=dependencies.added></import-report-item-list> </section> <section class=ImportReport-overwritten ng-if=dependencies.overwritten> <translate>Overridden artifacts</translate>: <import-report-item-list page-name=element.name type=type display-page=overwritten dependencies=dependencies.overwritten></import-report-item-list> </section> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/preview/app-selector/app-selector.html",'<div class=input-group> <span class="input-group-addon Select-addon" translate> View in application <i class="fa fa-info-circle ng-scope" uib-tooltip="{{\'In case your application is not available, please log in using a different account\' | translate}}" tooltip-placement=bottom tooltip-append-to-body=true></i> </span> <select class="form-control Select-control" ng-change=setNewAppTokenAndRefresh(vm.pathToLivingApp) ng-model=vm.pathToLivingApp uib-tooltip={{vm.selectedAppDisplayName}} tooltip-placement=bottom tooltip-append-to-body=true> <option selected value=no-app-selected translate>None</option> <option ng-repeat="app in vm.apps" value={{app.token}}> {{app.displayName}} </option> </select> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/common/directives/save-indicator/save-indicator.html",'<span class=SaveIndicator ng-class="{ \'SaveIndicator--visible\': indicator.isVisible }"> <i class="glyphicon glyphicon-ok"></i>&nbsp;<translate>Saved</translate> </span> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/common/directives/search/search.html",'<div class=Search> <i class="Search-icon fa fa-search" aria-hidden=true></i> <input class="form-control Search-input" name=search ng-model=search.value ng-model-options="{ debounce: 200 }" placeholder="{{ search.placeholder }}" autocomplete=off type=search> <button type=button ng-if=search.isClearButtonVisible() ng-click=search.clearValue() class=Search-clearButton title="{{ \'Clear search\' | translate }}" aria-label="{{ \'Clear search\' | translate }}"> <i aria-hidden=true class="fa fa-times"></i> </button> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/bottom-panel/data-panel/data-popup.html",'<form name=addData role=form novalidate ng-submit=save(newData)> <div class="modal-header DataPanel--hideOnFullScreen"> <h3 class=modal-title ng-if=isNewData translate><span>Create a new variable</span></h3> <h3 class=modal-title ng-if=!isNewData><span translate>Edit variable</span> <strong>{{newData.$$name}}</strong></h3> </div> <div class=modal-body> <div class="form-group DataPanel--hideOnFullScreen" ng-if=isNewData ng-class="{\'has-error\': !isDataNameUnique(newData.$$name)}"> <label class="control-label control-label--required" for=name> <span translate>Name</span> <span ng-show=!isDataNameUnique(newData.$$name) translate> \'{{newData.$$name}}\' already exists</span> </label> <input type=text class=form-control autofocus placeholder="{{\'Name\' | translate}}" name=name ng-model=newData.$$name ng-trim=false ng-pattern="/^[a-zA-Z][\\w]*$/" required> <p class=text-danger ng-show="addData.name.$dirty && addData.name.$error.pattern" translate>Variable names must start with a letter and contain only alphanumeric characters</p> </div> <exposable-data model=newData.exposed ng-if=exposableData></exposable-data> <div ng-if=!newData.exposed> <div class="form-group DataPanel--hideOnFullScreen"> <label class=control-label for=type translate>Type</label> <select name=type class=form-control ng-model=newData.type ng-change=updateValue(newData.type) ng-options="dataType.type as getLabel(dataType.type) group by dataType.group for dataType in dataTypes"></select> </div> <div ng-switch=newData.type class="form-group form-group--data">  <label ng-switch-default class=control-label for=value translate>Value</label> <input ng-switch-default type=text class=form-control placeholder="{{\'Value\' | translate }}" id=value name=value ng-model=newData.value>  <label ng-switch-when=urlparameter class=control-label for=value translate>URL parameter name</label> <input ng-switch-when=urlparameter type=text class=form-control placeholder="{{\'name\' | translate}}" id=value name=value ng-model=newData.value> <p class=help-block ng-switch-when=urlparameter translate> <span class=tip>Tip:</span> URL parameters are located after a <em>?</em> in the page URL. </p>  <label ng-switch-when=url class=control-label for=value translate>API URL</label> <input ng-switch-when=url autofocus type=text class=form-control placeholder=../API id=value name=value ng-model=newData.value required valid-url> <div class=help-block ng-switch-when=url translate> <p><span class=tip>Tip:</span> You can use data in the URL, by using the syntax <em ng-non-bindable>{{dataName}}</em></p> <p><span class=tip>Tip:</span> You can extend our REST API capabilities by creating <em>REST API extensions</em> in the Studio <i>Development</i> menu and use them here</p> </div> <section ng-switch-when=url> <button ng-click="examplesCollapsed = !examplesCollapsed" type=button class="btn btn-link" translate>See examples</button> <div class=well uib-collapse=examplesCollapsed> <div class=form-group> <select class=form-control ng-options="example as example.description group by example.category for example in apiExamples" ng-model=example></select> </div> <div> <p>{{ example.before }}</p> <p ng-bind-html=example.url></p> <p>{{ example.more }}</p> </div> <div ng-if=example.alternative> <p>{{ example.alternative.before }}</p> <p ng-bind-html=example.alternative.url></p> <p>{{ example.alternative.more }}</p> </div> </div> </section>  <div ng-switch-when=json class=row> <div class="col-xs-12 DataPanel-expandableValue"> <label class="control-label DataPanel-valueLabel" for=value translate>Value</label><expand-modal></expand-modal> </div> <div class=col-xs-12> <ace-editor class=ace-editor--data autofocus mode=json ng-model=newData.value ng-model-options="{debounce: 300}" name=object required valid-json id=value></ace-editor> <p class="help-block DataPanel--hideOnFullScreen" translate> <span class=tip>Tip:</span> Array syntax: ["val1", "val2"], Object syntax: {"key": "value"} </p> </div> </div> <section ng-switch-when=json class=DataPanel--hideOnFullScreen> <button ng-click="examplesCollapsed = !examplesCollapsed" type=button class="btn btn-link" translate>See examples</button> <div uib-collapse=examplesCollapsed> <p translate> supportTicket is an object composed of a <em>subject</em>, <em>severity</em> level, user <em>environment</em>, reporter\u2019s <em>contact</em> (<em>name</em> and <em>job title</em>), and an <em>URL</em> providing more details on the contact. </p> <pre>{\n      "subject": "I have an issue",\n      "severity": 2,\n      "environment": ["Linux","PostgreSQL 9.3","Java 1.8","AngularJS 1.3"],\n      "contact":{\n          "name":"John Doe",\n          "jobTitle":"FrontEnd developer",\n           "contactDetailsURL":"http://jsonplaceholder.typicode.com/users/1"\n      }\n  }</pre> <p class="alert alert-info"> <span class="glyphicon glyphicon glyphicon-info-sign" aria-hidden=true></span> <span translate>JSON specifications can be found on the </span> <a href="http://www.w3.org/TR/json-ld/" title="{{\'view W3C\\\'s Json specification\'|translate}}" translate>W3C website</a> </p> </div> </section>  <div ng-switch-when=expression class=row> <div class="col-xs-12 DataPanel-expandableValue"> <label class="control-label DataPanel-valueLabel" for=value translate>Value</label><expand-modal></expand-modal> </div> <div class=col-xs-12> <ace-editor class=ace-editor--data autofocus mode=javascript auto-completion={{pageData}} ng-model=newData.value ng-model-options="{debounce: 300}" name=expression id=value></ace-editor> <p class="help-block DataPanel--hideOnFullScreen" translate> <span class=tip>Tip:</span> Hit <span class=key>$</span> key to access data, use ctrl-space to trigger autocomplete. </p> </div> </div> <section ng-switch-when=expression class=DataPanel--hideOnFullScreen> <button ng-click="examplesCollapsed = !examplesCollapsed" type=button class="btn btn-link" translate>See example \'functional programming\'</button> <div uib-collapse=examplesCollapsed> <p class="alert alert-default"> <span class="glyphicon glyphicon-info-sign" aria-hidden=true></span> <span translate>This example uses the JSON example provided if you select the type JSON.<br> It looks for the string \u2018Linux\u2019 in the array <code>environment</code> of JSON object <code>supportTicket</code></span> </p> <pre>return $data.supportTicket.environment.some(function(env){\n   return env.indexOf("Linux") != -1;\n});</pre> </div> <br> <button ng-click="advancedExamplesCollapsed = !advancedExamplesCollapsed" type=button class="btn btn-link" translate>See example \'date object initialization\'</button> <div uib-collapse=advancedExamplesCollapsed> <pre>return new Date();</pre> </div> </section> </div> </div> </div> <div class=modal-footer> <button class="btn btn-bonita-default" ng-if=isNewData ng-disabled="!addData.$valid || !isDataNameUnique(newData.$$name)" translate>Save </button> <button class="btn btn-bonita-default" ng-if=!isNewData ng-disabled=!addData.$valid translate>Save</button> <button class="btn btn-link" type=button ng-click=cancel() translate>Cancel</button> </div> </form> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/bottom-panel/data-panel/data.html",'<div class=Toolbar> <div class=Toolbar-action> <button class="btn btn-default" ng-click=openDataPopup() translate>Create a new variable</button> <button class="btn btn-default btn-data--help" ng-click=openHelp() title="{{\'Open help\' | translate}}"> <i class="fa fa-question-circle"></i> </button> </div> <div> <search value=searchedData placeholder="{{ \'Search\' | translate }}"></search> </div> </div> <table class="Table VariablesTable"> <thead> <tr> <th class="VariablesTable-name Table-sort"> <a ng-click="sort(\'name\')" translate>Name</a> </th> <th class=VariablesTable-value translate>Value</th> <th class="VariablesTable-type Table-sort"> <a ng-click="sort(\'type\')" translate>Type</a> </th> <th class=VariablesTable-actions></th> </tr> </thead> </table> <div class=BottomPanel-scrollableView> <table class="Table VariablesTable"> <tbody> <tr ng-repeat="variable in getVariables(searchedData) | orderBy:sortCriteria:isReversedSorting as variables track by variable.name" class=DataPanel-variable> <td class=VariablesTable-name>{{variable.name}}</td> <td class=VariablesTable-value>{{variable.value}}</td> <td class=VariablesTable-type ng-class="{\'VariablesTable-type--exposed\': isExposed(variable)}"> {{getType(variable)}} </td> <td class=VariablesTable-actions> <div class="btn-group link-group btn-group-sm pull-right"> <button class="btn update-data" ng-click=openDataPopup(variable.name) title="{{ \'Edit variable\' | translate }}"> <i class="fa fa-pencil"></i> </button> <button class="btn delete-data" ng-click=delete(variable.name) title="{{ \'Delete variable\' | translate }}"> <i class="fa fa-trash"></i> </button> </div> </td> </tr> <tr ng-if="variables.length===0"> <td colspan=4 translate>No variable</td> </tr> </tbody> </table> </div>')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/bottom-panel/data-panel/help-popup.html","<div class=modal-header> <button type=button class=close ng-click=$dismiss()><span aria-hidden=true>&times;</span></button> <h3 class=modal-title translate>Help</h3> </div> <div class=modal-body> <uib-tabset class=tabs-left> <uib-tab heading=\"{{ 'General' | translate }}\"> <p translate> In the scope of a page, form, or layout, a variable can be used to handle business data, or can contain structural information that determines how page elements behave. </p> <p translate>Create a variable here. Using the variable in a widget property depends on the property value type, described in the page editor general help, in the <i>Properties</i> section.</p> <p translate>Available variables types are string and JSON (static), and External API, JavaScript expression, and URL parameter (dynamic).</p> <p translate>You can extend our REST API capacities by creating <em>REST API extensions</em> in the Studio <i>Development</i> menu and use them as External API variables in the UI Designer.</p> </uib-tab> <uib-tab heading=\"{{ 'Living data' | translate }}\"> <p translate>Variables can be bound to input fields to create conditional behavior between widget properties.</p> <p translate>A binding is dynamic, so every time data changes, all variables are re-evaluated and the UI is updated. In consequence:</p> <ul> <li translate>A variable initialized with a JavaScript expression is executed when the page is loaded. Then, when one of its dependencies changes, its value is updated. Dependencies are created using <code>$data.XXX</code>. </li> <li translate>A variable initialized with an External API is reloaded every time the URL value changes.</li> </ul> </uib-tab> <uib-tab heading=\"{{ 'Default variables' | translate }}\"> <p translate> When you generate a form from a contract in the Studio, the form contains a Submit button and some default variables: <code>formInput</code>, <code>formOutput</code>, <code>taskId</code>, and <code>context</code> </p> <p translate> <code>formInput</code> is a JSON object. <br>Its structure is defined by the contract inputs and the attributes are initialized with default values. It could be used to set initial values for form fields. <br>You can set the values in <code>formInput</code> either by editing the default values with constants (useful for test and debug) or with values from an object in an external source that has the same model (such as with a BDM external API). <br>You can also set the initial values of a form from some other source without using <code>formInput</code>. However, you will then have to edit <code>formOutput</code> manually. </p> <p translate> <code>formOutput</code> is a JavaScript expression returning an object. <br>Its structure matches the contract requirements and is filled with <code>formInput</code> by default. Its goal is to aggregate the fields from the form and to submit them to the task or process to fulfil the contract. On Submit, values entered or modified by the end-user and aggregated in the <code>formOutput</code> object (as defined by the <i>Data sent on click</i> property of the Submit button) are submitted to the process or task </p> <p translate> <code>taskId</code> is a URL Parameter. <br>It is the id of the current BPM task. You can use it as a BPM API parameter. </p> <p><translate><code>context</code> is an External API.</translate> <br><translate>It provides references to all business variables and documents in the process instance (case). To retrieve a business variable instance, create an External API variable with value</translate> <span ng-non-bindable>../{{context.myBusinessData_ref.link}}</span> </p> <p> <translate>To retrieve a document instance, create an External API variable with value</translate> <span ng-non-bindable>../API/{{context.documentData_ref.url}}</span> </p> <p> <translate>To allow your user to download a document add a link widget with its url property bound to</translate><span ng-non-bindable>'../API/' + context.documentData_ref.url</span> </p> <p translate> <code>submit_errors_list</code> is a JavaScript expression formatting the response payload to html when a submit fails. </p> <p translate> In some cases, other types of variables are created: <ul> <li> When the business variable is edited in the form (as specified in the contract creation wizard), a UI Designer variable is created for each variable (External API). <br>For example, if the contract input has been created from a business variable 'invoice' in the process, a variable <code>invoice</code> is created in the form and its URL is set to <span ng-non-bindable>../{{context.invoice_ref.link}}</span>. <br>If <code>invoice</code> contains lazy relations, additional variables are generated for each lazy relation to resolve (using <em>lazyRef</em> filter). <br>For example, if 'invoice' has a 'customer' relation in lazy, an External API variable <code>invoice_customer</code> is added. Its URL is set to <span ng-non-bindable>{{invoice|lazyRef:'customer'}}</span>.</li> <li>To display an aggregated object, a Select widget is generated to display the <em>available values</em> of the object. The variable (External API) bound to the widget is created. It queries the BDM. <br>For example, when the object Invoice has an aggregated object Customer, a variable <code>customer_query</code> is created with URL: <span ng-non-bindable>../API/bdm/businessData/com.company.model.Customer?q=find&p=0&c=99</span>. By default it uses the <code>find</code> query with a default pagination (only first 100 objects are returned).</li> </ul> </p> </uib-tab> </uib-tabset> </div> <div class=modal-footer> <button class=\"btn btn-link\" ng-click=$dismiss() translate>Close</button> </div> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/header/help/help-migration.html",'<div> <h4 translate>7.5 Migration notes</h4> <p translate>Since 7.5.0, UI Bootstrap is no longer provided in the UI Designer pages.</p> <p translate>To keep things working, if you migrate a page designed in a version older than 7.5.0 and containing custom widgets, <em>ui-bootstrap-tpls-0.13.0.min.js</em> will be added as an asset of your page automatically. You can remove it if you don\'t need it.</p> <p translate>For new artifacts, you need to add the asset yourself in the custom widgets or pages that require it.</p> <p ng-if=showMessage><em translate>You can see the migration notes again by clicking on the help button</em> - <i class="fa fa-question-circle"></i></p> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/header/help/help-popup.html",'<div class=modal-header> <button type=button class=close ng-click=cancel()><span aria-hidden=true>&times;</span></button> <h3 class=modal-title translate>Help</h3> </div> <div class=modal-body> <uib-tabset class=tabs-left active=tabContainer.activeTab> <uib-tab heading="{{ \'Editor organization\' | translate }}" index="\'editor\'"> <p translate>Use the palette on the left to drag and drop containers and widgets in the whiteboard.</p> <p translate>Once you select an element, edit its properties in the properties panel on the right.</p> <p translate>Create variables in the Variables panel at the bottom, and use them to edit the widget properties.</p> <p ng-if=pageEdition translate>Add images, CSS or JavaScript resources to your pages in the Assets panel at the bottom.</p> </uib-tab> <uib-tab heading="{{ \'Rows\' | translate }}" index="\'rows\'"> <p> <translate>The whiteboard is organized in <b>rows</b> that you can move up and down, or delete. </translate> <ul> <li translate>Drag and drop widgets or containers in rows</li> <li translate>When you delete a row, the following rows move up</li> <li translate>Within a row, when you delete a widget or a container, the following elements move to the left </li> </ul> </p> </uib-tab> <uib-tab heading="{{ \'Widgets\' | translate }}" index="\'widgets\'"> <p translate>Use <b>widgets</b> from the palette on the left to <b>display information to</b> and <b>gather information from</b> the end users.</p> <p translate>Configure widgets using the <b>properties panel</b> on the right.</p> <p translate>You can also create custom widgets, from existing widgets by "saving as" or from scratch in the home page.</p> <dl class=Guidance-definitionList> <dt translate>View</dt> <dd translate>To view the code of a standard widget, use the <b>View</b> menu option close to the widget name in the properties panel. From there, to use the standard widget as a basis for a custom widget, click on <b>Save as</b>, find a name for the custom widget, and make it your own. </dd> <dt translate>Edit</dt> <dd translate>To edit a custom widget, use the <b>Edit</b> menu option close to the widget name in the properties panel.</dd> <dt translate>Switch <i class="fa fa-exchange"></i></dt> <dd> <p transalte> To replace a widget by another one and keep the current configuration, use the Switch option: <ul> <li translate>Either select the widget to switch and click on <i class="fa fa-exchange"></i>.</li> <li translate>Or use the <b>Switch</b> menu option close to the widget name in the properties panel.</li> </ul> </p> <p translate> In the Switch wizard, select or type the widget to switch to, then click <b>Show properties</b>.<br> Whenever possible, properties in the source widgets are mapped with similar properties in the target widget. You can edit that or map more, then click on <b>Switch</b>. </p> <p translate> When the switch is completed, chances are you will still have properties to fill out, in the properties panel. </p> <p class="alert alert-info" translate> Containers cannot be switched. </p> </dd> </dl> </uib-tab> <uib-tab heading="{{ \'Containers\' | translate }}" index="\'containers\'"> <p translate> You can group widgets into a container to define the arrangement of widgets in a form or a page. A container can contain other containers. </p> <p> <translate>Each type or container has specific behaviors</translate> <ul> <li translate>Repeat content for the plain container</li> <li translate>Multiple content for tabs container</li> <li translate>Access to $form capabilities for form container</li> </ul> </p> <p class=CalloutSubscription> <span class=CalloutSubscription--title translate>Subscription edition</span> <translate>You can save the content of a plain container as a reusable fragment.</translate> </p> </uib-tab> <uib-tab heading="{{ \'Variables\' | translate }}" index="\'variable\'"> <p translate> In the scope of a page, form, or layout, a variable can be used to handle business data, or can contain structural information that determines how page elements behave. </p> <p translate> Create a variable in the bottom panel. Using a variable in a widget property depends on the property value type, described in the next section. </p> <p class=CalloutSubscription> <span class=CalloutSubscription--title translate>Subscription edition</span> <translate> In the fragment editor, you can set the scope of a variable to <i>specific to this fragment</i> or to <i>exposed to the page</i>. </translate> </p> </uib-tab> <uib-tab heading="{{ \'Properties\' | translate }}" index="\'properties\'"> <ng-include src="\'js/editor/properties-panel/help/property-bond-help.html\'"> </ng-include></uib-tab> <uib-tab heading="{{ \'Filters\' | translate }}" index="\'filters\'"> <p translate>You can format data with filters when data is used in widget property fields that allow interpolation <i class="fa fa-paragraph"></i> or that are bound to a variable <i class="fa fa-link"></i> .</p> <p translate> All <a href=https://code.angularjs.org/1.3.18/docs/api/ng/filter target=_blank>angularJS filters</a> are available. Usage requires the use of <code>|</code> ("pipe"). E.g. <code>myVariable|lowercase</code>. </p> <dt translate>Date filter</dt> <dd> <p translate> For date format specifically, the UI Designer comes with a <em>uiDate</em> filter to easily display dates retrieved from the BDM or any other REST API. </p> <p> <translate>You can apply it to the following variable value types:</translate> <ul> <li><a href=https://en.wikipedia.org/wiki/ISO_8601 target=_blank>ISO 8601</a> <translate>formatted String variables</translate></li> <li translate>Date object</li> <li translate>Milliseconds since Epoch (number or string variable)</li> </ul> </p> <p translate> Two use cases : <ul> <li><code>dateVariable|uiDate</code> applies a default <a href=https://code.angularjs.org/1.3.18/docs/api/ng/filter/date target=_blank>format</a>. For an ISO 8601 string with a time, the default format is <em>\'medium\'</em>. Otherwise, it is <em>\'mediumDate\'</em>.</li> <li><code>dateVariable|uiDate:format</code> if you need to be more specific in which format, it can be specified exactly the same way as with <a href=https://code.angularjs.org/1.3.18/docs/api/ng/filter/date target=_blank>angularJS date filter</a>.<br> E.g. <code>dateVariable|uiDate:\'short\'</code> or <code> dateVariable|uiDate:\'dd/MM/yyyy\'</code></li> </ul> </p> <p class=CalloutSubscription> <span class=CalloutSubscription--title translate>Subscription edition</span> <translate>Date formats are localized by default. Localized formats can be edited in <em>localization.json</em> (refer to the <a href=javascript:void(0); ng-click="tabContainer.activeTab = \'localization\'">localization section</a>).</translate> </p> </dd> <dt translate>Lazy reference filter</dt> <dd> <p translate> For business objects, the UI Designer comes with a <em>lazyRef</em> filter to easily retrieve target url to use in an external API data. </p> <p translate> E.g. Given a variable <em>employee</em> of type External API that fetch the task context <code>../{{context.employee_ref.link}}</code>. To retrive all the addresses of <em>employee</em> that are lazy in the BDM, you can create another variable <em>employee_addresses</em> of type External API with an url parameter like <code>employee | lazyRef : \'addresses\'</code> </p> </dd> </uib-tab> <uib-tab heading="{{ \'Localization\' | translate }}" index="\'localization\'"> <p translate>The UI Designer is displayed in the language of your Bonita Studio.</p> <p translate> In Subscription editions, to support multi-languages for end-users, it includes a mechanism to translate the UI artifacts (pages, forms, layouts) created. </p> <p translate> You can translate all the text displayed on a UI artifact: labels, placeholders, available values of a list. Even the Date format of the Date Picker widget can be localized.</p> <p translate> In the preview and at runtime, the displayed text will adapt automatically to the selected language. </p> <p translate>In production, if the user is logged into Bonita Portal, UI artifacts are displayed in the Portal language selected by the user or in the browser locale.</p> <p><translate>Each artifact contains a <em>localization.json</em> asset, with keys and translations for all strings and all supported languages (by default french and spanish). Each language has its section and is identified by the ISO 639 language attribute (for example, fr-FR, es-ES). To add new languages, keys and/or translations, export the default <em>localization.json</em>, edit it, and upload it with the same file name. For more information on installing new languages, go to the documentation web site (keywords:</translate> "add new language"). </p> <p translate> By convention, in <em>localization.json</em>, the language used for translation keys is English. This means that in the editor whiteboard, any widget default text is currently in English. However, to ease maintenance and update of the UI artifacts in English, you can change the keys into code names and add an <b>en-US</b> section in the <em>localization.json</em> asset file. </p> <p translate><em>Note about the</em> Date Picker <em>and</em> Date Time Picker <em>widgets:</em> the <em>Placeholder</em> property translations must match the <em>Technical format</em> property values (order and number of letters). However, the <em>Placeholder</em> key should be different from the <em>Technical format</em> key to avoid translations mismatches. </p> <p translate> <em><b>Example</b></em>: use the key <em>button.submit.name</em> on the <b>Label</b> property of a submit button. Use the key <em>date.format</em> on the <b>Date format</b> property and <em>date.placeholder</em> on the <b>Placeholder</b> property on a Date Picker widget. Then, change the <em>localization.json</em> asset to add the <em>button.submit.name</em>, <em>date.format</em> in English, <em>date.placeholder</em> translations. </p> <pre> {\n  "en-US": {\n    ...\n    "button.submit.name": "Submit",\n    "date.format": "MM/dd/yyyy",\n    "date.placeholder": "Enter a date (mm/dd/yyyy)",\n    ...\n  },\n  "fr-FR": {\n    ...\n    "button.submit.name": "Soumettre",\n    "date.format": "dd/MM/yyyy",\n    "date.placeholder": "Entrer une date (jj/mm/aaaa)",\n  "es-ES": {\n    ...\n  },\n    ...\n    "button.submit.name": "Enviar",\n    "date.format": "dd/MM/yyyy",\n    "date.placeholder": "Introducir una fecha (dd/mm/aaaa)",\n    ...\n  }\n}</pre> </uib-tab> <uid-responsive-help-tab></uid-responsive-help-tab> <uib-tab heading="{{ \'Migration\' | translate }}" index="\'migration\'"> <uid-migration-help-tab></uid-migration-help-tab> </uib-tab> </uib-tabset> </div> <div class=modal-footer> <button class="btn btn-link" ng-click=cancel() translate>Close</button> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/bond/constant.html","<ng-include src=propertyField.getFieldTemplate(property) include-replace></ng-include> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/bond/expression.html",'<div class="input-group input-group-sm" ng-class="{ \'linked\': propertyField.isExpression() }"> <ng-include src=propertyField.getFieldTemplate(property) include-replace ng-if=!propertyField.isExpression()></ng-include> <uid-property-typeahead ng-if=propertyField.isExpression() class=PropertyPanel-expression uid-property-typeahead-values=getDataNames() uid-property-typeahead-model=propertyValue.value placeholder="{{ \'expression or variable\' | translate }}"> </uid-property-typeahead> <span class=input-group-btn> <button class="btn btn-bonita-property" type=button ng-click=propertyField.toggleExpressionEditor()> <i ng-if=!propertyField.isExpression() class="ui-icon ui-expression" title="{{ \'Click to bind to an expression\' | translate }}"></i> <i ng-if=propertyField.isExpression() class="fa fa-times" title="{{ \'Click to bind to a constant\' | translate }}"></i> </button> </span> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/bond/interpolation.html","<div class=\"input-group input-group-sm\"> <ng-include src=propertyField.getFieldTemplate(property) include-replace></ng-include> <div class=input-group-addon title=\"{{ 'Text, optionally including variables in simple expressions for interpolation using [[ variableName ]]' | translate | mustachify:'[[':']]' }}\"><i class=\"fa fa-paragraph\"></i></div> </div> ")
}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/bond/variable.html",'<div class="input-group input-group-sm linked"> <uid-property-typeahead uid-property-typeahead-values=getDataNames() uid-property-typeahead-model=propertyValue.value> </uid-property-typeahead> <span class=input-group-btn title="{{ \'Variable in read-write binding with the property value\' | translate }}"> <button class="btn btn-bonita-property" type=button disabled><i class="fa fa-link"></i></button> </span> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/field/boolean.html","<div> <label class=radio-inline> <input ng-model=propertyValue.value type=radio ng-value=false> <span translate>no</span> </label> <label class=radio-inline> <input ng-model=propertyValue.value type=radio ng-value=true> <span translate>yes</span> </label> </div> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/field/choice-grouped.html",'<select ng-model=propertyValue.value ng-options="choiceValue.value as choiceValue.label | translate group by choiceValue.group | translate for choiceValue in property.choiceValues" class=form-control></select> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/field/choice.html",'<select ng-model=propertyValue.value ng-options="choiceValue as choiceValue | translate for choiceValue in property.choiceValues" class=form-control></select> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/field/collection.html","<input ng-model=propertyValue.value ng-list class=form-control> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/field/float.html","<input ng-model=propertyValue.value type=number class=form-control> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/field/html.html",'<textarea id="property-{{ property.label.toLowerCase() }}" ng-model=propertyValue.value class="form-control PropertyPanel-PropertyInput">\n</textarea> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/field/integer.html","<input min={{property.constraints.min}} max={{property.constraints.max}} ng-model=propertyValue.value type=number class=form-control> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/field/text.html",'<input id="property-{{ property.label.toLowerCase() }}" ng-model=propertyValue.value type=text class=form-control> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/help/bidirectional-bond-help.html","<translate> Use a bidirectional field to specify a read-write binding between the property value and a variable. </translate> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/help/constant-bond-help.html","<translate> A property that requires a constant value is presented in the Properties panel as a radio button set, drop-down list, or number selector (for the Width property). Select the required value. </translate> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/help/description-bond-help.html","<translate> A property value is constant, dynamic, a bidirectional bond, or an interpolation. </translate> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/help/dynamic-bond-help.html","<translate> Use a dynamic value field to specify a constant (the default) or an expression. Click the expression icon fx to switch from constant to expression. Click the constant icon X to switch from expression to constant. An expression can include a variable to make the property value dynamic, or can simply be the name of a variable. You can apply a filter to a variable value using a pipe. The binding to the variable is a read. If you want to write to the variable, use a bidirectional bond. Examples: </translate> <ul> <li translate>Define a condition for widget visibility, <em>userAge &gt; 18</em></li> <li translate>Define table headers as the value of a variable: <em>myArrayVariable</em></li> <li translate>Apply a filter to the value of a variable: <em>selectedUser | json</em></li> </ul> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/help/interpolation-bond-help.html","<translate> Use an interpolation field to enter text to display in the widget. The text can include variables that are interpreted using AngularJS interpolation. When the page is displayed, the variables are replaced by the interpolated values. Specify a variable as a simple expression enclosed in double braces, using the same format as for a dynamic value field. Example: I'm sorry, <em ng-non-bindable>{{ user.name | uppercase }}</em>. I'm afraid I can't do that. </translate> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/help/property-bond-help.html",'<p> <ng-include src="\'js/editor/properties-panel/help/description-bond-help.html\'"> </ng-include></p> <dl class=Guidance-definitionList> <dt translate>Constant</dt> <dd><ng-include src="\'js/editor/properties-panel/help/constant-bond-help.html\'"></ng-include></dd> <dt><translate>Dynamic value</translate> - <i class="ui-icon ui-expression"></i></dt> <dd> <ng-include src="\'js/editor/properties-panel/help/dynamic-bond-help.html\'"> </ng-include></dd> <dt><translate>Bidirectional bond</translate> - <i class="fa fa-link"></i></dt> <dd><ng-include src="\'js/editor/properties-panel/help/bidirectional-bond-help.html\'"></ng-include></dd> <dt><translate>Interpolation</translate> - <i class="fa fa-paragraph"></i></dt> <dd><ng-include src="\'js/editor/properties-panel/help/interpolation-bond-help.html\'"></ng-include></dd> </dl> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/whiteboard/switchComponent/not-supported-browser-popup.html",'<div class=modal-header> <button type=button class=close ng-click=$dismiss()><span aria-hidden=true>&times;</span></button> <h3 class=modal-title translate>Look what you\'re missing</h3> </div> <div class=modal-body> <img class=switch-widget-img src=img/switchWidgetFeature.jpg alt="Example of switch widget feature in available browser."> <p translate> This feature is not available on Internet Explorer 11 nor Microsoft Edge for the moment. </p> <p translate> To switch widget, use another browser: Google Chrome or Mozilla Firefox. </p> </div> <div class=modal-footer> <button class="btn btn-link EditAssetPopUp-dismissBtn" type=button ng-click=$dismiss()> <span class=u-fadeIn translate>Close</span> </button> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/whiteboard/switchComponent/switch-component-popup.html",'<div class=modal-header> <button type=button class=close ng-click=$dismiss()><span aria-hidden=true>&times;</span></button> <h3 class=modal-title translate>Switch {{ctrl.propertiesFrom.name}} {{ctrl.widgetFrom.$$widget.type}} </h3> </div> <div class=modal-body> <div class=select-widget-to> <div id=header-switch> <div id=select-from> <label for=widgetsFilterValue translate>Switch to</label> <div class=filter-input> <input id=widgetsFilterValue type=text list=widgetsDisplay ng-model=ctrl.selectedWidget class="form-control Search-input" placeholder="{{ \'Select a widget or start typing\' | translate}}" autocomplete=off autofocus> <button type=button ng-if=ctrl.isClearButtonVisible() tabindex=-1 ng-click=ctrl.clearValue() class=filter-clearButton title="{{ \'Clear\' | translate }}" aria-label="{{ \'Clear\' | translate }}"> <i aria-hidden=true class="fa fa-times"></i> </button> <datalist id=widgetsDisplay> <option ng-repeat="widget in ctrl.widgetsToDisplay" value={{widget.name}}></option> </datalist> </div> <button id=show-properties-btn type=button ng-click=ctrl.showProperties() ng-disabled=!ctrl.isBtnPropertiesEnabled() class="btn btn-primary show-properties-btn" title="{{ \'Show properties\' | translate }}" translate>Show properties </button> </div> <button id=reset-btn type=button ng-click=ctrl.reset() class="btn btn-link" title="{{ \'Reset mapping to default\' | translate }}" translate>Reset mapping </button> </div> </div> <br> <p translate> When possible, properties of the target widget are mapped with similar properties of the source widget. You can edit that and map more. </p> <div class=switch-config> <bo-switch-config id=switch-component-config dictionary={{ctrl.dictionary}} from="{{ ctrl.propertiesFrom }}" to="{{ ctrl.propertiesTo}}"></bo-switch-config> </div> </div> <div class=modal-footer> <button type=button class="btn btn-primary" ng-disabled=!ctrl.propertiesIsDisplay ng-click=ctrl.applyConfig() translate>Switch </button> <button class="btn btn-link EditAssetPopUp-dismissBtn" type=button ng-click=$dismiss()> <span class=u-fadeIn translate>Cancel</span> </button> </div> ')}])}(),function(){"use strict";angular.module("bonitasoft.designer",["bonitasoft.designer.route","bonitasoft.designer.preview","bonitasoft.designer.home","bonitasoft.designer.custom-widget","bonitasoft.designer.common.repositories","bonitasoft.designer.common.services","bonitasoft.designer.common.directives","bonitasoft.designer.common.filters","bonitasoft.designer.editor","bonitasoft.designer.templates","bonitasoft.designer.assets","ngSanitize","ui.router","ui.bootstrap","ui.ace","org.bonitasoft.dragAndDrop","gettext","ngUpload","ngCookies","ngAnimate","angularMoment","angularResizable"])}(),function(){"use strict";angular.module("bonitasoft.designer.assets",["bonitasoft.designer.common.directives","bonitasoft.designer.common.repositories","gettext","ui.bootstrap"])}(),function(){"use strict";angular.module("bonitasoft.designer.common.directives",["ngSanitize","bonitasoft.designer.common.services","bonitasoft.designer.templates","ui.ace","ui.router","gettext","ui.bootstrap"])}(),function(){"use strict";angular.module("bonitasoft.designer.common.filters",[])}(),function(){"use strict";angular.module("bonitasoft.designer.common.repositories",[])}(),function(){"use strict";angular.module("bonitasoft.designer.common.services",["gettext","dn.sha"])}(),function(){"use strict";angular.module("bonitasoft.designer.custom-widget",["bonitasoft.designer.editor.header.help","bonitasoft.designer.common.repositories","bonitasoft.designer.common.services","ui.bootstrap","gettext","ui.router"])}(),function(){"use strict";angular.module("bonitasoft.designer.editor",["bonitasoft.designer.editor.common","bonitasoft.designer.editor.palette","bonitasoft.designer.editor.properties-panel","bonitasoft.designer.editor.header","bonitasoft.designer.editor.whiteboard","bonitasoft.designer.editor.bottom-panel","bonitasoft.designer.assets","gettext"])}(),function(){"use strict";angular.module("bonitasoft.designer.editor.bottom-panel",["bonitasoft.designer.editor.bottom-panel.data-panel","bonitasoft.designer.templates","ui.router","gettext"])}(),function(){"use strict";angular.module("bonitasoft.designer.editor.bottom-panel.data-panel",["bonitasoft.designer.common.repositories","bonitasoft.designer.common.directives","gettext","ui.bootstrap"])}(),function(){"use strict";angular.module("bonitasoft.designer.editor.common",["gettext"])}(),function(){"use strict";angular.module("bonitasoft.designer.editor.header",["bonitasoft.designer.editor.header.help","bonitasoft.designer.common.services","bonitasoft.designer.common.repositories","gettext","ui.bootstrap","ui.router","ngStorage"])}(),function(){"use strict";angular.module("bonitasoft.designer.editor.header.help",["ui.bootstrap","ngStorage"])}(),function(){"use strict";angular.module("bonitasoft.designer.editor.palette",["bonitasoft.designer.templates","bonitasoft.designer.editor.common","gettext"])}(),function(){"use strict";angular.module("bonitasoft.designer.editor.properties-panel",["bonitasoft.designer.templates","bonitasoft.designer.editor.common","bonitasoft.designer.common.filters","gettext","ui.bootstrap"])}(),function(){"use strict";angular.module("bonitasoft.designer.editor.whiteboard",["bonitasoft.designer.templates","bonitasoft.designer.editor.common","bonitasoft.designer.common.services","gettext","RecursionHelper","ui.router"])}(),function(){"use strict";angular.module("bonitasoft.designer.home",["bonitasoft.designer.common.repositories","bonitasoft.designer.common.directives","bonitasoft.designer.home.import","bonitasoft.designer.templates","bonitasoft.designer.editor.header","bonitasoft.designer.editor.common","ui.bootstrap","ui.router","ui.validate","switcher","ngStorage"])}(),function(){"use strict";angular.module("bonitasoft.designer.home.import",["bonitasoft.designer.common.repositories","bonitasoft.designer.common.services","bonitasoft.designer.templates","gettext"])}(),function(){"use strict";angular.module("bonitasoft.designer.preview",["bonitasoft.designer.common.services","bonitasoft.designer.app-selector","bonitasoft.designer.common.repositories","ui.router","ngStorage"])}(),function(){"use strict";angular.module("bonitasoft.designer.app-selector",["bonitasoft.designer.templates","ngStorage","ui.bootstrap","gettext"])}(),function(){"use strict";function e(e,t,n,a,o){e.debugInfoEnabled(!1),t.cloneOnDrop(!1),t.activeBodyClassName(!0),n.setTriggers({"show-tooltip":"hide-tooltip"}),a.otherwise("/en/home"),angular.extend(o.options,{backdrop:"static",windowClass:"modal fade in"})}e.$inject=["$compileProvider","boDraggableItemProvider","$uibTooltipProvider","$urlRouterProvider","$uibModalProvider"],ace.config.set("basePath","js"),ace.config.set("modePath","js"),ace.config.set("themePath","js"),ace.config.set("workerPath","js");var t=window.navigator.userAgent.indexOf("MSIE 9")>-1;angular.module("uidesigner",["bonitasoft.designer"]).value("isIE9",t).config(e).run(["$rootScope","$uibModalStack",function(e,t){e.$on("$locationChangeStart",function(){return t.dismissAll()})}])}(),function(){"use strict";var e=function(){function e(t,n,a,o,i,r,s,l){var c=this;_classCallCheck(this,e),this.asset=t,this.component=n,this.$uibModalInstance=o,this.assetErrorManagement=r,this.assetRepo=i,this.aceMode=a,this.content=this.initialContent="",this.scope=s,this.assetRepo.loadLocalAssetContent(n.id,t).then(function(e){return c.content=c.initialContent=e.data}),l.bind(["ctrl+s","command+s"],function(){return s.$apply(function(){return c.save()}),!1})}return e.$inject=["asset","component","aceMode","$uibModalInstance","assetRepo","assetErrorManagement","$scope","keyBindingService"],e.prototype.save=function(){var e=this;return this.assetRepo.updateLocalAssetContent(this.component.id,this.asset,this.content).then(function(t){return e.assetErrorManagement.manageErrorsFromResponse(t)}).then(function(){return e.initialContent=e.content}).then(function(){return e.scope.$broadcast("saved")})},e.prototype.saveAndClose=function(){var e=this;this.save().then(function(){return e.$uibModalInstance.close()})},e.prototype.hasChanged=function(){return this.content!==this.initialContent},e}(),t=function(){function t(e,n){_classCallCheck(this,t),this.$uibModal=e,this.assetsService=n}return t.$inject=["$uibModal","assetsService"],t.prototype.open=function(t){var n=this,a=t.asset,o=t.component,i=t.assetRepo;return this.$uibModal.open({templateUrl:"js/assets/asset-edit-popup.html",controller:e,controllerAs:"vm",resolve:{asset:function(){return a},component:function(){return o},assetRepo:function(){return i},aceMode:function(){return n.assetsService.getType(a.type).aceMode}},size:"xxl"})},t}();angular.module("bonitasoft.designer.assets").controller("AssetEditPopupCtrl",e).service("assetEditPopup",t)}(),function(){"use strict";function e(e,t,n,a,o,i,r,s,l,c,d,p){function u(e,n){a.isExternal(e)&&(o.createAsset(l.id,a.formToAsset(e,p)).then(t.close),n.preventDefault())}function m(e){d.manageErrorsFromResponse(e).then(function(e){return t.close(e)},function(){return v.cancel()})}function f(e){v.assetSavingAction=b+e}function g(e){function t(e,t){return e.type===t.type&&t.name===e.name}function n(e,t){return!angular.isDefined(t.scope)||t.scope===e}return e&&(r||[]).filter(n.bind(null,s)).some(t.bind(null,e))}function h(e){var t={name:e.name,type:a.getType(e.type).value};return"img"===e.type?c.getString("An {{type}} asset named <em>{{ name }}</em> is already added to assets.",t):c.getString("A {{type}} asset named <em>{{ name }}</em> is already added to assets.",t)}var b="rest/"+s+"s/"+l.id+"/assets/",v=this;v.asset=i,v.isNewAsset=void 0===i,v.assetTypes=a.getAssetTypesByMode(s),v.assetSources=a.getSources(),v.templates=a.getFormTemplates(),v.newAsset=a.assetToForm(i),v.cancel=t.dismiss,v.isExternalAsset=a.isExternal,v.onComplete=m,v.saveExternalAsset=u,v.updateSavingAction=f,v.assetSavingAction=b+"css",v.isExisting=g,v.getWarningMessage=h,v.urlPattern=/^[\w#!:.?+=&%@\-\/]+$/,e.$watch(function(){return v.newAsset.external},function(e,t){return e!==t&&delete v.newAsset.name})}e.$inject=["$scope","$uibModalInstance","alerts","assetsService","assetRepo","asset","assets","mode","artifact","gettextCatalog","assetErrorManagement","scope"],angular.module("bonitasoft.designer.assets").controller("AssetPopupCtrl",e)}(),function(){angular.module("bonitasoft.designer.assets").controller("AssetPreviewPopupCtrl",["$scope","$uibModalInstance","asset","component","assetsService",function(e,t,n,a,o){"use strict";function i(){return o.getAssetUrl(n,a)+"?format=text"}e.url=i(),e.asset=n,e.cancel=function(){t.dismiss()}}])}(),function(){angular.module("bonitasoft.designer.assets").filter("assetType",["assetsService",function(e){"use strict";var t=e.getTypes();return function(e){return t.reduce(function(t,n){return n.key===e?n.value:t},"")}}])}(),function(){"use strict";function e(e,t,n,a,o,i,r,s){function l(t){return-1!==angular.lowercase(t.name||"").indexOf(angular.lowercase(e.searchTerm)||"")}function c(e){E[e]||(E[e]=[]),E[e].splice(0);var t=Array.concat(T.component.assets,r.getBaseFrameworkAsset()),n=t.filter(function(t){var n=T.scopeFilter[t.scope];return t.type===e&&n&&n.filter&&T.isAssetMatchSearchTerm(t)});return n.forEach(function(t){E[e].push(t)}),E[e]}function d(e){var t=Array.concat(T.component.assets,r.getBaseFrameworkAsset()),n=t.filter(function(t){return t.type===e});return n.length}function p(e){return T.assetAlreadyOnMove?void 0:a.incrementOrderAsset(T.component.id,e).then(m.bind(null,e))}function u(e){return T.assetAlreadyOnMove?void 0:a.decrementOrderAsset(T.component.id,e).then(m.bind(null,e))}function m(e){T.assetAlreadyOnMove=!0;var t=angular.copy(T.component.assets);return a.loadAssets(T.component).then(function(e){e.forEach(function(e){return g(t,e)}),T.component.assets=t}),"widget"===i?void(T.assetAlreadyOnMove=!1):void setTimeout(function(){return f(e)},50)}function f(e){var t=document.getElementById(e.id);t.classList.add("moving-asset"),setTimeout(function(){t.classList.remove("moving-asset"),T.assetAlreadyOnMove=!1},1e3)}function g(e,t){var n=e.findIndex(function(e){return e.id&&t.id?e.id===t.id:e.name===t.name});-1===n?e.push(t):e[n]=t}function h(e){return a.desactivateAsset(T.component.id,e).then(b)}function b(){var e=T.component.assets.filter(function(e){return!e.active}).map(function(e){return e.id||e.name});T.component.inactiveAssets=e.length?e:void 0}function v(e){o.deleteAsset(T.component.id,e).then(function(){T.component.assets=T.component.assets.filter(function(t){return t.id!==e.id})})}function y(e){t.open({templateUrl:"js/assets/asset-preview-popup.html",controller:"AssetPreviewPopupCtrl",resolve:{asset:function(){return e},component:function(){return T.component}},size:"lg"})}function w(e){r.isExternal(e)?x(e):C(e)}function C(e){s.open({asset:e,assetRepo:o,component:T.component})}function $(e){return r.getAssetUrl(e,T.component)}function x(e){var a=t.open({templateUrl:"js/assets/asset-popup.html",controller:"AssetPopupCtrl",controllerAs:"vm",resolve:{asset:function(){return e},assets:function(){return T.component.assets},mode:function(){return i},artifact:function(){return n},assetRepo:function(){return o},scope:function(){return i}}});a.result.then(k)}function k(e){var t=!1;e.scope=i,T.component.assets=T.component.assets.map(function(n){return n.id===e.id?(t=!0,e):n}),t||T.component.assets.push(e)}function A(e){t.open({templateUrl:"js/assets/help-popup.html",size:"lg",controller:["$scope",function(t){"ngInject";t.isPage="widget"!==e}]})}function S(e){return e.scope?"img"!==e.type&&e.scope&&e.scope===i:"img"!==e.type}function P(e){return!e.external&&!S(e)}var T=this,E=[];T.types=r.getFiltersTypes(),T.scopeFilter=r.getScopes(),T.getAssetsByTypeForCurrentScope=c,T.getNbrOfAssetsByType=d,T.isEditable=S,T.isExternal=r.isExternal,T.isPageAsset=r.isPageAsset,T.component=n,T.component.assets=T.component.assets||[],T.deactivateAsset=h,T.incrementOrderAsset=p,T.decrementOrderAsset=u,T.delete=v,T.openAssetPreviewPopup=y,T.getAssetUrl=$,T.openAssetPopup=x,T.openAssetEditPopup=w,T.openHelp=A,T.isViewable=P,T.assetAlreadyOnMove=!1,T.isAssetMatchSearchTerm=l}e.$inject=["$scope","$uibModal","artifact","artifactRepo","assetRepo","mode","assetsService","assetEditPopup"],angular.module("bonitasoft.designer.assets").controller("AssetCtrl",e)}(),function(){angular.module("bonitasoft.designer.assets").filter("assetFilter",function(){"use strict";return function(e,t){return e&&t?e.filter(function(e){var n=t[e.scope];return n&&n.filter}):e}})}(),function(){function e(){function e(e){function n(e){return e?{id:e.id,name:e.name,type:e.type,external:o(e),order:e.order,oldname:e.name,oldtype:e.type,scope:e.scope||""}:{type:t[0].key,external:!0}}function a(e,t){var n={id:e.id,type:e.type,order:e.order,scope:t};return e.external&&(n.name=e.name,n.external=!0),n}function o(e){return e.external}function i(e){return e&&"page"===e.scope}function r(e){return e&&"baseFramework"===e.scope}function s(){return t.map(function(e){return{key:e.key,value:{label:e.value,value:e.filter,orderable:e.orderable}}}).reduce(function(e,t){return e[t.key]=t.value,e},{})}function l(e){return"widget"===e?t.filter(function(e){return e.widget}):t}function c(){return t.map(function(e){return{key:e.key,value:e.template}}).reduce(function(e,t){return e[t.key]=t.value,e},{})}function d(e,t){t.assets=(e&&e.$$widget.assets||[]).map(function(t){return t.componentId=t.componentId||e.id,t.scope=t.scope||"widget",t}).filter(function(e){return p(e,t.assets)}).concat(t.assets)}function p(e,t){return!t.some(function(t){return t.name===e.name&&t.type===e.type&&t.componentId===e.componentId})}function u(e,t){t.assets=t.assets.filter(function(t){return t.componentId!==e.id})}function m(e,t){return"widget"===t.type?"rest/widgets/"+t.id+"/assets/"+e.type+"/"+e.name:"widget"===e.scope?"rest/widgets/"+e.componentId+"/assets/"+e.type+"/"+e.name:"rest/pages/"+t.id+"/assets/"+e.type+"/"+e.name}function f(e){return t.filter(function(t){return t.key===e})[0]}var g={external:{key:!0,value:e.getString("External")},local:{key:!1,value:e.getString("Local")}},h={page:{key:"page",value:"Page",filter:!0},widget:{key:"widget",value:"Widget",filter:!1},baseFramework:{key:"baseFramework",value:"Base Framework",filter:!1}},b=[{active:!0,external:!1,name:"angular-1.3.18.min.js",order:0,scope:"baseFramework",url:"http://www.bonitasoft.com/bos_redirect.php?bos_redirect_id=687&bos_redirect_product=bos&bos_redirect_major_version=7.9&bos_redirect_minor_version=",type:"js"},{active:!0,external:!1,name:"bootstrap-3.3.6.css",order:-2,scope:"baseFramework",url:"http://www.bonitasoft.com/bos_redirect.php?bos_redirect_id=688&bos_redirect_product=bos&bos_redirect_major_version=&bos_redirect_minor_version=",type:"css"},{active:!0,external:!0,name:"../theme/theme.css",order:-1,scope:"baseFramework",type:"css"}];return{isExternal:o,isPageAsset:i,getSources:function(){return g},getTypes:function(){return t},getScopes:function(){return h},getFiltersTypes:s,assetToForm:n,formToAsset:a,getAssetTypesByMode:l,getAssetUrl:m,getFormTemplates:c,getBaseFrameworkAsset:function(){return b},isBaseFramework:r,addWidgetAssetsToPage:d,removeAssetsFromPage:u,getType:f}}e.$inject=["gettextCatalog"];var t=[{key:"css",value:"CSS",filter:!0,widget:!0,template:"js/assets/generic-asset-form.html",aceMode:"css",orderable:!0},{key:"js",value:"JavaScript",filter:!0,widget:!0,template:"js/assets/generic-asset-form.html",aceMode:"javascript",orderable:!0},{key:"img",value:"Image",filter:!0,widget:!0,template:"js/assets/generic-asset-form.html",orderable:!1}];return{registerType:function(e){return t.push(e)},$get:e}}angular.module("bonitasoft.designer.assets").provider("assetsService",e)}(),function(){var e=function(){function e(t,n){_classCallCheck(this,e),this.alerts=t,this.$q=n}return e.$inject=["alerts","$q"],e.prototype.displayError=function(e){"MalformedJsonException"===e.type?this.alerts.addError({contentUrl:"js/assets/malformed-json-error-message.html",context:e},12e3):this.alerts.addError(e.message)},e.prototype.hasError=function(e){return e&&e.type&&e.message},e.prototype.manageErrorsFromResponse=function(e){return this.hasError(e)?(this.displayError(e),this.$q.reject(e)):this.$q.when(e)},e}();angular.module("bonitasoft.designer.assets").service("assetErrorManagement",e)}(),function(){function e(e,t,n){function a(e){window.open(e,"_blank")}function o(t,a){return 0===e.assets.length?n.getString("No {{label}} asset.",{label:a.label}):r.scopeFilter.page.filter&&!r.scopeFilter.widget.filter?n.getString("No {{label}} asset at page level.",{label:a.label}):!r.scopeFilter.page.filter&&r.scopeFilter.widget.filter?n.getString("No {{label}} asset at widget level.",{label:a.label}):r.scopeFilter.page.filter||r.scopeFilter.widget.filter?void 0:n.getString("No {{label}} asset (no scope selected).",{label:a.label})}function i(){var t=e.assets.length,a=e.assetsCount;return t===a?t:n.getString("{{currentLength}} of {{totalNumber}}",{currentLength:t,totalNumber:a})}var r=this;r.key=e.id,r.type=e.type,r.scopeFilter=e.scopeFilter,r.isBaseFramework=t.isBaseFramework,r.getEmptyAssetMessage=o,r.getAssetsCounterByTypeForCurrentScope=i,r.redirectTo=a,r.isExternal=t.isExternal,r.isPageAsset=t.isPageAsset}e.$inject=["$scope","assetsService","gettextCatalog"],angular.module("bonitasoft.designer.assets").controller("AssetSectionCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{id:"=",type:"=",searchTerm:"=",scopeFilter:"=",assets:"=",assetsCount:"=",onDelete:"&",deactivateAsset:"&",incrementOrderAsset:"&",decrementOrderAsset:"&",openAssetEditPopup:"&",openAssetPreviewPopup:"&",isEditable:"&",isViewable:"&",getAssetUrl:"&"},templateUrl:"js/assets/table/asset-section.html",controller:"AssetSectionCtrl",controllerAs:"vm"}}angular.module("bonitasoft.designer.assets").directive("assetSection",e)}(),angular.module("bonitasoft.designer.common.directives").directive("aceEditor",["aceDataCompleter",function(e){"use strict";var t=ace.require("ace/ext/language_tools");return{restrict:"E",replace:!0,scope:{mode:"@",autoCompletion:"@"},template:"<div ui-ace=\"{ mode: '{{mode}}', showGutter: true, onLoad: loaded }\"></div>",controller:["$scope","$parse","$attrs",function(n,a,o){var i=this;n.loaded=function(a){if(a){if(a.$blockScrolling=1/0,o.autoCompletion){var r=e(n.$eval(n.autoCompletion));t.setCompleters([r,t.keyWordCompleter]),a.setOptions({enableBasicAutocompletion:!0,enableLiveAutocompletion:!0})}i.editor=a,a.setShowPrintMargin(!1),a.commands.addCommand({name:"deleteAll",bindKey:{win:"Ctrl-Alt-Shift-D",mac:"Ctrl-Alt-Shift-D"},exec:function(e){e.setValue("")},readOnly:!1}),a.commands.bindKey("Ctrl-Alt-E",null)}},n.$on("$destroy",function(){i.editor.completer&&i.editor.completer.detach(),i.editor.destroy()})}]}}]),function(){function e(e,t){return function(n,a,o){n.$watch(function(e){return e.$eval(o.alertContent)},function(o){o.contentUrl&&(o.content=t.get(o.contentUrl)),a.html(o.content),e(a.contents())(angular.extend(n,o.context))})}}e.$inject=["$compile","$templateCache"],angular.module("bonitasoft.designer.common.directives").directive("alertContent",e)}(),angular.module("bonitasoft.designer.common.directives").directive("alerts",function(){"use strict";return{restrict:"E",controller:["$scope","alerts",function(e,t){e.alerts=t.alerts,e.remove=function(e){t.remove(e)}}],templateUrl:"js/common/directives/alerts.html"}}),function(){"use strict";function e(){return{scope:{},require:["^form","artifactNameValidation"],controller:n,controllerAs:"name",templateUrl:"js/common/directives/artifact-name-validation.html",replace:!0,link:function(e,t,n,a){var o=a[1];o.form=a[0],o.placement=n.artifactNameValidation||"top-left"}}}function t(){return{require:"artifactNameValidation",link:function(e,t,n,a){n.$observe("artifactNameValidationMessages",function(t){return angular.extend(a.validators,e.$eval(t))})}}}var n=function(){function e(t){_classCallCheck(this,e),this.maxlength=228,this.validators={pattern:t.getString("Name must contains only alphanumeric characters with no space"),maxlength:t.getString("Name must be less than {{maxlength}} characters long",this),alreadyExists:t.getString("This name already exists")}}return e.$inject=["gettextCatalog"],e.prototype.errorMessage=function(){var e=this;return this.form&&Object.keys(this.form.$error).reduce(function(t,n){return t||e.validators[n]||t},"")},e}();angular.module("bonitasoft.designer.common.directives").directive("artifactNameValidation",e).directive("artifactNameValidationMessages",t)}(),angular.module("bonitasoft.designer.common.directives").directive("autofocus",["$timeout",function(e){"use strict";return{restrict:"A",require:"?aceEditor",link:function(t,n,a,o){var i=n.get(0);a.autofocus&&t.$watch(a.autofocus,function(t,n){!n&&t&&e(function(){i.focus(),"text"===i.type&&i.value.length>0&&i.select()})}),a.autofocus||e(function(){o?o.editor.focus():(i.focus(),"text"===i.type&&i.value.length>0&&i.select())})}}}]),function(){"use strict";angular.module("bonitasoft.designer.common.directives").directive("compileTemplate",["$compile",function(e){return function(t,n,a){var o=t.$watch(function(e){return e.$eval(a.compileTemplate)
},function(a){n.html(a),e(n.contents())(t)});t.$on("$destroy",o)}}])}(),angular.module("bonitasoft.designer.common.directives").directive("confirmOnExit",["$rootScope","$stateParams","$state","$injector","$window","gettextCatalog",function(e,t,n,a,o,i){"use strict";var r=i.getString("You have unsaved changes. Do you really want to leave ?");return{scope:{confirmData:"="},link:function(t){function i(e,n){-1===n.name.indexOf(l)&&s.needSave(t.confirmData)&&!window.confirm(r)&&e.preventDefault()}if(n.current.resolve&&n.current.resolve.artifactRepo){var s=a.get(n.current.resolve.artifactRepo[0]),l=n.current.name;s.setLastSavedState(t.confirmData);var c=e.$on("$stateChangeStart",i);o.onbeforeunload=function(){return s.needSave(t.confirmData)?r:void 0},t.$on("$destroy",function(){o.onbeforeunload=void 0,c()})}}}}]),function(){"use strict";var e=function(){function e(t){_classCallCheck(this,e),this.restrict="E",this.templateUrl="js/common/directives/expand-modal.tpl.html",this.gettextCatalog=t}return e.prototype.compile=function(){var e=this;return function(t,n,a,o){return e.link(t,n,a,o)}},e.prototype.link=function(e,t){var n=this;e.expanded=!1,e.toggleExpand=function(){t.closest(".modal-dialog").toggleClass("modal-xxl"),e.expanded=!e.expanded},e.getTooltipMessage=function(){return n.gettextCatalog.getString(e.expanded?"Back to default size":"Go full screen")}},e}();angular.module("bonitasoft.designer.common.directives").directive("expandModal",["gettextCatalog",function(t){return new e(t)}])}(),angular.module("bonitasoft.designer.home").directive("fileDownload",["$document","$http",function(e,t){"use strict";e.find("body").append('<iframe class="ExportArtifact" src=""></iframe>');var n=e[0].querySelector(".ExportArtifact");return{restrict:"A",link:function(e,a,o){a.on("click",function(){t.get(o.href).success(function(){n.setAttribute("src",o.href)})}),e.$on("$destroy",function(){return a.off("click")})}}}]),function(){"use strict";function e(){return{require:"ngModel",link:function(e,t,n,a){function o(t){var n="";n=t.target.files&&t.target.files.length>0?t.target.files[0].name:t.target.value.match(/([^\\|\/]*)$/)[0],e.$apply(function(){a.$setViewValue(n),a.$render()})}t.on("change",o),e.$on("$destroy",function(){t.off("change",o)})}}}angular.module("bonitasoft.designer.common.directives").directive("fileInputChange",e)}(),function(){var e=function(){function e(){_classCallCheck(this,e),this.restrict="E",this.template='<img width={{ctrl.size}} height={{ctrl.size}} ng-src="data:image/png;base64,{{ctrl.data}}"/>',this.bindToController={name:"@",size:"@",backgroundColor:"=",foregroundColor:"="},this.scope=!0,this.controllerAs="ctrl"}return e.prototype.controller=["$scope","$sha","$window",function(e,t,n){"ngInject";var a=this;t.setConfig({algorithm:"SHA-1",inputType:"TEXT",returnType:"HEX"}),e.$watchGroup([function(){return a.name},function(){return a.size}],function(){a.data=new n.Identicon({hash:t.hash(a.name||""),size:Number(a.size)||40,bg:angular.isArray(a.backgroundColor)&&a.backgroundColor.length>1?a.backgroundColor:[64,72,83],fg:angular.isArray(a.foregroundColor)&&a.foregroundColor.length>1?a.foregroundColor:[255,255,255]}).toString()})}],e}();angular.module("bonitasoft.designer.common.directives").directive("identicon",function(){return new e})}(),angular.module("bonitasoft.designer.common.directives").directive("includeReplace",function(){return{require:"ngInclude",link:function(e,t){t.replaceWith(t.children())}}}),function(){var e=function(){function e(t,n){var a=this;_classCallCheck(this,e),this.$timeout=t,n.$on("saved",function(){return a.displaySaveIndicator()})}return e.$inject=["$timeout","$scope"],e.prototype.displaySaveIndicator=function(){var e=this;this.isVisible=!0,this.$timeout(function(){e.isVisible=!1},1e3)},e}();angular.module("bonitasoft.designer.common.directives").directive("saveIndicator",function(){return{controller:e,controllerAs:"indicator",templateUrl:"js/common/directives/save-indicator/save-indicator.html"}})}(),function(){"use strict";var e=function(){function e(){_classCallCheck(this,e)}return e.prototype.clearValue=function(){this.value=""},e.prototype.isClearButtonVisible=function(){return(this.value||"").trim().length>0},e}();angular.module("bonitasoft.designer.common.directives").directive("search",function(){return{scope:{value:"=",placeholder:"@"},bindToController:!0,controllerAs:"search",controller:e,templateUrl:"js/common/directives/search/search.html"}})}(),function(){"use strict";function e(e){var n=arguments.length<=1||void 0===arguments[1]?"[[":arguments[1],a=arguments.length<=2||void 0===arguments[2]?"]]":arguments[2];return e.replace(t(n),"{{").replace(t(a),"}}")}function t(e){function t(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}return new RegExp(t(e),"g")}angular.module("bonitasoft.designer.common.filters").filter("mustachify",function(){return e})}(),function(){"use strict";function e(e){var t=function(){function t(n){_classCallCheck(this,t),this.baseUrl=n,this.$http=e}return t.prototype.createAsset=function(e,t){return this.$http.post(this.baseUrl+"/"+e+"/assets",t).then(function(e){return e.data})},t.prototype.deleteAsset=function(e,t){return this.$http.delete(this.baseUrl+"/"+e+"/assets/"+t.id)},t.prototype.updateLocalAssetContent=function(e,t,n){var a=new Blob([n],{type:"text/plain"}),o=new FormData;return o.append("file",a,t.name),this.$http({url:this.baseUrl+"/"+e+"/assets/"+t.type,method:"POST",transformRequest:angular.identity,data:o,headers:{"Content-Type":void 0}}).then(function(e){return e.data})},t.prototype.loadLocalAssetContent=function(e,t){return this.$http({url:this.baseUrl+"/"+e+"/assets/"+t.type+"/"+t.name+"?format=text",method:"GET",transformResponse:angular.identity})},t}();return t}e.$inject=["$http"],angular.module("bonitasoft.designer.common.repositories").service("AssetRepository",e)}(),function(){"use strict";function e(e){function t(t){return e.post("import/"+t+"/force").then(function(e){return e.data})}function n(t){return e.post("import/"+t+"/cancel").then(function(e){return e.data})}return{forceImport:t,cancelImport:n}}e.$inject=["$http"],angular.module("bonitasoft.designer.common.repositories").service("importRepo",e)}(),function(){"use strict";function e(e,t){var n=function(e){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,e.call(this,"page","rest/pages"))}return _inherits(n,e),n.prototype.save=function(n){return n.hasValidationError=t.containsModalInContainer(n),e.prototype.save.call(this,n)},n.prototype.rename=function(e,t){return this.$http.put(this.baseUrl+"/"+e+"/name",t)},n.prototype.desactivateAsset=function(e,t){var n=t.id||t.name;return this.$http.put(this.baseUrl+"/"+e+"/assets/"+n+"?active="+t.active,t)},n.prototype.loadAssets=function(e){return this.$http.get(this.baseUrl+"/"+e.id+"/assets").then(function(e){return e.data})},n.prototype.loadResources=function(e){return this.$http.get(this.baseUrl+"/"+e.id+"/resources").then(function(e){return e.data})},n}(e);return new n}e.$inject=["Repository","componentUtils"],angular.module("bonitasoft.designer.common.repositories").factory("pageRepo",e).factory("formRepo",e).factory("layoutRepo",e)}(),function(){"use strict";function e(e){return{get:function(t){return e.get(t+"Repo")}}}e.$inject=["$injector"],angular.module("bonitasoft.designer.common.repositories").factory("repositories",e)}(),function(){"use strict";function e(e,t){var n=function(){function n(t,a){_classCallCheck(this,n),this.type=t,this.baseUrl=a,this.lastSavedState=angular.toJson({}),this.$http=e}return n.prototype.save=function(e){var t=this;return this.$http.put(this.baseUrl+"/"+e.id,e).success(function(){return t.setLastSavedState(e)})},n.prototype.setLastSavedState=function(e){this.lastSavedState=angular.toJson(e)},n.prototype.needSave=function(e){return e&&void 0!==e.hasValidationError&&(e.hasValidationError=t.containsModalInContainer(e)),angular.toJson(e)!==this.lastSavedState},n.prototype.delete=function(e){return this.$http.delete(this.baseUrl+"/"+e)},n.prototype.create=function(e,t){return this.$http.post(this.baseUrl+(t?"?duplicata="+t:""),e).then(function(e){return e.data})},n.prototype.load=function(e){return this.$http.get(this.baseUrl+"/"+e)},n.prototype.all=function(){return this.$http.get(this.baseUrl).then(function(e){return e.data})},n.prototype.exportUrl=function(e){return"export/"+this.type+"/"+e.id},n.prototype.markAsFavorite=function(e){return this.$http.put(this.baseUrl+"/"+e+"/favorite",!0)},n.prototype.unmarkAsFavorite=function(e){return this.$http.put(this.baseUrl+"/"+e+"/favorite",!1)},n.prototype.incrementOrderAsset=function(e,t){return this.$http.put(this.baseUrl+"/"+e+"/assets/"+t.id+"?increment=true",t)},n.prototype.decrementOrderAsset=function(e,t){return this.$http.put(this.baseUrl+"/"+e+"/assets/"+t.id+"?decrement=true",t)},n}();return n}e.$inject=["$http","componentUtils"],angular.module("bonitasoft.designer.common.repositories").factory("Repository",e)}(),function(){"use strict";function e(e){var t=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,e.call(this,"widget","rest/widgets"))}return _inherits(t,e),t.prototype.customs=function(){return this.$http.get(this.baseUrl+"?view=light").then(function(e){return e.data.filter(function(e){return e.custom})}).then(function(e){return e.map(function(e){return e.icon=!0,e.type="widget",e})})},t.prototype.loadAssets=function(e){return this.load(e.id).then(function(e){return e.data.assets})},t.prototype.addProperty=function(e,t){return this.$http.post(this.baseUrl+"/"+e+"/properties",t)},t.prototype.updateProperty=function(e,t,n){return this.$http.put(this.baseUrl+"/"+e+"/properties/"+t,n)},t.prototype.deleteProperty=function(e,t){return this.$http.delete(this.baseUrl+"/"+e+"/properties/"+t)},t.prototype.getHelp=function(e){return this.$http.get(this.baseUrl+"/"+e+"/help")},t}(e);return new t}e.$inject=["Repository"],angular.module("bonitasoft.designer.common.repositories").factory("widgetRepo",e)}(),angular.module("bonitasoft.designer.common.services").service("aceDataCompleter",["gettext",function(e){return function(t){return{getCompletions:function(n,a,o,i,r){function s(e){return"$data."+e}function l(e,t){return 0===t.indexOf(e)}var c=Object.keys(t).map(s).filter(l.bind(null,i)).map(function(e){return{name:e,value:e,score:10,meta:"data"}});c.push({caption:"uiTranslate()",snippet:"uiTranslate($0)",score:9,meta:"function",docHTML:e("Translate the given text")}),r(null,c)}}}}]),function(){"use strict";function e(e,t){function n(t,n){r.push(t),e(function(){a(0)},n||s,1)}function a(e){r.splice(e,1)}function o(e,t){return"string"==typeof e?{type:t,content:e}:(e.type=t,e)}function i(e,t,a){var i=o(t,e);n(i,a)}var r=[],s=8e3;return{alerts:r,remove:a,addError:i.bind(null,t("error")),addSuccess:i.bind(null,t("success")),addWarning:i.bind(null,t("warning")),addInfo:i.bind(null,t("info"))}}e.$inject=["$interval","gettext"],angular.module("bonitasoft.designer.common.services").factory("alerts",e)}(),angular.module("bonitasoft.designer.common.services").factory("arrays",function(){"use strict";function e(e,t,n){var a=t.indexOf(e),o=0!==a?a-1:0;n&&(o=-1!==a?a+1:1),(a||1!==t.length)&&(t.length>1&&t.splice(a,1),t.splice(o,0,e))}function t(t,n){e(t,n,!1)}function n(t,n){e(t,n,!0)}function a(e,t,n){var a=n.indexOf(e);n.splice(a,1),n.splice(t,0,e)}function o(e,t){return t.indexOf(e)>0}function i(e,t){return t.indexOf(e)<t.length-1}function r(e,t,n){var a=t.length;if(a>0)for(var o=a-1;o>=0;o--)n?n(t[o],e)&&t.splice(o,1):t[o]===e&&t.splice(o,1);return t}function s(e,t){var n=t.indexOf(e);return n>-1&&t.splice(n,1),t}function l(e,t,n){t>=0?n.splice(t,0,e):n.push(e)}return{moveLeft:t,moveRight:n,moveAtPosition:a,moveLeftPossible:o,moveRightPossible:i,remove:r,removeFirst:s,insertAtPosition:l}}),angular.module("bonitasoft.designer.common.services").factory("clock",function(){"use strict";return{now:Date.now}}),angular.module("bonitasoft.designer.common.services").factory("errorInterceptor",["$q","alerts",function(e,t){"use strict";var n=["?preview=true"];return{responseError:function(a){return a.headers("Content-Type")&&0===a.headers("Content-Type").indexOf("application/json")&&angular.isDefined(a.data.message)?t.addError(a.data.message):n.some(function(e){return a.config.url.indexOf(e)<0})&&t.addError("Unexpected server error"),e.reject(a)}}}]).config(["$httpProvider",function(e){e.interceptors.push("errorInterceptor")}]),function(){var e=function(){function e(t){_classCallCheck(this,e),this.$window=t}return e.prototype.back=function(e){e&&1===this.$window.history.length?e():this.$window.history.back()},e}();angular.module("bonitasoft.designer.common.services").factory("browserHistoryService",["$window",function(t){return new e(t)}])}(),function(){"use strict";angular.module("bonitasoft.designer.common.services").service("keyBindingService",["$window",function(e){return e.Mousetrap}])}(),function(){"use strict";function e(){function e(e){p=e}function t(e){c=l(e),d=c}function n(e){u=e||u}function a(){return angular.copy(u)}function o(){return c}function i(){return p}function r(){return d}function s(e){return d=l(e)}function l(e){return p.filter(function(t){return t.key===e}).pop()||c}var c={key:"xs",icon:"laptop",width:"100%"},d=c,p=[c],u={xs:12};return{registerResolutions:e,setDefaultResolution:t,setDefaultDimension:n,all:i,get:l,selected:r,select:s,getDefaultResolution:o,getDefaultDimension:a}}angular.module("bonitasoft.designer.common.services").service("resolutions",e)}(),function(){"use strict";angular.module("bonitasoft.designer.common.services").service("utils",function(){this.clamp=function(e,t,n){return e>t?e:t>n?n:t}})}(),function(){"use strict";function e(e,t,n,a,o,i,r,s,l,c,d,p){e.widget=t,e.bonds=d,e.widget.custom||a.addInfo(s.getString("To edit this standard widget, save it first as a new custom widget"),5e3);var u=n;r.bindGlobal(["ctrl+s","command+s"],function(){return e.$apply(function(){e.save()}),!1}),e.isTypeSelectable=function(e){return"variable"!==e&&"interpolation"!==e},e.back=function(){return p.back(function(){return c.go("designer.home")})},e.updateParam=function(t,n){u.updateProperty(e.widget.id,t,n).then(function(t){e.widget.properties=t.data})},e.addParam=function(t){u.addProperty(e.widget.id,t).then(function(t){e.widget.properties=t.data})},e.deleteParam=function(t){u.deleteProperty(e.widget.id,t.name).then(function(t){e.widget.properties=t.data})},e.save=function(){u.save(e.widget).then(function(){return e.dirty=!1}).then(function(){return e.$broadcast("saved")})},e.saveAndExport=function(){u.save(e.widget).then(function(){i.location=u.exportUrl(e.widget)})},e.saveAs=function(e){function t(e){l.id=e.id,c.go(c.current,l,{reload:!0})}function n(t){return u.create(t,e.id)}var a=o.open({templateUrl:"js/custom-widget/save-as-popup.html",controller:"saveWidgetAsPopUpCtrl",controllerAs:"ctrl",resolve:{widget:function(){return e}}});a.result.then(n).then(t)},e.pristine=!0,e.dirty=!1,e.isPageDirty=function(t){var n=u.needSave(t);return e.pristine=e.pristine&&!n,e.dirty=e.dirty||n,n},e.createOrUpdate=function(t){var n=o.open({templateUrl:"js/custom-widget/create-property.html",controller:"PropertyEditorPopupCtrl",resolve:{param:function(){return t}}});n.result.then(function(t){t.paramToUpdate?e.updateParam(t.paramToUpdate.name,t.param):e.addParam(t.param)})},e.openHelp=function(e){o.open({templateUrl:"js/custom-widget/help-popup.html",size:"lg",resolve:{helpSection:function(){return e}},controller:["$scope","$uibModalInstance","helpSection",function(e,t,n){n&&(e.tabContainer={activeTab:n}),e.cancel=function(){t.dismiss("cancel")}}]})},e.$on("$destroy",function(){r.unbind(["ctrl+s","command+s"])})}e.$inject=["$scope","artifact","artifactRepo","alerts","$uibModal","$window","keyBindingService","gettextCatalog","$stateParams","$state","BONDS","browserHistoryService"],angular.module("bonitasoft.designer.custom-widget").controller("CustomWidgetEditorCtrl",e)}(),angular.module("bonitasoft.designer.custom-widget").value("BONDS",{variable:{type:"text",name:"Bidirectional bond",template:"js/editor/properties-panel/help/bidirectional-bond-help.html"},expression:{name:"Dynamic value",template:"js/editor/properties-panel/help/dynamic-bond-help.html"},interpolation:{type:"text",name:"Interpolation",template:"js/editor/properties-panel/help/interpolation-bond-help.html"},constant:{name:"Constant",template:"js/editor/properties-panel/help/constant-bond-help.html"}}).controller("PropertyEditorPopupCtrl",["$scope","param","$uibModalInstance","BONDS",function(e,t,n,a){"use strict";e.paramToUpdate=t,e.types=["text","choice","html","integer","boolean","collection"],e.bonds=a,e.isTypeChoicable=function(){return"choice"===e.currentParam.type&&("constant"===e.currentParam.bond||"expression"===e.currentParam.bond)},e.isTypeSelectable=function(){return"constant"===e.currentParam.bond||"expression"===e.currentParam.bond},e.currentParam=e.paramToUpdate?angular.copy(t):{type:"text",bond:e.paramToUpdate&&e.paramToUpdate.bond||"expression"},e.updateBond=function(t){t&&e.bonds[t]&&e.bonds[t].type&&(e.currentParam.type=e.bonds[t].type),e.currentParam.bond=t},e.ok=function(){"variable"===e.selectedBond&&(e.currentParam.defaultValue=null),n.close({param:e.currentParam,paramToUpdate:e.paramToUpdate})},e.cancel=function(){n.dismiss("cancel")}}]),function(){"use strict";var e=void 0,t=function(){function t(n,a){_classCallCheck(this,t),this.widget=a,this.newName=a.name.replace(/\s/g,""),e=n}return t.$inject=["$uibModalInstance","widget"],t.prototype.ok=function(){var t=angular.copy(this.widget);t.name=this.newName,e.close(t)},t}();angular.module("bonitasoft.designer.custom-widget").controller("saveWidgetAsPopUpCtrl",t)}(),function(){"use strict";var e=function(){function e(t,n){_classCallCheck(this,e),this.isBottomPanelClosed=!1,this.tabs=[n.create({name:t("Variables"),stateName:"designer."+this.mode,bottomPanel:this})],"page"===this.mode&&this.tabs.push(n.create({name:t("Assets"),stateName:"designer.page.asset",bottomPanel:this}))}return e.$inject=["gettext","tabFactory"],e.prototype.isClosed=function(){return this.isBottomPanelClosed},e.prototype.open=function(){this.isBottomPanelClosed=!1},e.prototype.close=function(){this.isBottomPanelClosed=!0},e}();angular.module("bonitasoft.designer.editor.bottom-panel").directive("bottomPanel",function(){return{restrict:"E",scope:{},bindToController:{mode:"@"},templateUrl:"js/editor/bottom-panel/bottom-panel.html",controller:e,controllerAs:"bottomPanel"}})}(),angular.module("bonitasoft.designer.editor.bottom-panel.data-panel").factory("apiExamples",["gettextCatalog",function(e){function t(e){var t;return(t=[]).concat.apply(t,_toConsumableArray(e))}var n={"System API":[{description:e.getString("Get current logged user"),url:"../API/system/session/1",more:e.getString("User id could then be obtained by using {{myData.user_id}}")}],"BPM API":[{description:e.getString("Get a human task by its identifier"),url:"../API/bpm/humanTask/<strong>{{taskId}}</strong>",more:e.getString("Case identifier could then be retrieved by {{myData.rootCaseId}}")},{description:e.getString("List of human task in ready state for current user (pending + assigned)"),url:"../API/bpm/humanTask?c=10&p=0&f=state=ready&f=user_id=<strong>{{userId}}</strong>&f=caseId=<strong>{{caseId}}</strong>"},{description:e.getString("List of cases open for a process definition id"),url:"../API/bpm/case?p=0&c=10&f=processDefinitionId=<strong>{{myProcessDefinitionId}}</strong>"},{description:e.getString("All process data of a case: Search for a list of case variables"),url:"../API/bpm/caseVariable?p=0&c=10&f=case_id=<strong>{{caseId}}</strong>"},{description:e.getString("Search a list of cases based on search indexes"),url:"../API/bpm/case?p=0&c=10&s=<strong>{{searchIndexValueSearched}}</strong>"},{description:e.getString("Get a case by its identifier"),url:"../API/bpm/case/<strong>{{caseId}}</strong>"},{description:e.getString("Get all business variables defined in a case"),url:"../API/bpm/case/<strong>{{caseId}}</strong>/context",alternative:{before:e.getString("In a process form, if you have defined business variables in your process, use the link to the variable to retrieve using the context variable:"),url:"../<strong>{{context.businessVariableName_ref.link}}</strong>",more:e.getString("Where businessVariableName is the name of the business variable defined at pool level.")}}],"Identity API":[{description:e.getString("Get professional details of a user"),url:"../API/identity/user/<strong>{{userId}}</strong>?d=professional_data"}],"Customuserinfo API":[{description:e.getString("Get custom information of a user"),url:"../API/customuserinfo/user?p=0&c=10&f=userId=<strong>{{userId}}</strong>"}],"BDM API":[{description:e.getString("Call a business data (custom) query"),url:"../API/bdm/businessData/<strong>{{businessDataType}}</strong>?q=<strong>{{queryName}}</strong>&p=0&c=10&f=<strong>{{filter}}</strong>",more:e.getString('Where businessDataType = com.company.model.MyData, queryName = name of the BDM query, filter = "myParam=myValue"')}]},a=function(){return t(Object.keys(n).map(function(e){return n[e].map(function(t){return t.category=e,t})}))};return{get:a}}]),angular.module("bonitasoft.designer.editor.bottom-panel.data-panel").controller("DataPopupController",["$scope","dataTypeService","$uibModalInstance","mode","pageData","data","apiExamples",function(e,t,n,a,o,i,r){"use strict";e.apiExamples=r.get(),e.example=e.apiExamples[0],e.examplesCollapsed=!0,e.advancedExamplesCollapsed=!0,e.dataTypes=t.getDataTypes(),e.getLabel=t.getDataLabel,e.pageData=o,e.isNewData=void 0===i,e.newData=i||t.createData(),e.exposableData="page"!==a,e.isDataNameUnique=function(e){return!e||!o[e]},e.updateValue=function(n){e.newData.value=t.getDataDefaultValue(n)},e.save=function(e){n.close(e)},e.cancel=function(){n.dismiss()}}]),angular.module("bonitasoft.designer.editor.bottom-panel.data-panel").service("dataTypeService",["gettext",function(e){function t(e,t){return e===t.type}function n(e,t){return t.label}function a(e,t){return t.defaultValue}var o=[{label:e("String"),type:"constant",group:" ",defaultValue:""},{label:e("JSON"),type:"json",group:" ",defaultValue:"{}"},{label:e("External API"),type:"url",group:"--",defaultValue:""},{label:e("Javascript expression"),type:"expression",group:"--",defaultValue:'return "hello";'},{label:e("URL parameter"),type:"urlparameter",group:"--",defaultValue:""}];this.getDataTypes=function(){return o},this.getDataLabel=function(e){return o.filter(t.bind(null,e)).reduce(n,void 0)},this.getDataDefaultValue=function(e){return o.filter(t.bind(null,e)).reduce(a,void 0)},this.createData=function(){return{type:"constant",exposed:!1}}}]),angular.module("bonitasoft.designer.editor.bottom-panel.data-panel").controller("DataCtrl",["$scope","dataTypeService","$location","$uibModal","artifact","mode","gettextCatalog",function(e,t,n,a,o,i,r){"use strict";e.searchedData="",e.page=o,e.getLabel=t.getDataLabel,e.exposableData="page"!==i,e.delete=function(t){return delete e.page.data[t]},e.save=function(t){e.page.data[t.$$name]={exposed:t.exposed,type:t.type,value:e.isExposed(t)?"":t.value}},e.getType=function(t){return e.isExposed(t)?"("+r.getString("Exposed")+")":e.getLabel(t.type)},e.isExposed=function(t){return e.exposableData&&t.exposed},e.openDataPopup=function(t){var n=a.open({templateUrl:"js/editor/bottom-panel/data-panel/data-popup.html",controller:"DataPopupController",resolve:{mode:function(){return i},pageData:function(){return o.data},data:function(){return t&&angular.extend({},o.data[t],{$$name:t})}}});n.result.then(e.save)},e.openHelp=function(){return a.open({templateUrl:"js/editor/bottom-panel/data-panel/help-popup.html",size:"lg"})},e.getVariables=function(t){function n(e){function n(e,t){return-1!==angular.lowercase(e||"").indexOf(angular.lowercase(t)||"")}return n(e.name,t)||n(e.value,t)}return Object.keys(e.page.data).map(function(t){var n=e.page.data[t];return Object.defineProperty(n,"name",{enumerable:!1,value:t})}).filter(n)},e.sort=function(t){e.isReversedSorting=e.sortCriteria===t?!e.isReversedSorting:!1,e.sortCriteria=t},e.sort("name")}]),angular.module("bonitasoft.designer.editor.bottom-panel.data-panel").directive("validJson",function(){"use strict";return{require:"ngModel",link:function(e,t,n,a){a.$validators.validJson=function(e,t){if(a.$isEmpty(e))return!0;try{var n=angular.fromJson(t);return angular.isObject(n)||angular.isArray(n)}catch(o){return!1}}}}}),function(){"use strict";var e=function(){function e(t){var n=t.$state,a=t.name,o=t.stateName,i=t.bottomPanel;_classCallCheck(this,e),this.$state=n,this.name=a,this.stateName=o,this.bottomPanel=i}return e.prototype.isActive=function(){return this.$state.current.name===this.stateName&&!this.bottomPanel.isClosed()},e.prototype.activate=function(){this.bottomPanel.isClosed()?this.bottomPanel.open():this.isActive()&&this.bottomPanel.close(),this.$state.go(this.stateName,void 0,{location:!1})},e}();angular.module("bonitasoft.designer.editor.bottom-panel").service("tabFactory",["$state",function(t){return{create:function(n){var a=n.name,o=n.stateName,i=n.bottomPanel;return new e({$state:t,name:a,stateName:o,bottomPanel:i})}}}])}(),angular.module("bonitasoft.designer.editor.common").factory("artifactNamingValidatorService",function(){"use strict";function e(e,t,n){return e&&(n||[]).filter(function(e){return e.type===t}).some(function(t){return t.name.toLowerCase()===e.toLowerCase()})}return{isArtifactNameAlreadyUseForType:e}}),function(){"use strict";function e(){function e(e){o=e.reduce(function(e,t){return e[t.component.id]=t,e},o)}function t(e,t){if(!o.hasOwnProperty(e.id))throw new Error("Component "+e.id+" has not been registered");var n=o[e.id].init;n(e,t)}function n(){o={}}function a(){return o}var o={};return{reset:n,register:e,init:t,get:a}}angular.module("bonitasoft.designer.editor.common").factory("components",e)}(),function(){"use strict";function e(e){function t(e){return(e||[]).reduce(function(e,t){return e[t.name]=n(t),e},{})}function n(e){return{type:"expression"===e.bond?"constant":e.bond,value:e.defaultValue}}function a(e){return e.properties=s.concat(e.properties||[]),e}function o(e){return e.properties=r.concat(e.properties||[]),e}function i(e){return"expression"===e.type||"variable"===e.type}var r=[{label:e("CSS classes"),caption:e("Space-separated list"),name:"cssClasses",type:"string",defaultValue:"",bond:"expression",help:e("Any accessible CSS classes. By default UI Designer comes with Bootstrap http://getbootstrap.com/css/#helper-classes")}],s=[r[0],{label:e("Hidden"),name:e("hidden"),type:"boolean",defaultValue:!1,bond:"expression"}];return{computeValues:t,computeValue:n,addCommonPropertiesTo:a,addCssPropertyTo:o,isBound:i}}e.$inject=["gettext"],angular.module("bonitasoft.designer.editor.common").factory("properties",e)}(),function(){"use strict";angular.module("bonitasoft.designer.editor").run(["whiteboardService","editorService",function(e,t){e.registerOnWidgetAddFunction(t.addWidgetAssetsToPage),e.registerOnWidgetRemoveFunction(t.removeAssetsFromPage)}])}(),angular.module("bonitasoft.designer.editor").controller("EditorCtrl",["$scope","$state","$stateParams","$window","artifactRepo","resolutions","artifact","mode","arrays","componentUtils","keyBindingService","$uibModal","utils","whiteboardService","$timeout","widgetRepo","editorService","gettextCatalog",function(e,t,n,a,o,i,r,s,l,c,d,p,u,m,f,g,h,b){"use strict";function v(t){var n=c.getVisibleComponents(e.page),a=n.indexOf(e.currentComponent)+t;a=u.clamp(0,a,n.length-1),e.$apply(function(){e.selectComponent(n[a])})}function y(e,t){var n=e.rows;if(n.length>1){var a=n.indexOf(t);n.splice(a,1),m.triggerRowRemoved(t)}}function w(){var e=navigator.userAgent;return e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1||e.indexOf("Edge/")>-1}function C(t,n){var a=JSON.parse(n.mapping),o=t.$$parentContainerRow.row,i=o.findIndex(function(e){return e.$$hashKey===t.$$hashKey});g.load(a.id).then(function(r){var s=r.data;e.removeCurrentComponent(t,o);var c=h.createWidgetWrapper(s),d=c.create(t.$$parentContainerRow);Object.keys(d.propertyValues).forEach(function(e){d.propertyValues[e]=a.options[e]}),d.dimension=n.dimension,l.insertAtPosition(d,i,o),e.selectComponent(d),d.triggerAdded()})}function $(e,t){f(function(){y(e,t)},0)}function x(){e.isPropertyPanelClosed=!e.isPropertyPanelClosed}a.name="editor",e.mode=s||"page",f(function(){e.page=r,o.setLastSavedState(e.page)},0),e.resolution=function(){return i.selected()},d.bind("del",function(){e.currentComponent&&e.$apply(function(){e.removeCurrentComponent()})}),d.bind("right",function(){v(1)}),d.bind("left",function(){v(-1)}),e.$on("$destroy",function(){d.unbind(["del","right","left"])}),e.componentClasses=c.getResolutionClasses,e.selectRow=function(t,n,a){e.currentComponent=null,e.currentContainerRow={row:n,container:t},a&&a.stopPropagation()},e.dropElement=function(t){e.currentComponent=t,t.$$parentContainerRow=e.currentContainerRow,e.currentContainerRow.row.push(t),c.column.computeSizeItemInRow(e.currentContainerRow.row)},e.moveAtPosition=function(t,n){l.moveAtPosition(n,t,e.currentContainerRow.row),e.selectComponent(n)},e.selectComponent=function(t,n){e.currentContainerRow=null,e.currentComponent=t,n&&n.stopPropagation()},e.deselectComponent=function(){e.currentContainerRow=null,e.currentComponent=null,event&&event.stopPropagation()},e.addComponent=function(t,n){var a=t.create(e.currentContainerRow);l.insertAtPosition(a,n,e.currentContainerRow.row),c.column.computeSizeItemInRow(e.currentContainerRow.row),e.selectComponent(a),a.triggerAdded()},e.removeCurrentRow=function(){y(e.currentContainerRow.container,e.currentContainerRow.row),e.currentContainerRow=null},e.removeCurrentComponent=function(t,n){var a=e.currentComponent||t,o=a.$$parentContainerRow.row,i=o.indexOf(a);o.splice(i,1),0===o.length&&n!==o&&$(a.$$parentContainerRow.container,o),n||a.triggerRemoved(),e.currentComponent=null},e.switchCurrentComponent=function(t){if(w())return void p.open({templateUrl:"js/editor/whiteboard/switchComponent/not-supported-browser-popup.html",size:"small",backdrop:"true"});b.getString("Target");var n=e.currentComponent||t,a=p.open({templateUrl:"js/editor/whiteboard/switchComponent/switch-component-popup.html",controller:"SwitchComponentPopupController",controllerAs:"ctrl",size:"lg",resolve:{widgets:g.all().then(function(e){return e}),widgetFrom:angular.copy(n),dictionary:b.strings}});a.result.then(C.bind(null,n))},e.isCurrentRow=function(t){return!!e.currentContainerRow&&e.currentContainerRow.row===t},e.isCurrentComponent=function(t){return!!e.currentComponent&&e.currentComponent===t},e.rowSize=function(e){var t=0;return angular.forEach(e,function(e){t+=c.column.width(e)}),t},e.saveAndEditCustomWidget=function(n){o.save(e.page).then(function(){t.go("designer.widget",{id:n})})},e.save=function(){return o.save(e.page)},e.canBeSaved=function(e){return!!e.name},e.appendComponent=function(t,n){if(!n.$$widget){c.isEmpty(e.page)||e.page.rows.push([]);var a=e.page.rows[e.page.rows.length-1];e.addComponentToRow(n,e.page,a,0)}},e.addComponentToRow=function(t,n,a,o){e.editor.selectRow(n,a),e.addComponent(t,o)},e.resizePaletteHandler=function(t){e.isPaletteClosed=t},e.isPropertyPanelClosed=!1,e.editor={addComponentToRow:e.addComponentToRow,selectRow:e.selectRow,selectComponent:e.selectComponent,deselectComponent:e.deselectComponent,dropElement:e.dropElement,componentClasses:e.componentClasses,removeCurrentRow:e.removeCurrentRow,removeCurrentComponent:e.removeCurrentComponent,switchCurrentComponent:e.switchCurrentComponent,rowSize:e.rowSize,isCurrentRow:e.isCurrentRow,isCurrentComponent:e.isCurrentComponent,moveAtPosition:e.moveAtPosition,changeComponentWidth:e.changeComponentWidth,getComponentWidth:e.getComponentWidth,page:e.page,togglePropertyPanel:x},e.widgetHelpPopover={content:"",isOpen:!1};var k=e.$watch("currentComponent.$$widget",function(){e.widgetHelpPopover.isOpen=!1
});e.$on("$destroy",k),e.widgetHelpTemplateURL="js/editor/properties-panel/widgetHelpTemplate.html",e.triggerWidgetHelp=function(){e.widgetHelpPopover.isOpen?e.widgetHelpPopover.isOpen=!1:(e.widgetHelpPopover.isOpen=!0,g.getHelp(e.currentComponent.$$widget.id).then(function(t){e.widgetHelpPopover.content=t.data}))}}]),function(){"use strict";function e(e,t,n,a,o,i,r,s,l,c){function d(e,t){k[e]=t}function p(n,o){return t.all().then(u).then(function(){var t=Object.keys(k).reduce(function(e,t){return e.concat(k[t](o))},[]);return e.all(t)}).then(function(){return n.load(o)}).catch(function(t){return r.addError(t.message),e.reject(t)}).then(function(e){return l.reset(),x=e.data,a.wrapPage(x),x})}function u(e){function t(e,t){return"widget"===t.type&&t.custom===e}var a=e.filter(t.bind(null,!1)).map(f.bind(null,s("widgets"),1)),o=e.filter(t.bind(null,!0)).map(f.bind(null,s("custom widgets"),2)),i=e.filter(function(e){return"container"===e.type}).map(g);n.reset(),n.register(i),n.register(a),n.register(o)}function m(e){var t=i.addCommonPropertiesTo(e);return{component:t,create:h.bind(null,t)}}function f(e,t,n){var o=i.addCommonPropertiesTo(n);return{component:o,sectionName:e,sectionOrder:t,init:a.wrapWidget.bind(null,o),create:h.bind(null,o)}}function g(e){var t,n={pbContainer:{init:a.wrapContainer,create:b},pbTabsContainer:{init:a.wrapTabsContainer,create:v},pbFormContainer:{init:a.wrapFormContainer,create:y},pbModalContainer:{init:a.wrapModalContainer,create:w}};return t="pbModalContainer"===e.id?i.addCssPropertyTo(e):i.addCommonPropertiesTo(e),{component:t,sectionName:s("widgets"),sectionOrder:1,init:n[t.id].init.bind(null,t),create:n[t.id].create.bind(null,t)}}function h(e,t){var n=o.createWidgetElement(e);return a.wrapWidget(e,n,t)}function b(e,t){var n=o.createContainerElement(e);return a.wrapContainer(e,n,t)}function v(e,t){var n=o.createTabsContainerElement(e);return a.wrapTabsContainer(e,n,t)}function y(e,t){var n=o.createFormContainerElement(e);return a.wrapFormContainer(e,n,t)}function w(e,t){var n=o.createModalContainerElement(e);return a.wrapModalContainer(e,n,t)}function C(e){c.addWidgetAssetsToPage(e,x)}function $(e){l.contains(e)||c.removeAssetsFromPage(e,x)}var x,k={};return{addPalette:d,initialize:p,addWidgetAssetsToPage:C,removeAssetsFromPage:$,createWidgetWrapper:m}}e.$inject=["$q","widgetRepo","components","whiteboardComponentWrapper","pageElementFactory","properties","alerts","gettext","whiteboardService","assetsService"],angular.module("bonitasoft.designer.editor").service("editorService",e)}(),function(){"use strict";var e=function(){function e(t,n,a){"ngInject";_classCallCheck(this,e),this.$uibModalInstance=t,this.page=n,this.types={page:{key:"page",value:a("Application page")},form:{key:"form",value:a("Process form")}},this.types[n.type]&&(this.type=this.types[n.type])}return e.$inject=["$uibModalInstance","page","gettext"],e.prototype.save=function(){this.type&&(this.page.type=this.type.key),this.$uibModalInstance.close()},e}();angular.module("bonitasoft.designer.editor.header").controller("ConvertPopUpController",e)}(),function(){"use strict";var e=function(){function e(t,n,a){"ngInject";_classCallCheck(this,e),this.$uibModalInstance=t,this.$localStorage=n,this.page=a,this.doNotShowAgain=!1}return e.$inject=["$uibModalInstance","$localStorage","page"],e.prototype.ok=function(){this.$localStorage.bonitaUIDesigner||(this.$localStorage.bonitaUIDesigner={}),this.$localStorage.bonitaUIDesigner.doNotShowExportMessageAgain=this.doNotShowAgain,this.$uibModalInstance.close()},e}();angular.module("bonitasoft.designer.editor.header").controller("ExportPopUpController",e)}(),function(){"use strict";var e=function(){function e(t,n,a,o,i,r,s,l,c,d,p,u,m,f,g){"ngInject";var h=this;_classCallCheck(this,e),this.mode=t,this.page=n,this.artifactRepo=a,this.$uibModal=o,this.$stateParams=i,this.$state=r,this.$window=s,this.$localStorage=l,this.$timeout=u,this.$q=m,this.browserHistoryService=c,this.pristine=!0,this.dirty=!1,this.scope=p,this.artifactNamingValidatorService=g,this.artifacts=[],f.load().then(function(e){return h.artifacts=e.filter(function(e){return e.type===h.page.type})}),d.bindGlobal(["ctrl+s","command+s"],function(){return p.$apply(function(){return h.save(h.page)}),!1}),p.$on("$destroy",function(){d.unbind(["ctrl+s","command+s"])})}return e.$inject=["mode","artifact","artifactRepo","$uibModal","$stateParams","$state","$window","$localStorage","browserHistoryService","keyBindingService","$scope","$timeout","$q","artifactStore","artifactNamingValidatorService"],e.prototype.back=function(){var e=this;this.browserHistoryService.back(function(){return e.$state.go("designer.home")})},e.prototype.isPageDirty=function(e){var t=this.artifactRepo.needSave(e);return this.pristine=this.pristine&&!t,this.dirty=this.dirty||t,t},e.prototype.save=function(e){var t=this;if(!this.isPageDirty(e)){var n=this.$q.defer();return n.resolve(),n.promise}return this.artifactRepo.save(e).then(function(e){t.dirty=!1;var n=e.headers("location");return n?n.substring(n.lastIndexOf("/")+1):void t.scope.$broadcast("saved")}).then(function(n){return n?(t.$stateParams.id=n,t.$state.go("designer."+e.type,t.$stateParams,{location:"replace",reload:!0}),n):void 0})},e.prototype.saveAs=function(e){var t=this,n=this.$uibModal.open({templateUrl:"js/editor/header/save-as-popup.html",controller:"SaveAsPopUpController",controllerAs:"ctrl",resolve:{page:function(){return e}}});n.result.then(function(e){return t.removeReferences(e)}).then(function(n){return t.artifactRepo.create(n,e.id)}).then(function(e){return t.$stateParams.id=e.id}).then(function(){return t.$state.go("designer."+e.type,t.$stateParams,{reload:!0})})},e.prototype.convert=function(e){var t=this,n=this.$uibModal.open({templateUrl:"js/editor/header/convert-popup.html",controller:"ConvertPopUpController",controllerAs:"ctrl",resolve:{page:function(){return e}}});n.result.then(function(){t.save(e)})},e.prototype.removeReferences=function(e){var t=this;return angular.isArray(e)?e.forEach(function(e){return t.removeReferences(e)}):angular.isObject(e)&&(delete e.reference,angular.forEach(e,function(e,n){return!n.match(/^\$/)&&t.removeReferences(e)})),e},e.prototype.achieveSaveAndExport=function(e){var t=this;this.save(e).then(function(n){var a=function(e){return t.$window.location=t.artifactRepo.exportUrl(e)};n?(e.id=n,t.$timeout(function(){return a(e)},500)):a(e)})},e.prototype.saveAndExport=function(e){var t=this,n=this.$localStorage.bonitaUIDesigner;if(n&&n.doNotShowExportMessageAgain)this.achieveSaveAndExport(e);else{var a=this.$uibModal.open({templateUrl:"js/editor/header/export-popup.html",controller:"ExportPopUpController",controllerAs:"ctrl",resolve:{page:function(){return e}}});a.result.then(function(){t.achieveSaveAndExport(e)})}},e.prototype.editMetadata=function(e){var t=this,n=this.artifactRepo.loadResources(e),a=this.$uibModal.open({templateUrl:"js/editor/header/metadata-popup.html",controller:"MetadataPopUpController",controllerAs:"ctrl",resolve:{page:function(){return e},resources:function(){return n}}});a.result.then(function(){t.save(e)})},e.prototype.isArtifactNameAlreadyExist=function(e,t){return e!==t.id?this.artifactNamingValidatorService.isArtifactNameAlreadyUseForType(e,t.type,this.artifacts):!1},e}();angular.module("bonitasoft.designer.editor.header").controller("EditorHeaderCtrl",e)}(),function(){"use strict";angular.module("bonitasoft.designer.editor.header.help").directive("uidMigrationHelpTab",["$localStorage",function(e){return{restrict:"E",replace:!0,templateUrl:"js/editor/header/help/help-migration.html",link:function(t){e.bonitaUIDesigner||(e.bonitaUIDesigner={});var n=e.bonitaUIDesigner.doNotShowMigrationNotesAgain;t.showMessage=n?!n:!0}}}])}(),function(){"use strict";angular.module("bonitasoft.designer.editor.header.help").directive("openHelp",["$uibModal",function(e){return{restrict:"A",scope:{helpSection:"@openHelp",editorMode:"@"},link:function(t,n){function a(){e.open({templateUrl:"js/editor/header/help/help-popup.html",size:"lg",resolve:{pageEdition:function(){return"page"===t.editorMode},helpSection:function(){return t.helpSection}},controller:["$scope","$uibModalInstance","pageEdition","helpSection",function(e,t,n,a){"ngInject";e.pageEdition=n,a&&(e.tabContainer={activeTab:a}),e.cancel=function(){t.dismiss("cancel")}}]})}n.on("click",a)}}}])}(),function(){"use strict";var e=function(){function e(t,n,a){"ngInject";_classCallCheck(this,e),this.$uibModalInstance=t,this.page=n,this.displayName=n.displayName,this.description=n.description,this.resources=a}return e.$inject=["$uibModalInstance","page","resources"],e.prototype.save=function(e){e.$invalid||(this.page.displayName=this.displayName,this.page.description=this.description,this.$uibModalInstance.close())},e}();angular.module("bonitasoft.designer.editor.header").controller("MetadataPopUpController",e)}(),function(){"use strict";var e=function(){function e(t,n,a){_classCallCheck(this,e),this.$uibModalInstance=t,this.page=n,this.newName=n.name,this.types={page:{key:"page",value:a("Application page"),tooltip:a("Linked to an application descriptor.")},form:{key:"form",value:a("Process form"),tooltip:a("Linked to a process instantiation or a task, using the contract")}},this.types[n.type]&&(this.type=this.types[n.type])}return e.$inject=["$uibModalInstance","page","gettext"],e.prototype.ok=function(){var e=angular.copy(this.page);e.name=this.newName,this.type&&(e.type=this.type.key),this.$uibModalInstance.close(e)},e}();angular.module("bonitasoft.designer.editor.header").controller("SaveAsPopUpController",e)}(),function(){"use strict";function e(){return{restrict:"A",scope:{onResize:"&"},controller:"EditorPaletteCtrl",controllerAs:"palette",templateUrl:"js/editor/palette/editor-palette.html"}}function t(e,t){function n(e){c.currentSection=c.currentSection===e?void 0:e,o()}function a(e){return c.currentSection&&c.currentSection.name===e.name}function o(){e.onResize({isClosed:i()})}function i(){return void 0===c.currentSection}function r(){return"fragment"===e.$parent.mode}function s(e){return"ui-"+e.name.replace(/ /g,"")}function l(){c.sections=t.getSections(),c.sections.forEach(function(e){a(e)&&(c.currentSection=e)}),o()}var c=this;this.sections=t.getSections(),this.currentSection=this.sections[0],this.toggleSection=n,this.isActiveSection=a,this.isClosed=i,this.getIconClassName=s,this.isFragment=r,this.updateSections=l,o(),e.$on("fragmentCreated",function(){l()})}t.$inject=["$scope","paletteService"],angular.module("bonitasoft.designer.editor.palette").controller("EditorPaletteCtrl",t).directive("editorPalette",e)}(),angular.module("bonitasoft.designer.editor.palette").filter("filterByComponentName",function(){return function(e,t){return t?e.filter(function(e){return e.component.name.toLowerCase().indexOf(t.toLowerCase())>=0}):e}}),function(){"use strict";function e(){return{restrict:"EA",scope:{isFragment:"=isFragment",widget:"="},templateUrl:"js/editor/palette/palette-widget.html",link:function(e){e.$watch("widget.component.icon",function(t){var n='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 20"></svg>';e.iconData="data:image/svg+xml,"+encodeURIComponent(t||n)})}}}angular.module("bonitasoft.designer.editor.palette").directive("paletteWidget",e)}(),function(){"use strict";function e(e){function t(){var t=e.get(),n=Object.keys(t).reduce(function(e,n){var a=t[n].sectionName;return e[a]=e[a]||{name:a,order:t[n].sectionOrder,widgets:[]},e[a].widgets=e[a].widgets.concat(t[n]),e},{});return Object.keys(n).map(function(e){return n[e]})}return{getSections:t}}e.$inject=["components"],angular.module("bonitasoft.designer.editor.palette").service("paletteService",e)}(),angular.module("bonitasoft.designer.editor.properties-panel").controller("PropertyFieldDirectiveCtrl",["$scope","properties",function(e,t){"use strict";e.propertyValue=e.propertyValue||t.computeValue(e.property),e.isDisplayed=function(){return e.property.showFor?e.$eval(e.property.showFor):!0},e.getDataNames=function(){return Object.keys(e.pageData||{})};var n={};this.toggleExpressionEditor=function(){n.constant=n.constant||e.property.defaultValue,n[e.propertyValue.type]=e.propertyValue.value,e.propertyValue.type="expression"===e.propertyValue.type?"constant":"expression",e.propertyValue.value=n[e.propertyValue.type],e.focusInput()},this.isExpression=function(){return"expression"===e.propertyValue.type};var a=["boolean","choice","collection","float","html","integer"];this.getFieldTemplate=function(e){var t=a.indexOf(e.type)>=0?e.type:"text";return"choice"===t&&angular.isObject(e.choiceValues[0])&&(t="choice-grouped"),"js/editor/properties-panel/field/"+t+".html"},this.getBondTemplate=function(e){return"js/editor/properties-panel/bond/"+e.bond+".html"}}]),angular.module("bonitasoft.designer.editor.properties-panel").directive("propertyField",["$timeout",function(e){"use strict";return{restrict:"E",scope:{property:"=",propertyValue:"=",properties:"=",pageData:"="},templateUrl:"js/editor/properties-panel/property-field.html",controller:"PropertyFieldDirectiveCtrl",controllerAs:"propertyField",link:function(t,n){t.focusInput=function(){e(function(){var e=n.find("input"),t=e.val();e.focus().val("").val(t)},0)}}}}]),function(){var e=function(){function e(t){_classCallCheck(this,e),this.prefix="",this.$filter=t,this.model=this.model||""}return e.$inject=["$filter"],e.prototype.getValues=function(e){var t=e;return e.startsWith("!")?(this.prefix=e.charAt(0),t=e.substr(1)):this.prefix="",this.$filter("filter")(this.values,t)},e.prototype.onSelectedCallback=function(e,t,n){this.model=this.prefix+n},e}();angular.module("bonitasoft.designer.editor.properties-panel").directive("uidPropertyTypeahead",["$parse",function(t){return{scope:{},replace:!0,templateUrl:"js/editor/properties-panel/property-typeahead.html",controller:e,controllerAs:"vm",bindToController:{model:"=uidPropertyTypeaheadModel"},link:function(e,n,a,o){var i=t(a.uidPropertyTypeaheadValues),r=e.$parent.$watchCollection(i,function(e){o.values=e});e.$on("$destroy",r)}}}])}(),function(){"use strict";angular.module("bonitasoft.designer.editor.whiteboard").directive("componentHighlighter",function(){return{restrict:"A",link:function(e,t,n){function a(e){for(var t=e.target;t.parentNode;){if(/\w-element/.test(t.className)){if(i===t)return;return i&&(i.className=i.className.replace(r,"").trim()),t.className+=" "+r,void(i=t)}t=t.parentNode}}function o(){i&&(i.className=i.className.replace(r,""),i=null)}var i,r=n.componentHighlighter,s=angular.element(t[0].querySelector(".widget-wrapper"));t.on("mouseover",a),s.on("mouseleave",o)}}})}(),function(){"use strict";function e(){function e(e){return t.hasOwnProperty(e)?t[e]+=1:t[e]=0,e+"-"+t[e]}var t={};return{getNextId:e}}angular.module("bonitasoft.designer.editor.whiteboard").service("componentId",e)}(),angular.module("bonitasoft.designer.editor.whiteboard").controller("ComponentMoverDirectiveCtrl",["$scope","arrays",function(e,t){function n(){return e.component&&e.component.hasOwnProperty("$$parentContainerRow")}var a=function(){return e.component.$$parentContainerRow.row};e.moveLeftVisible=function(){return n()&&t.moveLeftPossible(e.component,a())},e.moveRightVisible=function(){return n()&&t.moveRightPossible(e.component,a())},e.moveLeft=function(){t.moveLeft(e.component,a())},e.moveRight=function(){t.moveRight(e.component,a())}}]),angular.module("bonitasoft.designer.editor.whiteboard").directive("componentMover",function(){"use strict";return{restrict:"E",replace:!0,scope:{component:"=",onDelete:"&",onSwitch:"&"},templateUrl:"js/editor/whiteboard/component-mover.html",controller:"ComponentMoverDirectiveCtrl"}}),angular.module("bonitasoft.designer.editor.whiteboard").factory("componentScopeBuilder",["dataFilter",function(e){"use strict";var t=function(t){var n=t.$new(!0);return n.environment={},n.environment.editor={pageId:t.editor&&t.editor.page&&t.editor.page.id},n.environment.component=t.component.$$widget,n.properties={},angular.forEach(t.component.propertyValues,function(a,o){t.$watch('component.propertyValues["'+o+'"].value',function(){var a=t.component.$$widget.properties.filter(function(e){return e.name===o}).map(function(e){return e.type}).pop()||"text";n.properties[o]=e(t.component.propertyValues[o],a)})}),n.range=function(e){return new Array(e)},n};return{build:t}}]),function(){"use strict";function e(e){function t(e){return[h.column.className(e)]}function n(e){return e.container&&e.container.rows||[]}function a(e,t){return e.concat(t)}function o(e){return/container/i.test(e.type)}function i(e){var t=e.rows||e.$$openedTab&&e.$$openedTab.container.rows;return t.reduce(a,[]).reduce(function(e,t){return e=e.concat(t),o(t)?e.concat(i(t)):e},[])}function r(e,t){if(t.$$id===e||t.container&&t.container.$$id===e)return!0;var o=t.rows||t.container&&t.container.rows||(t.tabs||[]).map(n).reduce(a,[]);return 0===o.length?!1:o.reduce(a,[]).some(function(t){return r(e,t)})}function s(e,t){var n=h.isChildOf(t.$$id,e);return n&&"component"!==e.type?!1:!(t.$$id===e.$$id||t===e)}function l(e){if(c(e))return!0;var t=e.rows||e.container&&e.container.rows||e.$$widget&&e.$$widget.rows||(e.tabs||[]).map(n).reduce(a,[]);return 0===t.length?!1:t.reduce(a,[]).some(function(e){return l(e)})}function c(e){return"modalContainer"===e.type&&("fragment"===e.$$parentContainerRow.container.type||"container"===e.$$parentContainerRow.container.type)}function d(t){for(var n,a=e.all(),o=a.indexOf(e.selected()),i=o;i>=0;i--)if(n=a[i].key,t.dimension[n])return t.dimension[n];return 12}function p(e){return"col-xs-"+d(e)}function u(t){var n=e.all().indexOf(e.getDefaultResolution()),a=e.all().slice(n).map(function(e){return e.key}),o=Math.floor(12/t.length),i=12%t.length;a.forEach(function(e){var n=t.slice(0,-1).reduce(function(t,n){return t+n.dimension[e]},0),a=t[t.length-1];return 12>n?void(a.dimension[e]=12-n):(t.forEach(function(t){t.dimension[e]=o}),void(0!==i&&t.slice(-i).forEach(function(t){t.dimension[e]+=1})))})}function m(t){return t?t.dimension[e.selected().key]:1}function f(t,n){t.dimension[e.selected().key]=n}function g(e){return!(e.rows||[]).some(function(e){return e.length>0})}var h={isEmpty:g,isChildOf:r,isMovable:s,getVisibleComponents:i,isContainer:o,getResolutionClasses:t,containsModalInContainer:l,isModalInContainer:c,column:{width:d,className:p,computeSizeItemInRow:u},width:{get:m,set:f}};return h}e.$inject=["resolutions"],angular.module("bonitasoft.designer.editor.whiteboard").service("componentUtils",e)}(),angular.module("bonitasoft.designer.editor.whiteboard").directive("component",["$compile","componentScopeBuilder",function(e,t){"use strict";return{restrict:"E",scope:{component:"=",editor:"=",componentIndex:"=",container:"=",row:"="},link:function(n,a){var o=t.build(n);if(n.component.$$widget){var i=angular.element(a.get(0).querySelector(".widget-content")),r=e(n.component.$$widget.template)(o);i.append(r)}},templateUrl:"js/editor/whiteboard/component.html"}}]),angular.module("bonitasoft.designer.editor.whiteboard").controller("ContainerDirectiveCtrl",["$scope","$rootScope","arrays","componentUtils",function(e,t,n,a){"use strict";e.resizable=!0,e.moveRowUp=function(t,a){n.moveLeft(t,e.container.rows),a.stopPropagation()},e.moveRowDown=function(t,a){n.moveRight(t,e.container.rows),a.stopPropagation()},e.moveRowUpVisible=function(t){return n.moveLeftPossible(t,e.container.rows)},e.moveRowDownVisible=function(t){return n.moveRightPossible(t,e.container.rows)},e.dropItem=function(t,n){a.isMovable(t,e.component||e.container)&&(e.editor.selectRow(e.container,n),e.editor.removeCurrentComponent(t,n))},e.removeRow=function(t){e.editor.selectRow(e.container,t),e.editor.removeCurrentRow()},e.dropAtEndOfTheRow=function(t,n,o){if(o=o||[],t.$$widget){if(!a.isMovable(t,e.component||e.container))return;return e.editor.selectRow(e.container,o),void e.editor.dropElement(t)}e.editor.addComponentToRow(t,e.container,o)},e.dropBeforeRow=function(t,n,o,i){var r=e.component||e.container;(r.id||a.isMovable(t,r))&&i.splice(o,0,[]),e.dropAtEndOfTheRow(t,n,i[o])},e.dropAfterRow=function(t,n,o,i){var r=e.component||e.container;(r.id||a.isMovable(t,r))&&(o+=1,i.splice(o,0,[])),e.dropAtEndOfTheRow(t,n,i[o])},e.isEmpty=function(e){return a.isEmpty(e)},e.isRepeated=function(e){return e&&e.propertyValues&&e.propertyValues.repeatedCollection&&e.propertyValues.repeatedCollection.value},e.containsModalInContainer=function(e){return e&&a.containsModalInContainer(e)},e.isModalInContainer=function(e){return e&&a.isModalInContainer(e)}}]),angular.module("bonitasoft.designer.editor.whiteboard").directive("container",["RecursionHelper",function(e){"use strict";return{restrict:"E",scope:{id:"@",container:"=",editor:"=",component:"="},templateUrl:"js/editor/whiteboard/container.html",controller:"ContainerDirectiveCtrl",compile:function(t){return e.compile(t,function(){})}}}]),function(){"use strict";function e(e){return function(t,n){if(t&&t.value){if(e.isBound(t)){var a="data:"+t.value;return"collection"===n?[a]:a}return t.value}return""}}e.$inject=["properties"],angular.module("bonitasoft.designer.editor.whiteboard").filter("data",e)}(),angular.module("bonitasoft.designer.editor.whiteboard").directive("dropZone",["componentUtils",function(e){"use strict";return{template:'<div class="dropZone" bo-dropzone bo-drop-success="dropBefore($data)"></div><div class="dropZone dropZone--right" bo-dropzone bo-drop-success="dropAfter($data)"></div>',link:function(t){function n(e,n){var o=-1===t.row.indexOf(e),i=t.componentIndex;if(!a(e)){if(i||n||i++,o)t.editor.selectRow(t.container,e.$$parentContainerRow.row),t.editor.removeCurrentComponent(e),t.editor.selectRow(t.container,t.row),t.editor.dropElement(e),t.componentIndex&&!n&&i++;else{var r=t.row.length,s=t.row.indexOf(e);if(s===t.componentIndex)return;if(n&&0===s&&t.componentIndex!==r-1)return;if(s+1===t.componentIndex&&n)return;if(s-1===t.componentIndex&&!n)return;t.editor.selectRow(t.container,t.row),n&&t.componentIndex===r-1&&i--}t.editor.moveAtPosition(i,e)}}function a(n){return!e.isMovable(n,t.component)}function o(e,n){n="undefined"==typeof n?t.componentIndex:n,t.editor.addComponentToRow(e,t.container,t.row,n)}t.dropBefore=function(e){return e.$$widget?n(e,!0):void o(e)},t.dropAfter=function(e){return e.$$widget?n(e):void o(e,t.componentIndex+1)}}}}]),angular.module("bonitasoft.designer.editor.whiteboard").directive("formContainer",function(){"use strict";return{restrict:"E",scope:{id:"@",formContainer:"=",editor:"="},templateUrl:"js/editor/whiteboard/form-container.html"}}),angular.module("bonitasoft.designer.editor.whiteboard").directive("modalContainer",["RecursionHelper",function(e){"use strict";return{restrict:"E",scope:{id:"@",modalContainer:"=",editor:"="},templateUrl:"js/editor/whiteboard/modal-container.html",compile:function(t){return e.compile(t,function(){})}}}]),function(){"use strict";function e(e,t){function n(n,a){return{id:a.id,type:n,dimension:e.getDefaultDimension(),propertyValues:t.computeValues(a.properties)}}function a(e){return n(o(e),e)}function o(e){return e.type&&"widget"!==e.type?e.type:"component"}function i(e){var t=n("container",e);return angular.extend(t,{rows:[[]]})}function r(e){var t=n("tabsContainer",e);return angular.extend(t,{tabs:["Tab 1","Tab 2"].map(s)})}function s(e){return{title:e,container:{id:"pbContainer",type:"container",rows:[[]]}}}function l(e){var t=n("formContainer",e);return angular.extend(t,{container:{id:"pbContainer",type:"container",rows:[[]]}})}function c(e){var t=n("modalContainer",e);return angular.extend(t,{container:{id:"pbContainer",type:"container",rows:[[]]}})}return{createWidgetElement:a,createContainerElement:i,createTabsContainerElement:r,createModalContainerElement:c,createFormContainerElement:l,createTabElement:s}}e.$inject=["resolutions","properties"],angular.module("bonitasoft.designer.editor.whiteboard").service("pageElementFactory",e)}();var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){"use strict";function e(e,t){return e(t={exports:{}},t.exports),t.exports}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,t){return e?e.type:"expression"===t.bond?"constant":t.bond}var a=e(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),o=e(function(e){var t=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=t)}),i=(o.version,function(e){return"object"==("undefined"==typeof e?"undefined":_typeof(e))?null!==e:"function"==typeof e}),r=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e},s=function(e){try{return!!e()}catch(e){return!0}},l=!s(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),c=a.document,d=i(c)&&i(c.createElement),p=function(e){return d?c.createElement(e):{}},u=!l&&!s(function(){return 7!=Object.defineProperty(p("div"),"a",{get:function(){return 7}}).a}),m=Object.defineProperty,f={f:l?Object.defineProperty:function(e,t,n){if(r(e),t=function(e){if(!i(e))return e;var t,n;if("function"==typeof(t=e.toString)&&!i(n=t.call(e)))return n;if("function"==typeof(t=e.valueOf)&&!i(n=t.call(e)))return n;throw TypeError("Can't convert object to primitive value")}(t),r(n),u)try{return m(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},g=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},h=l?function(e,t,n){return f.f(e,t,g(1,n))}:function(e,t,n){return e[t]=n,e},b={}.hasOwnProperty,v=function(e,t){return b.call(e,t)},y=0,w=Math.random(),C=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++y+w).toString(36))},$=e(function(e){var t=a["__core-js_shared__"]||(a["__core-js_shared__"]={});(e.exports=function(e,n){return t[e]||(t[e]=void 0!==n?n:{})})("versions",[]).push({version:o.version,mode:"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})}),x=$("native-function-to-string",Function.toString),k=e(function(e){var t=C("src"),n=(""+x).split("toString");o.inspectSource=function(e){return x.call(e)},(e.exports=function(e,o,i,r){var s="function"==typeof i;s&&(v(i,"name")||h(i,"name",o)),e[o]!==i&&(s&&(v(i,t)||h(i,t,e[o]?""+e[o]:n.join(String(o)))),e===a?e[o]=i:r?e[o]?e[o]=i:h(e,o,i):(delete e[o],h(e,o,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[t]||x.call(this)})}),A=function(e,t,n){if(function(){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,a){return e.call(t,n,a)};case 3:return function(n,a,o){return e.call(t,n,a,o)}}return function(){return e.apply(t,arguments)}},S=function(e,t,n){var i,r,s,l,c=e&S.F,d=e&S.G,p=e&S.S,u=e&S.P,m=e&S.B,f=d?a:p?a[t]||(a[t]={}):(a[t]||{}).prototype,g=d?o:o[t]||(o[t]={}),b=g.prototype||(g.prototype={});for(i in d&&(n=t),n)s=((r=!c&&f&&void 0!==f[i])?f:n)[i],l=m&&r?A(s,a):u&&"function"==typeof s?A(Function.call,s):s,f&&k(f,i,s,e&S.U),g[i]!=s&&h(g,i,l),u&&b[i]!=s&&(b[i]=s)};a.core=o,S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128;var P=S,T={}.toString,E=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==function(e){return T.call(e).slice(8,-1)}(e)?e.split(""):Object(e)},I=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},j=function(e){return E(I(e))},R=Math.ceil,D=Math.floor,U=function(e){return isNaN(e=+e)?0:(e>0?D:R)(e)},O=Math.min,_=Math.max,M=Math.min,N=$("keys"),V=function(e){return N[e]||(N[e]=C(e))},L=function(e,t,n){var a,o=j(e),i=(a=o.length)>0?O(U(a),9007199254740991):0,r=function(e,t){return(e=U(e))<0?_(e+t,0):M(e,t)}(n,i);for(0;i>r;r++)if(r in o&&o[r]===t)return r||0;return-1},F=V("IE_PROTO"),B="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),z=Object.keys||function(e){return function(e,t){var n,a=j(e),o=0,i=[];for(n in a)n!=F&&v(a,n)&&i.push(n);for(;t.length>o;)v(a,n=t[o++])&&(~L(i,n)||i.push(n));return i}(e,B)},H={f:Object.getOwnPropertySymbols},W={f:{}.propertyIsEnumerable},q=function(e){return Object(I(e))},J=Object.assign,Y=!J||s(function(){var e={},t={},n=Symbol(),a="abcdefghijklmnopqrst";return e[n]=7,a.split("").forEach(function(e){t[e]=e}),7!=J({},e)[n]||Object.keys(J({},t)).join("")!=a})?function(e){for(var t=q(e),n=arguments.length,a=1,o=H.f,i=W.f;n>a;)for(var r,s=E(arguments[a++]),l=o?z(s).concat(o(s)):z(s),c=l.length,d=0;c>d;)i.call(s,r=l[d++])&&(t[r]=s[r]);return t}:J;P(P.S+P.F,"Object",{assign:Y});var G=e(function(e){var t=$("wks"),n=a.Symbol,o="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=o&&n[e]||(o?n:C)("Symbol."+e))}).store=t}),K=G("unscopables"),Z=Array.prototype;null==Z[K]&&h(Z,K,{});var X=function(e){Z[K][e]=!0},Q=function(e,t){return{value:t,done:!!e}},et={},tt=l?Object.defineProperties:function(e,t){r(e);for(var n,a=z(t),o=a.length,i=0;o>i;)f.f(e,n=a[i++],t[n]);return e},nt=a.document,at=nt&&nt.documentElement,ot=V("IE_PROTO"),it=function(){},rt=function(){var e,t=p("iframe"),n=B.length;for(t.style.display="none",at.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object</script>"),e.close(),rt=e.F;n--;)delete rt.prototype[B[n]];return rt()},st=Object.create||function(e,t){var n;return null!==e?(it.prototype=r(e),n=new it,it.prototype=null,n[ot]=e):n=rt(),void 0===t?n:tt(n,t)},lt=f.f,ct=G("toStringTag"),dt=function(e,t,n){e&&!v(e=n?e:e.prototype,ct)&&lt(e,ct,{configurable:!0,value:t})},pt={};h(pt,G("iterator"),function(){return this});var ut,mt,ft,gt=function(e,t,n){e.prototype=st(pt,{next:g(1,n)}),dt(e,t+" Iterator")},ht=V("IE_PROTO"),bt=Object.prototype,vt=Object.getPrototypeOf||function(e){return e=q(e),v(e,ht)?e[ht]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?bt:null},yt=G("iterator"),wt=!([].keys&&"next"in[].keys()),Ct=function(){return this},$t=function(e,t,n){gt(n,t,function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,Q(1)):Q(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])});var a,o,i,r=function(e){if(!wt&&e in c)return c[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},s="Array Iterator",l=!1,c=e.prototype,d=c[yt]||c["@@iterator"]||c.values,p=d||r("values"),u=r("entries"),m=c.entries||d;if(m&&(i=vt(m.call(new e)))!==Object.prototype&&i.next&&(dt(i,s,!0),"function"!=typeof i[yt]&&h(i,yt,Ct)),d&&"values"!==d.name&&(l=!0,p=function(){return d.call(this)}),(wt||l||!c[yt])&&h(c,yt,p),et.Array=p,et[s]=Ct,void(a={values:p,keys:r("keys"),entries:u}))for(o in a)o in c||k(c,o,a[o]);else P(P.P+P.F*(wt||l),t,a);return a}(Array,"Array",function(e,t){this._t=j(e),this._i=0,this._k=t});et.Arguments=et.Array,X("keys"),X("values"),X("entries");for(var xt=G("iterator"),kt=G("toStringTag"),At=et.Array,St={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Pt=z(St),Tt=0;Tt<Pt.length;Tt++){var Et,It=Pt[Tt],jt=St[It],Rt=a[It],Dt=Rt&&Rt.prototype;
if(Dt&&(Dt[xt]||h(Dt,xt,At),Dt[kt]||h(Dt,kt,It),et[It]=At,jt))for(Et in $t)Dt[Et]||k(Dt,Et,$t[Et],!0)}ut=function(){return function(e){return z(q(e))}},mt=(o.Object||{}).keys||Object.keys,(ft={}).keys=ut(),P(P.S+P.F*s(function(){mt(1)}),"Object",ft);var Ut=f.f,Ot=Function.prototype,_t=/^\s*function ([^ (]*)/;"name"in Ot||l&&Ut(Ot,"name",{configurable:!0,get:function(){try{return(""+this).match(_t)[1]}catch(e){return""}}});var Mt=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Nt=e(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":_typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof(e)})(e)}function n(a){return e.exports=n="function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?function(e){return t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},n(a)}e.exports=n}),Vt=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},Lt=function(e,t){return!t||"object"!==Nt(t)&&"function"!=typeof t?Vt(e):t},Ft=e(function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t}),Bt=function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e},zt=e(function(e){function t(n,a){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,a)}e.exports=t}),Ht=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zt(e,t)},Wt=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},qt=e(function(e){function t(){return e.exports=t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var o=new(Function.bind.apply(e,a));return n&&zt(o,n.prototype),o},t.apply(null,arguments)}e.exports=t}),Jt=e(function(e){function t(n){var a="function"==typeof Map?new Map:void 0;return e.exports=t=function(e){function t(){return qt(e,arguments,Ft(this).constructor)}if(null===e||!Wt(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==a){if(a.has(e))return a.get(e);a.set(e,t)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),zt(t,e)},t(n)}e.exports=t}),Yt=document.createElement("template");Yt.innerHTML="\n    <style>".concat(":host {\n  display: flex;\n  justify-content: space-between; }\n\n* {\n  box-sizing: border-box; }\n\nsection#to {\n  width: 100%; }\n\ndiv#header-title {\n  display: grid;\n  display: -ms-grid;\n  /* version IE */\n  grid-gap: 1rem;\n  column-gap: 10px;\n  align-items: center;\n  -ms-grid-columns: 2fr 2fr 3fr;\n  /* version IE */\n  grid-template-columns: 2fr 2fr 3fr; }\n\n.property-label {\n  width: 100%;\n  font-weight: bold; }\n\n.title-area {\n  height: 100%;\n  padding: 0.5em;\n  background-color: var(--header-color, rgba(144, 144, 144, 0.25)); }\n\n.btn {\n  background-color: var(--btn-background-color, #007bff);\n  border-color: var(--btn-border-color, #007bff); }\n  .btn:hover {\n    background-color: var(--btn-hover-color, #0056b3); }\n",'</style>    \n    <section id="to">     \n      <div id="header-title"></div>        \n      <div id="to-properties"></div>\n    </section>      \n');var Gt=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};l&&"g"!=/./g.flags&&f.f(RegExp.prototype,"flags",{configurable:!0,get:Gt});var Kt=/./.toString,Zt=function(e){k(RegExp.prototype,"toString",e,!0)};s(function(){return"/a/b"!=Kt.call({source:"a",flags:"b"})})?Zt(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!l&&e instanceof RegExp?Gt.call(e):void 0)}):"toString"!=Kt.name&&Zt(function(){return Kt.call(this)});var Xt=W.f,Qt=function(e){for(var t,n=j(e),a=z(n),o=a.length,i=0,r=[];o>i;)Xt.call(n,t=a[i++])&&r.push(n[t]);return r};P(P.S,"Object",{values:function(e){return Qt(e)}});var en=document.createElement("template");en.innerHTML="\n  <style> ".concat(".form-control {\n  display: block;\n  width: 100%;\n  height: calc(1.5em + 0.75rem + 2px);\n  padding: 0.375rem 0.75rem;\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.5;\n  color: #495057;\n  background-color: #fff;\n  background-clip: padding-box;\n  border: 1px solid #ced4da;\n  border-radius: 0.25rem;\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out; }\n  @media (prefers-reduced-motion: reduce) {\n    .form-control {\n      transition: none; } }\n  .form-control::-ms-expand {\n    background-color: transparent;\n    border: 0; }\n  .form-control:focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25); }\n  .form-control::placeholder {\n    color: #6c757d;\n    opacity: 1; }\n  .form-control:disabled, .form-control[readonly] {\n    background-color: #e9ecef;\n    opacity: 1; }\n\nselect.form-control:focus::-ms-value {\n  color: #495057;\n  background-color: #fff; }\n\n.form-control-file,\n.form-control-range {\n  display: block;\n  width: 100%; }\n\n.col-form-label {\n  padding-top: calc(0.375rem + 1px);\n  padding-bottom: calc(0.375rem + 1px);\n  margin-bottom: 0;\n  font-size: inherit;\n  line-height: 1.5; }\n\n.col-form-label-lg {\n  padding-top: calc(0.5rem + 1px);\n  padding-bottom: calc(0.5rem + 1px);\n  font-size: 1.25rem;\n  line-height: 1.5; }\n\n.col-form-label-sm {\n  padding-top: calc(0.25rem + 1px);\n  padding-bottom: calc(0.25rem + 1px);\n  font-size: 0.875rem;\n  line-height: 1.5; }\n\n.form-control-plaintext {\n  display: block;\n  width: 100%;\n  padding-top: 0.375rem;\n  padding-bottom: 0.375rem;\n  margin-bottom: 0;\n  line-height: 1.5;\n  color: #212529;\n  background-color: transparent;\n  border: solid transparent;\n  border-width: 1px 0; }\n  .form-control-plaintext.form-control-sm, .form-control-plaintext.form-control-lg {\n    padding-right: 0;\n    padding-left: 0; }\n\n.form-control-sm {\n  height: calc(1.5em + 0.5rem + 2px);\n  padding: 0.25rem 0.5rem;\n  font-size: 0.875rem;\n  line-height: 1.5;\n  border-radius: 0.2rem; }\n\n.form-control-lg {\n  height: calc(1.5em + 1rem + 2px);\n  padding: 0.5rem 1rem;\n  font-size: 1.25rem;\n  line-height: 1.5;\n  border-radius: 0.3rem; }\n\nselect.form-control[size], select.form-control[multiple] {\n  height: auto; }\n\ntextarea.form-control {\n  height: auto; }\n\n.form-group {\n  margin-bottom: 1rem; }\n\n.form-text {\n  display: block;\n  margin-top: 0.25rem; }\n\n.form-row {\n  display: flex;\n  flex-wrap: wrap;\n  margin-right: -5px;\n  margin-left: -5px; }\n  .form-row > .col,\n  .form-row > [class*=\"col-\"] {\n    padding-right: 5px;\n    padding-left: 5px; }\n\n.form-check {\n  position: relative;\n  display: block;\n  padding-left: 1.25rem; }\n\n.form-check-input {\n  position: absolute;\n  margin-top: 0.3rem;\n  margin-left: -1.25rem; }\n  .form-check-input:disabled ~ .form-check-label {\n    color: #6c757d; }\n\n.form-check-label {\n  margin-bottom: 0; }\n\n.form-check-inline {\n  display: inline-flex;\n  align-items: center;\n  padding-left: 0;\n  margin-right: 0.75rem; }\n  .form-check-inline .form-check-input {\n    position: static;\n    margin-top: 0;\n    margin-right: 0.3125rem;\n    margin-left: 0; }\n\n.valid-feedback {\n  display: none;\n  width: 100%;\n  margin-top: 0.25rem;\n  font-size: 80%;\n  color: #28a745; }\n\n.valid-tooltip {\n  position: absolute;\n  top: 100%;\n  z-index: 5;\n  display: none;\n  max-width: 100%;\n  padding: 0.25rem 0.5rem;\n  margin-top: .1rem;\n  font-size: 0.875rem;\n  line-height: 1.5;\n  color: #fff;\n  background-color: rgba(40, 167, 69, 0.9);\n  border-radius: 0.25rem; }\n\n.was-validated .form-control:valid, .form-control.is-valid {\n  border-color: #28a745;\n  padding-right: calc(1.5em + 0.75rem);\n  background-image: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%2328a745' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\");\n  background-repeat: no-repeat;\n  background-position: center right calc(0.375em + 0.1875rem);\n  background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem); }\n  .was-validated .form-control:valid:focus, .form-control.is-valid:focus {\n    border-color: #28a745;\n    box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25); }\n  .was-validated .form-control:valid ~ .valid-feedback,\n  .was-validated .form-control:valid ~ .valid-tooltip, .form-control.is-valid ~ .valid-feedback,\n  .form-control.is-valid ~ .valid-tooltip {\n    display: block; }\n\n.was-validated textarea.form-control:valid, textarea.form-control.is-valid {\n  padding-right: calc(1.5em + 0.75rem);\n  background-position: top calc(0.375em + 0.1875rem) right calc(0.375em + 0.1875rem); }\n\n.was-validated .custom-select:valid, .custom-select.is-valid {\n  border-color: #28a745;\n  padding-right: calc((1em + 0.75rem) * 3 / 4 + 1.75rem);\n  background: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e\") no-repeat right 0.75rem center/8px 10px, url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%2328a745' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\") #fff no-repeat center right 1.75rem/calc(0.75em + 0.375rem) calc(0.75em + 0.375rem); }\n  .was-validated .custom-select:valid:focus, .custom-select.is-valid:focus {\n    border-color: #28a745;\n    box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25); }\n  .was-validated .custom-select:valid ~ .valid-feedback,\n  .was-validated .custom-select:valid ~ .valid-tooltip, .custom-select.is-valid ~ .valid-feedback,\n  .custom-select.is-valid ~ .valid-tooltip {\n    display: block; }\n\n.was-validated .form-control-file:valid ~ .valid-feedback,\n.was-validated .form-control-file:valid ~ .valid-tooltip, .form-control-file.is-valid ~ .valid-feedback,\n.form-control-file.is-valid ~ .valid-tooltip {\n  display: block; }\n\n.was-validated .form-check-input:valid ~ .form-check-label, .form-check-input.is-valid ~ .form-check-label {\n  color: #28a745; }\n\n.was-validated .form-check-input:valid ~ .valid-feedback,\n.was-validated .form-check-input:valid ~ .valid-tooltip, .form-check-input.is-valid ~ .valid-feedback,\n.form-check-input.is-valid ~ .valid-tooltip {\n  display: block; }\n\n.was-validated .custom-control-input:valid ~ .custom-control-label, .custom-control-input.is-valid ~ .custom-control-label {\n  color: #28a745; }\n  .was-validated .custom-control-input:valid ~ .custom-control-label::before, .custom-control-input.is-valid ~ .custom-control-label::before {\n    border-color: #28a745; }\n\n.was-validated .custom-control-input:valid ~ .valid-feedback,\n.was-validated .custom-control-input:valid ~ .valid-tooltip, .custom-control-input.is-valid ~ .valid-feedback,\n.custom-control-input.is-valid ~ .valid-tooltip {\n  display: block; }\n\n.was-validated .custom-control-input:valid:checked ~ .custom-control-label::before, .custom-control-input.is-valid:checked ~ .custom-control-label::before {\n  border-color: #34ce57;\n  background-color: #34ce57; }\n\n.was-validated .custom-control-input:valid:focus ~ .custom-control-label::before, .custom-control-input.is-valid:focus ~ .custom-control-label::before {\n  box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25); }\n\n.was-validated .custom-control-input:valid:focus:not(:checked) ~ .custom-control-label::before, .custom-control-input.is-valid:focus:not(:checked) ~ .custom-control-label::before {\n  border-color: #28a745; }\n\n.was-validated .custom-file-input:valid ~ .custom-file-label, .custom-file-input.is-valid ~ .custom-file-label {\n  border-color: #28a745; }\n\n.was-validated .custom-file-input:valid ~ .valid-feedback,\n.was-validated .custom-file-input:valid ~ .valid-tooltip, .custom-file-input.is-valid ~ .valid-feedback,\n.custom-file-input.is-valid ~ .valid-tooltip {\n  display: block; }\n\n.was-validated .custom-file-input:valid:focus ~ .custom-file-label, .custom-file-input.is-valid:focus ~ .custom-file-label {\n  border-color: #28a745;\n  box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25); }\n\n.invalid-feedback {\n  display: none;\n  width: 100%;\n  margin-top: 0.25rem;\n  font-size: 80%;\n  color: #dc3545; }\n\n.invalid-tooltip {\n  position: absolute;\n  top: 100%;\n  z-index: 5;\n  display: none;\n  max-width: 100%;\n  padding: 0.25rem 0.5rem;\n  margin-top: .1rem;\n  font-size: 0.875rem;\n  line-height: 1.5;\n  color: #fff;\n  background-color: rgba(220, 53, 69, 0.9);\n  border-radius: 0.25rem; }\n\n.was-validated .form-control:invalid, .form-control.is-invalid {\n  border-color: #dc3545;\n  padding-right: calc(1.5em + 0.75rem);\n  background-image: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='%23dc3545' viewBox='-2 -2 7 7'%3e%3cpath stroke='%23dc3545' d='M0 0l3 3m0-3L0 3'/%3e%3ccircle r='.5'/%3e%3ccircle cx='3' r='.5'/%3e%3ccircle cy='3' r='.5'/%3e%3ccircle cx='3' cy='3' r='.5'/%3e%3c/svg%3E\");\n  background-repeat: no-repeat;\n  background-position: center right calc(0.375em + 0.1875rem);\n  background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem); }\n  .was-validated .form-control:invalid:focus, .form-control.is-invalid:focus {\n    border-color: #dc3545;\n    box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25); }\n  .was-validated .form-control:invalid ~ .invalid-feedback,\n  .was-validated .form-control:invalid ~ .invalid-tooltip, .form-control.is-invalid ~ .invalid-feedback,\n  .form-control.is-invalid ~ .invalid-tooltip {\n    display: block; }\n\n.was-validated textarea.form-control:invalid, textarea.form-control.is-invalid {\n  padding-right: calc(1.5em + 0.75rem);\n  background-position: top calc(0.375em + 0.1875rem) right calc(0.375em + 0.1875rem); }\n\n.was-validated .custom-select:invalid, .custom-select.is-invalid {\n  border-color: #dc3545;\n  padding-right: calc((1em + 0.75rem) * 3 / 4 + 1.75rem);\n  background: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e\") no-repeat right 0.75rem center/8px 10px, url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='%23dc3545' viewBox='-2 -2 7 7'%3e%3cpath stroke='%23dc3545' d='M0 0l3 3m0-3L0 3'/%3e%3ccircle r='.5'/%3e%3ccircle cx='3' r='.5'/%3e%3ccircle cy='3' r='.5'/%3e%3ccircle cx='3' cy='3' r='.5'/%3e%3c/svg%3E\") #fff no-repeat center right 1.75rem/calc(0.75em + 0.375rem) calc(0.75em + 0.375rem); }\n  .was-validated .custom-select:invalid:focus, .custom-select.is-invalid:focus {\n    border-color: #dc3545;\n    box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25); }\n  .was-validated .custom-select:invalid ~ .invalid-feedback,\n  .was-validated .custom-select:invalid ~ .invalid-tooltip, .custom-select.is-invalid ~ .invalid-feedback,\n  .custom-select.is-invalid ~ .invalid-tooltip {\n    display: block; }\n\n.was-validated .form-control-file:invalid ~ .invalid-feedback,\n.was-validated .form-control-file:invalid ~ .invalid-tooltip, .form-control-file.is-invalid ~ .invalid-feedback,\n.form-control-file.is-invalid ~ .invalid-tooltip {\n  display: block; }\n\n.was-validated .form-check-input:invalid ~ .form-check-label, .form-check-input.is-invalid ~ .form-check-label {\n  color: #dc3545; }\n\n.was-validated .form-check-input:invalid ~ .invalid-feedback,\n.was-validated .form-check-input:invalid ~ .invalid-tooltip, .form-check-input.is-invalid ~ .invalid-feedback,\n.form-check-input.is-invalid ~ .invalid-tooltip {\n  display: block; }\n\n.was-validated .custom-control-input:invalid ~ .custom-control-label, .custom-control-input.is-invalid ~ .custom-control-label {\n  color: #dc3545; }\n  .was-validated .custom-control-input:invalid ~ .custom-control-label::before, .custom-control-input.is-invalid ~ .custom-control-label::before {\n    border-color: #dc3545; }\n\n.was-validated .custom-control-input:invalid ~ .invalid-feedback,\n.was-validated .custom-control-input:invalid ~ .invalid-tooltip, .custom-control-input.is-invalid ~ .invalid-feedback,\n.custom-control-input.is-invalid ~ .invalid-tooltip {\n  display: block; }\n\n.was-validated .custom-control-input:invalid:checked ~ .custom-control-label::before, .custom-control-input.is-invalid:checked ~ .custom-control-label::before {\n  border-color: #e4606d;\n  background-color: #e4606d; }\n\n.was-validated .custom-control-input:invalid:focus ~ .custom-control-label::before, .custom-control-input.is-invalid:focus ~ .custom-control-label::before {\n  box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25); }\n\n.was-validated .custom-control-input:invalid:focus:not(:checked) ~ .custom-control-label::before, .custom-control-input.is-invalid:focus:not(:checked) ~ .custom-control-label::before {\n  border-color: #dc3545; }\n\n.was-validated .custom-file-input:invalid ~ .custom-file-label, .custom-file-input.is-invalid ~ .custom-file-label {\n  border-color: #dc3545; }\n\n.was-validated .custom-file-input:invalid ~ .invalid-feedback,\n.was-validated .custom-file-input:invalid ~ .invalid-tooltip, .custom-file-input.is-invalid ~ .invalid-feedback,\n.custom-file-input.is-invalid ~ .invalid-tooltip {\n  display: block; }\n\n.was-validated .custom-file-input:invalid:focus ~ .custom-file-label, .custom-file-input.is-invalid:focus ~ .custom-file-label {\n  border-color: #dc3545;\n  box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25); }\n\n.form-inline {\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center; }\n  .form-inline .form-check {\n    width: 100%; }\n  @media (min-width: 576px) {\n    .form-inline label {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      margin-bottom: 0; }\n    .form-inline .form-group {\n      display: flex;\n      flex: 0 0 auto;\n      flex-flow: row wrap;\n      align-items: center;\n      margin-bottom: 0; }\n    .form-inline .form-control {\n      display: inline-block;\n      width: auto;\n      vertical-align: middle; }\n    .form-inline .form-control-plaintext {\n      display: inline-block; }\n    .form-inline .input-group,\n    .form-inline .custom-select {\n      width: auto; }\n    .form-inline .form-check {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      width: auto;\n      padding-left: 0; }\n    .form-inline .form-check-input {\n      position: relative;\n      flex-shrink: 0;\n      margin-top: 0;\n      margin-right: 0.25rem;\n      margin-left: 0; }\n    .form-inline .custom-control {\n      align-items: center;\n      justify-content: center; }\n    .form-inline .custom-control-label {\n      margin-bottom: 0; } }\n\n:host {\n  margin-top: 10px;\n  display: grid;\n  grid-template-columns: 2fr 2fr 3fr;\n  align-items: center;\n  grid-column-gap: 10px; }\n\n/* Styling slot label*/\n::slotted([slot='label']) {\n  justify-self: start; }\n\n.form-control {\n  font-size: 14px; }\n\n#property-value {\n  word-break: break-word;\n  justify-self: start;\n  color: var(--property-value-color, #676767); }\n",'</style>\n  <div class="bo-select"></div>\n  <slot name="label">Label</slot>    \n  <div id="property-value"></div>   \n  ');var tn=function(e){function t(){var e;return Mt(this,t),(e=Lt(this,Ft(t).call(this)))._options=e.querySelectorAll("bo-expanded-select-option"),e.options=Object.values(e._options).map(function(e){return{id:e.getAttribute("id"),value:e.getAttribute("value"),text:e.textContent}}),e.attachShadow({mode:"open"}),e.shadowRoot.appendChild(en.content.cloneNode(!0)),e._propertyValue=e.shadowRoot.querySelector("#property-value"),e}return Ht(t,e),Bt(t,null,[{key:"observedAttributes",get:function(){return["selected"]}}]),Bt(t,[{key:"connectedCallback",value:function(){this._render(this.options)}},{key:"_render",value:function(e){this._generateSelectBox(e),this.shadowRoot.querySelector("select").addEventListener("change",this._onChange.bind(this))}},{key:"_generateSelectBox",value:function(e){var t=[];e.forEach(function(e){t.push('<option value="'.concat(e.id,'" val="').concat(e.value.toString(),'">').concat(e.text,"</option>"))});var n='<select class="form-control">'.concat(t.join(""),"</select>");this.shadowRoot.querySelector(".bo-select").innerHTML=n;var a=this.shadowRoot.querySelector("select");a.value=this.selected&&this._isAvailableOption(this.options,this.selected)?this.selected:"";var o=a.options[a.options.selectedIndex].getAttribute("val");this._setPropertyValue("undefined"===o?"":o)}},{key:"_onChange",value:function(e){var t=e.target.options[e.target.selectedIndex];this._setPropertyValue(t.getAttribute("val")),this.selected=t.getAttribute("value")}},{key:"attributeChangedCallback",value:function(e,t,n){if("selected"===e&&t!=n){var a=this.shadowRoot.querySelector("select");a&&(a.value=this.selected&&this._isAvailableOption(this.options,this.selected)?this.selected:"",this._setPropertyValue(a.options[a.options.selectedIndex].getAttribute("val"))),this.dispatchEvent(new CustomEvent("valueChange",{composed:!0,bubbles:!0}))}}},{key:"_isAvailableOption",value:function(e,t){return e.filter(function(e){return e.id===t}).length>0}},{key:"disconnectedCallback",value:function(){this.removeEventListener("change",this._onChange)}},{key:"_setPropertyValue",value:function(e){this._propertyValue.innerHTML="undefined"===e?"":e}},{key:"selected",get:function(){return this.getAttribute("selected")},set:function(e){var t=this.options.filter(function(t){return t.id===e});this.setAttribute("selected",t.length>0?e:"")}}]),t}(Jt(HTMLElement));customElements.define("bo-expanded-select",tn);var nn=function(e){function t(){var e;return Mt(this,t),(e=Lt(this,Ft(t).call(this))).from||(e.from={}),e.to||(e.to={}),e.dictionary||(e.dictionary={}),e.attachShadow({mode:"open"}),e.shadowRoot.appendChild(Yt.content.cloneNode(!0)),e._to=e.shadowRoot.querySelector("#to-properties"),e._headerTitle=e.shadowRoot.querySelector("#header-title"),e._renderResult=e._renderResult.bind(Vt(e)),e.resetMapping=e.resetMapping.bind(Vt(e)),e}return Ht(t,e),Bt(t,null,[{key:"observedAttributes",get:function(){return["from","to","dictionary"]}}]),Bt(t,[{key:"connectedCallback",value:function(){this.addEventListener("valueChange",this._renderResult)}},{key:"attributeChangedCallback",value:function(e,t,n){t!==n&&("to"!==e&&"dictionary"!==e||(this._render(),this._renderResult()))}},{key:"disconnectedCallback",value:function(){this.removeEventListener("valueChange",this._renderResult)}},{key:"_render",value:function(){var e=this;this._headerTitle.innerHTML='\n    <div class="title-area"><b>'.concat(this.from.name||"","</b> ").concat(this._translate("Properties"),'</div>\n    <div class="title-area"><b>').concat(this.to.name||this._translate("Target"),"</b> ").concat(this._translate("Properties"),'</div>\n    <div class="title-area">').concat(this._translate("Value"),"</div>");var t=Object.keys(this.to.options).map(function(t){return"<bo-expanded-select selected='".concat(t,"' key='").concat(t,'\'>\n           <div slot="label"><b>').concat(e._translate(e.to.options[t].label),"</b> ").concat(e._addBondIcon(e.to.options[t].bond),"</div>\n           <bo-expanded-select-option id='' value='").concat(e.to.options[t].value||e.to.options[t].defaultValue,"'></bo-expanded-select-option>")+Object.keys(e.from.options).map(function(t){return"<bo-expanded-select-option id='".concat(t,"' value='").concat(e.from.options[t].value+""||e.from.options[t].defaultValue+"","'>\n            ").concat(e._translate(e.from.options[t].label),"\n            </bo-expanded-select-option>")}).join("")+"</bo-expanded-select>"});this._to.innerHTML=t.join("")}},{key:"_addBondIcon",value:function(e){switch(e){case"constant":return"";case"interpolation":return"(\xb6)";case"expression":return"(fx)";case"variable":return"(\u26ad)";default:return""}}},{key:"_renderResult",value:function(){this.result=JSON.stringify(this._getMappingResult(),null)}},{key:"_getMappingResult",value:function(){var e=this.from.options,t=this.to.options;this._allProperties=this._to.querySelectorAll("bo-expanded-select");var a=[];this._allProperties.forEach(function(e){a.push({selected:e.selected,key:e.selected?e.getAttribute("key"):""})});var o,i,r,s=_extends({},{id:this.to.id,name:this.to.name,options:{}});return s.options=(o=e,i=t,r={},a.forEach(function(e){var t=e.selected,a=e.key;i.hasOwnProperty(a)&&(r[a]={type:n(o[t],i[a]),value:void 0!==o[t]?o[t].value:i[a].value||i[a].defaultValue})}),r),s}},{key:"resetMapping",value:function(){this._allProperties=this._to.querySelectorAll("bo-expanded-select"),this._allProperties.forEach(function(e){e.selected=e.getAttribute("key")})}},{key:"_translate",value:function(e){return this.dictionary&&this.dictionary[e]?this.dictionary[e]:e}},{key:"from",get:function(){try{return JSON.parse(this.getAttribute("from"))}catch(e){return{name:"",options:{}}}},set:function(e){this.setAttribute("from",JSON.stringify(e))}},{key:"dictionary",get:function(){try{return JSON.parse(this.getAttribute("dictionary"))}catch(e){return{}}},set:function(e){this.setAttribute("dictionary",JSON.stringify(e))}},{key:"to",get:function(){try{return JSON.parse(this.getAttribute("to"))}catch(e){return{name:"",options:{}}}},set:function(e){this.setAttribute("to",JSON.stringify(e))}}]),t}(Jt(HTMLElement));customElements.define("bo-switch-config",nn)}(),function(){var e=function(){function e(t,n,a,o,i){var r=this;_classCallCheck(this,e),this.$uibModalInstance=t,this.widgets=n,this.widgetFrom=a,this.propertiesService=o,this.selectedWidget="",this.widgetsToDisplay=this.widgets.sort(function(e,t){return e.name.localeCompare(t.name)}).filter(function(e){return e.id!==r.widgetFrom.$$widget.id&&"container"!==e.type}).map(function(e){return{id:e.id,name:e.name,custom:e.custom}}),this.propertiesFrom=this._extractFromProperties(this.widgetFrom);var s=Object.values(i);this.dictionary=this._attachDictionary(s[0]),this.propertiesIsDisplay=!1}return e.$inject=["$uibModalInstance","widgets","widgetFrom","properties","dictionary"],e.prototype._attachDictionary=function(e){var t={};return e&&Object.keys(e).forEach(function(n){t[n]=e[n].$$noContext[0]}),t},e.prototype._extractFromProperties=function(e){var t={},n=e.$$widget.properties;return Object.keys(e.propertyValues).forEach(function(a){var o=n.filter(function(e){return e.name===a});o.length>0&&(t[a]=e.propertyValues[a],t[a].label=o[0].label)}),{name:e.$$widget.name,options:t}},e.prototype.getWidget=function(e){var t=this.widgets.filter(function(t){return t.id===e}),n=t[0];n=this.propertiesService.addCommonPropertiesTo(n);var a={};return n.properties.forEach(function(e){a[e.name]=e}),{id:n.id,name:n.name,options:a}},e.prototype.isClearButtonVisible=function(){return(this.selectedWidget||"").trim().length>0},e.prototype.clearValue=function(){this.selectedWidget=""},e.prototype.isBtnPropertiesEnabled=function(){var e=this,t=this.widgetsToDisplay.filter(function(t){return t.name.toLowerCase()===e.selectedWidget.toLowerCase()});return t.length>0},e.prototype.showProperties=function(){var e=this;if(!this.selectedWidget)return void(this.selectedWidget="");var t=this.widgetsToDisplay.filter(function(t){return t.name.toLowerCase()===e.selectedWidget.toLowerCase()});t.length>0&&(this.propertiesTo=this.getWidget(t[0].id),this.propertiesIsDisplay=!0)},e.prototype.applyConfig=function(){var e=document.getElementById("switch-component-config");this.$uibModalInstance.close({mapping:e.result,dimension:this.widgetFrom.dimension},this.widgetFrom)},e.prototype.reset=function(){var e=document.getElementById("switch-component-config");e.resetMapping()},e}();angular.module("bonitasoft.designer.editor.whiteboard").controller("SwitchComponentPopupController",e)}(),angular.module("bonitasoft.designer.editor.whiteboard").controller("TabsContainerDirectiveCtrl",["$scope","arrays","whiteboardComponentWrapper","pageElementFactory",function(e,t,n,a){"use strict";e.openTab=function(t,n){e.tabsContainer.$$openedTab=t,e.editor.selectComponent(t,n)},e.isOpened=function(t){return e.tabsContainer.$$openedTab===t},e.tabsContainer.$$openedTab=e.tabsContainer.tabs[0],e.moveTabLeftVisible=function(n){return e.editor.isCurrentComponent(n)&&t.moveLeftPossible(n,e.tabsContainer.tabs)},e.moveTabRightVisible=function(n){return e.editor.isCurrentComponent(n)&&t.moveRightPossible(n,e.tabsContainer.tabs)},e.moveTabLeft=function(n){t.moveLeft(n,e.tabsContainer.tabs)},e.moveTabRight=function(n){t.moveRight(n,e.tabsContainer.tabs)},e.addTab=function(t){var o=e.tabsContainer.tabs,i=a.createTabElement("Tab "+(o.length+1));n.wrapTab(i,e.tabsContainer),o.push(i),e.openTab(i,t)},e.isRemoveTabVisible=function(t){return e.editor.isCurrentComponent(t)&&e.tabsContainer.tabs.length>1},e.removeTab=function(t,n){var a=e.tabsContainer.tabs,o=a.indexOf(t);o=o>=a.length?a.length-1:o;var i=0===o?0:o-1;a.splice(o,1),e.openTab(a[i],n),t.triggerRemoved()},e.isPropertyExist=function(t){return e.tabsContainer.hasOwnProperty("propertyValues")&&e.tabsContainer.propertyValues.hasOwnProperty(t)?e.tabsContainer.propertyValues[t].hasOwnProperty("value"):!1}}]),angular.module("bonitasoft.designer.editor.whiteboard").directive("tabsContainer",function(){"use strict";return{restrict:"E",scope:{tabsContainer:"=",editor:"="},controller:"TabsContainerDirectiveCtrl",templateUrl:"js/editor/whiteboard/tabs-container.html"}}),function(){"use strict";angular.module("bonitasoft.designer.editor.whiteboard").filter("uiTranslate",function(){return function(e){return e}})}(),function(){"use strict";function e(e,t,n){function a(e,n){var a={container:e,row:n};angular.forEach(n,function(e){t.init(e,a)})}function o(e){e.rows.forEach(a.bind(null,e))}function i(t,a,o){var i=angular.extend(a,{$$id:n.getNextId("component"),$$widget:angular.copy(t),$$templateUrl:"js/editor/whiteboard/component-template.html",$$propertiesTemplateUrl:"js/editor/properties-panel/component-properties-template.html",$$parentContainerRow:o,triggerRemoved:e.onRemoveWidget.bind(null,a),triggerAdded:e.onAddWidget.bind(null,a)});return e.triggerInitWidget(i),i}function r(t,o,i){var r=angular.extend(o,{$$id:n.getNextId(t.id),$$widget:angular.copy(t),$$templateUrl:"js/editor/whiteboard/container-template.html",$$propertiesTemplateUrl:"js/editor/properties-panel/container-properties-template.html",$$parentContainerRow:i,triggerRemoved:e.onRemoveContainer.bind(null,o),triggerAdded:angular.noop});return r.rows.forEach(a.bind(null,o)),r}function s(t,a,o){var i=angular.extend(a,{$$id:n.getNextId(t.id),$$widget:angular.copy(t),$$templateUrl:"js/editor/whiteboard/tabs-container-template.html",$$propertiesTemplateUrl:"js/editor/properties-panel/component-properties-template.html",$$parentContainerRow:o,triggerRemoved:e.onRemoveTabsContainer.bind(null,a),triggerAdded:e.onAddTabsContainer.bind(null,a)});return a.tabs.forEach(function(e){p.wrapTab(e,a),p.wrapContainer({id:"pbContainer"},e.container)}),i}function l(t,n){angular.extend(t,{$$parentTabsContainer:n,$$widget:{type:"container",name:"Tab"},$$propertiesTemplateUrl:"js/editor/properties-panel/tab-properties-template.html",triggerRemoved:e.onRemoveTab.bind(null,t),triggerAdded:angular.noop})
}function c(t,a,o){var i=angular.extend(a,{$$id:n.getNextId(t.id),$$widget:angular.copy(t),$$templateUrl:"js/editor/whiteboard/form-container-template.html",$$propertiesTemplateUrl:"js/editor/properties-panel/component-properties-template.html",$$parentContainerRow:o,triggerRemoved:e.onRemoveFormContainer.bind(null,a),triggerAdded:angular.noop});return p.wrapContainer({id:"pbContainer"},a.container),i}function d(t,a,o){var i=angular.extend(a,{$$id:n.getNextId(t.id),$$widget:angular.copy(t),$$templateUrl:"js/editor/whiteboard/modal-container-template.html",$$propertiesTemplateUrl:"js/editor/properties-panel/modal-container-properties-template.html",$$parentContainerRow:o,triggerRemoved:e.onRemoveModalContainer.bind(null,a),triggerAdded:e.onAddModalContainer.bind(null,a)});return p.wrapContainer({id:"pbContainer"},a.container),i}var p={wrapPage:o,wrapWidget:i,wrapContainer:r,wrapTabsContainer:s,wrapModalContainer:d,wrapTab:l,wrapFormContainer:c};return p}e.$inject=["whiteboardService","components","componentId"],angular.module("bonitasoft.designer.editor.whiteboard").service("whiteboardComponentWrapper",e)}(),function(){"use strict";function e(e,t){function n(){w=[]}function a(e){return w.indexOf(e.id)>-1}function o(e){v.push(e)}function i(e){y.push(e)}function r(e){t.removeFirst(e.id,w),c(v,e)}function s(e){c(y,e)}function l(e){w.push(e.id)}function c(t,n){t.forEach(function(t){e(t.bind(null,n),0)})}function d(e){angular.forEach(e,function(e){e.triggerRemoved()})}function p(e){e.rows.forEach(d)}function u(e){c(y,e)}function m(e){c(y,e)}function f(e){e.tabs.forEach(g),c(v,e)}function g(e){p(e.container)}function h(e){p(e.container)}function b(e){p(e.container)}var v=[],y=[],w=[];return{registerOnWidgetRemoveFunction:o,registerOnWidgetAddFunction:i,triggerRowRemoved:d,triggerInitWidget:l,onAddWidget:s,onRemoveWidget:r,onRemoveContainer:p,onRemoveTabsContainer:f,onAddTabsContainer:u,onAddModalContainer:m,onRemoveTab:g,onRemoveFormContainer:h,onRemoveModalContainer:b,contains:a,reset:n}}e.$inject=["$timeout","arrays"],angular.module("bonitasoft.designer.editor.whiteboard").service("whiteboardService",e)}(),function(){"use strict";var e=function(){function e(t){var n=this;_classCallCheck(this,e),this.factories={page:{key:"page",state:"page",value:t("Application page"),filterName:t("Pages"),create:function(e){return n.createPage(e,"page")}},form:{key:"form",state:"page",value:t("Process form"),tooltip:t("You should start process form design in the studio: from the appropriate pool or human task, create a contract and launch the UI Designer. It will auto-generate a dedicated form to edit."),filterName:t("Forms"),create:function(e){return n.createPage(e,"form")}},layout:{key:"layout",state:"page",value:t("Application layout"),filterName:t("Layouts"),create:function(e){return n.createPage(e,"layout")}},widget:{key:"widget",state:"widget",value:t("Custom widget"),filterName:t("Custom widgets"),create:function(e){return n.createWidget(e)}}}}return e.prototype.getFactory=function(e){return this.factories[e]},e.prototype.getFactories=function(){return this.factories},e.prototype.createPage=function(e,t){return{type:t,name:e,rows:[[]]}},e.prototype.createWidget=function(e){var t='<!-- The custom widget template is defined here\n   - You can use standard HTML tags and AngularJS built-in directives, scope and interpolation system\n   - Custom widget properties defined on the right can be used as variables in a templates with properties.newProperty\n   - Functions exposed in the controller can be used with ctrl.newFunction()\n   - You can use the \'environment\' property injected in the scope when inside the Editor whiteboard. It allows to define a mockup\n     of the Custom Widget to be displayed in the whiteboard only. By default the widget is represented by an auto-generated icon\n     and its name (See the <span> below).\n-->\n \n<span ng-if="environment"><identicon name="{{environment.component.id}}" size="30" background-color="[255,255,255, 0]" foreground-color="[51,51,51]"></identicon> {{environment.component.name}}</span>\n\n<div style="color: {{ properties.color }}; background-color: {{ backgroudColor }}" ng-click="ctrl.toggleBackgroundColor()">\n    Value is:  <i>{{ properties.value }}</i>. Click me to toggle background color\n</div>',n="/**\n * The controller is a JavaScript function that augments the AngularJS scope and exposes functions that can be used in the custom widget template\n * \n * Custom widget properties defined on the right can be used as variables in a controller with $scope.properties\n * To use AngularJS standard services, you must declare them in the main function arguments.\n * \n * You can leave the controller empty if you do not need it.\n */\nfunction ($scope) {\n    var white = 'white';\n    \n    // add a new variable in AngularJS scope. It'll be usable in the template directly with {{ backgroudColor }} \n    $scope.backgroudColor = white;\n    \n    // define a function to be used in template with ctrl.toggleBackgroundColor()\n    this.toggleBackgroundColor = function() {\n        if ($scope.backgroudColor === white) {\n           // use the custom widget property backgroudColor with $scope.properties.backgroudColor\n            $scope.backgroudColor = $scope.properties.background;\n        } else {\n            $scope.backgroudColor = white;\n        }\n    };\n}";return{name:e,type:"widget",template:t,controller:n,custom:!0,properties:[{label:"Value",name:"value",type:"text",defaultValue:"This is the initial value"},{label:"Color",name:"color",type:"choice",defaultValue:"RebeccaPurple",choiceValues:["RebeccaPurple","Chartreuse","Tomato","DeepSkyBlue"]},{label:"Background color on click",name:"background",type:"choice",defaultValue:"Yellow",choiceValues:["Yellow","LightGray"]}]}},e}();angular.module("bonitasoft.designer.home").factory("artifactFactories",["gettext",function(t){return new e(t)}])}(),function(){"use strict";var e=function(){function e(t,n,a,o,i,r,s){_classCallCheck(this,e),this.$uibModal=t,this.$timeout=n,this.$localStorage=a,this.getRepository=function(e){return o.get(e)},this.gettextCatalog=i,this.$state=r,this.artifactNamingValidatorService=s}return e.$inject=["$uibModal","$timeout","$localStorage","repositories","gettextCatalog","$state","artifactNamingValidatorService"],e.prototype.translateKeys=function(e){return{Delete:this.gettextCatalog.getString("Delete"),Export:this.gettextCatalog.getString("Export"),Rename:this.gettextCatalog.getString("Rename"),Cancel:this.gettextCatalog.getString("Cancel"),"Last Update:":this.gettextCatalog.getString("Last Update:"),"In folder:":this.gettextCatalog.getString("In folder:"),"Validation error. Fix is recommended before export":this.gettextCatalog.getString("Validation error. Fix is recommended before export")}[e]||e},e.prototype.deleteArtifact=function(e){var t=this,n=angular.isDefined(e.usedBy)?"js/home/artifact-list/alert-deletion-notpossible-popup.html":"js/home/artifact-list/confirm-deletion-popup.html",a=this.$uibModal.open({templateUrl:n,windowClass:"modal-centered",controller:"DeletionPopUpController",resolve:{artifact:function(){return e},type:function(){return e.type}}});a.result.then(function(n){return t.getRepository(e.type).delete(n)}).then(this.refreshAll)},e.prototype.exportArtifact=function(e){var t=this;if(this.showExportPopup(e.type)){var n=this.$uibModal.open({templateUrl:"js/editor/header/export-popup.html",controller:"ExportPopUpController",controllerAs:"ctrl",resolve:{page:function(){return e}}});n.result.then(function(){t.achieveExport(e)})}else this.achieveExport(e)},e.prototype.showExportPopup=function(e){var t=this.$localStorage.bonitaUIDesigner;return!("page"!==e||t&&t.doNotShowExportMessageAgain)},e.prototype.achieveExport=function(e){this.downloadArtifact(this.getRepository(e.type).exportUrl(e))},e.prototype.toggleItemEdition=function(e){this.editionIndex=void 0!==this.editionIndex?void 0:e},e.prototype.isInEditionMode=function(e){return this.editionIndex===e},e.prototype.isValid=function(e){var t=document.getElementById("page-name-input-"+e);return null!==t&&!t.getAttribute("uib-tooltip")},e.prototype.isArtifactNameAlreadyExist=function(e,t,n){var a=!1;return e!==t.name&&(a=this.artifactNamingValidatorService.isArtifactNameAlreadyUseForType(e,t.type,n)),a},e.prototype.renameItem=function(e){var t=this;e.newName!==e.name&&this.getRepository(e.type).rename(e.id,e.newName).then(function(t){var n=t.headers("location");if(n){var a=n.substring(n.lastIndexOf("/")+1);e.newId=a}else e.newId=e.id}).catch(function(){e.newName=e.name,e.newId=e.id}).finally(function(){e.name=e.newName,e.id=e.newId,e.editionUrl=t.$state.href("designer."+e.type,{id:e.id})}),this.$timeout(function(){return t.editionIndex=void 0},100)},e}();angular.module("bonitasoft.designer.home").directive("artifactList",function(){return{controller:e,controllerAs:"artifactList",scope:!0,bindToController:{all:"=*artifacts",existingArtifacts:"=",refreshAll:"=",downloadArtifact:"="},templateUrl:"js/home/artifact-list/artifact-list.html"}})}(),angular.module("bonitasoft.designer.home").controller("DeletionPopUpController",["$scope","$uibModalInstance","artifact","type",function(e,t,n,a){"use strict";function o(e){return Object.keys(e).map(function(t){return e[t]})}var i;e.artifact=n,e.artifact.type=a,e.ok=function(){t.close(e.artifact.id)},e.cancel=function(){t.dismiss("cancel")},(i=[]).concat.apply(i,_toConsumableArray(o(n.usedBy||{}))).reduce(function(e,t){return e[t.type]=e[t.type]||[],e[t.type].push(t),e},e.usedBy={})}]),function(){"use strict";function e(){return{scope:{artifact:"=",repository:"=artifactRepository"},controller:t,controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"js/home/artifact-list/favorite-button.html"}}function t(){var e=this;e.toggleFavorite=function(){e.artifact.favorite?e.repository.unmarkAsFavorite(e.artifact.id):e.repository.markAsFavorite(e.artifact.id),e.artifact.favorite=!e.artifact.favorite},e.isFavorite=function(){return e.artifact.favorite}}angular.module("bonitasoft.designer.home").directive("favoriteButton",e)}(),function(){"use strict";var e=function(){function e(t,n,a){_classCallCheck(this,e),this.$q=t,this.repositories=[n,{all:function(){return a.customs()}}]}return e.$inject=["$q","pageRepo","widgetRepo"],e.prototype.load=function(){return this.$q.all(this.repositories.map(function(e){return e.all()})).then(function(e){var t;return(t=[]).concat.apply(t,_toConsumableArray(e))})},e.prototype.registerRepository=function(e){this.repositories.push(e)},e}();angular.module("bonitasoft.designer.home").service("artifactStore",e)}(),function(){"use strict";var e=function(){function e(t,n,a,o,i){var r=this;_classCallCheck(this,e),this.repositories=n,this.artifactNamingValidatorService=i,this.$state=a,this.$scope=t,this.types=o.getFactories(),t.$watch(function(){return r.artifactActive},function(e){return r.type=e&&r.types[e.id]||r.types.page})}return e.$inject=["$scope","repositories","$state","artifactFactories","artifactNamingValidatorService"],e.prototype.close=function(){this.isOpen=!1},e.prototype.isArtifactNameAlreadyExist=function(e,t){return this.artifactNamingValidatorService.isArtifactNameAlreadyUseForType(e,t.key,this.artifacts)},e.prototype.create=function(e,t){var n=this;this.repositories.get(e.key).create(e.create(t)).then(function(t){return n.$state.go("designer."+e.key,{id:t.id})})},e}();angular.module("bonitasoft.designer.home").directive("uidCreateArtifact",function(){return{scope:!0,require:"^HomeCtrl",templateUrl:"js/home/create/home-create.html",controller:e,bindToController:{artifactActive:"=",artifacts:"="},controllerAs:"createCtrl"}})}(),function(){"use strict";var e=function t(e,n,a,o,i,r,s,l,c){function d(t){e.types.forEach(function(n){return e.artifacts[n.id]=i("filter")(t||[],{name:e.search,type:n.id})})}_classCallCheck(this,t),e.artifacts={},e.$storage=s,s.homeSortOrder=s.homeSortOrder||"-lastUpdate",e.refreshAll=function(){return a.load().then(function(t){return e.artifacts.all=t}).then(function(e){return e.map(function(e){return e.editionUrl=r.href("designer."+e.type,{id:e.id}),e})}).then(d)},e.openHelp=function(){return n.open({templateUrl:"js/home/help-popup.html",size:"lg"})},e.getActivatedArtifact=function(){return e.types.filter(function(e){return e.active})[0]},e.downloadArtifact=function(e){return l.location=e};var p=o.getFactories();e.types=Object.keys(p).map(function(e){return{id:e,name:p[e].filterName}}),e.search="",e.$watch("search",function(){return d(e.artifacts.all)}),e.refreshAll(),e.getSortTooltipMessage=function(e){return c.getString("-lastUpdate"===e?"Ordered by last update.<br/>Click to sort by artifact name":"Ordered by artifact name.<br/>Click to sort by last update")}};e.$inject=["$scope","$uibModal","artifactStore","artifactFactories","$filter","$state","$localStorage","$window","gettextCatalog"],angular.module("bonitasoft.designer.home").controller("HomeCtrl",e)}(),function(){"use strict";var e=function(){function e(t,n,a){_classCallCheck(this,e),this.$uibModal=t,this.$scope=n,this.importArtifactService=a,this.type="artifact",this.url="import/artifact",this.filename="",this.popupTitle="Import a UI Designer artifact"}return e.$inject=["$uibModal","$scope","importArtifactService"],e.prototype.close=function(){this.isOpen=!1,this.filename=""},e.prototype.onComplete=function(e){var t=this,n=this.importArtifactService.manageImportResponse(this.type,!0,e);n.finally(function(){return t.close()}),n.then(function(e){return!!e&&t.manageImportReport(e)}).then(this.$scope.refreshAll)},e.prototype.manageImportReport=function(e){return this.$uibModal.open({templateUrl:"js/home/import/import-report-popup.html",controller:"ImportReportPopupController",controllerAs:"importReport",resolve:{importReport:function(){return e}}}).result},e}();angular.module("bonitasoft.designer.home").directive("uidImportArtifact",function(){return{scope:!0,templateUrl:"js/home/import/home-import.html",controller:e,controllerAs:"import"}})}(),function(){"use strict";function e(e,t){function n(t,n){var i=o[t.type]||{cause:t.message},r={consequence:a(n)};return Object.keys(i).forEach(function(n){return r[n]=e.getString(i[n],t)}),r}function a(n){return n=n||t("artifact"),"page"===n?t("The page has not been imported."):"widget"===n?t("The widget has not been imported."):e.getString("The {{ artifactType }} has not been imported.",{artifactType:e.getString(n)})}var o={SERVER_ERROR:{cause:t("A server error occurred."),additionalInfos:t("Check the log files")},PAGE_NOT_FOUND:{cause:t("Incorrect zip structure."),additionalInfos:t("Check that the zip archive contains the file {{ infos.modelfile }}.")},MODEL_NOT_FOUND:{cause:t("Incorrect zip structure."),additionalInfos:t("Check that the zip archive contains one of following files {{ infos.modelfiles }}.")},UNEXPECTED_ZIP_STRUCTURE:{cause:t("Incorrect zip structure."),additionalInfos:t("Check that the zip file structure matches a standard UI Designer export.")},CANNOT_OPEN_ZIP:{cause:t("Corrupted zip archive.")},JSON_STRUCTURE:{cause:t("Invalid {{ infos.modelfile }} json file structure"),additionalInfos:t("Check that the json file structure matches a standard UI Designer export.")}};return{getErrorContext:n}}e.$inject=["gettextCatalog","gettext"],angular.module("bonitasoft.designer.home.import").service("importErrorMessagesService",e)}(),function(){"use strict";function e(){return{templateUrl:"js/home/import/import-report-item-list.html",scope:{type:"=",displayPage:"=",dependencies:"="},controller:["$scope",function(e){e.joinOnNames=function(e){return e&&e.map(function(e){return e.name}).join(", ")}}]}}angular.module("bonitasoft.designer.home.import").directive("importReportItemList",e)}();var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();!function(){"use strict";var e=function(){function e(t,n,a){_classCallCheck(this,e),this.$uibModalInstance=t,this.importArtifactService=a,this.report=n}return e.$inject=["$uibModalInstance","importReport","importArtifactService"],e.prototype.joinOnNames=function(e){return e.map(function(e){return e.name}).join(", ")},e.prototype.forceImport=function(){this.importArtifactService.forceImport(this.report).then(this.$uibModalInstance.close,this.$uibModalInstance.dismiss)},e.prototype.hasDependencies=function(){return this.report.dependencies&&(this.report.dependencies.added||this.report.dependencies.overwritten)},e.prototype.isPageImport=function(){return"page"===this.report.element.type||"form"===this.report.element.type||"layout"===this.report.element.type},_createClass(e,[{key:"type",get:function(){return this.report.element.type||"widget"}},{key:"name",get:function(){return this.report.element.name}},{key:"overwrittenType",get:function(){return this.report.overwrittenElement.type}},{key:"overwrittenName",get:function(){return this.report.overwrittenElement.name}}]),e}();angular.module("bonitasoft.designer.home.import").controller("ImportReportPopupController",e)}(),function(){function e(e,t){function n(e){return e.map(function(e){return e.name}).join(", ")}function a(){return t.getString(e.overwritten?"overwritten":"added")}function o(e){return{page:t.getString("page"),form:t.getString("form"),widget:t.getString("widget"),layout:t.getString("layout"),fragment:t.getString("fragment")}[e]||e}var i=this;i.joinOnNames=n,i.getState=a,i.translateKeys=o}e.$inject=["$scope","gettextCatalog"],angular.module("bonitasoft.designer.home.import").controller("ImportSuccessMessageController",e)}(),function(){"use strict";function e(e,t,n,a,o){function i(e){return e&&e.type&&e.message}function r(a,i,r){var s=n.defer();if(c.isErrorResponse(r))e.addError({title:t.getString("Import error"),contentUrl:"js/home/import/import-error-message.html",context:o.getErrorContext(r,a)}),s.reject();else{var l=angular.extend(r,{type:r.element.type||"widget"});!i||c.doesImportOverwriteExistingContent(r)?(e.addSuccess({title:t.getString("Successful import"),contentUrl:"js/home/import/import-success-message.html",context:l},15e3),s.resolve()):s.resolve(l)}return s.promise}function s(e){return!(e.overwritten||e.dependencies&&e.dependencies.overwritten)}function l(e){var t=e.element.type||"widget";return a.forceImport(e.uuid).then(c.manageImportResponse.bind(c,t,!1))}var c={forceImport:l,isErrorResponse:i,manageImportResponse:r,doesImportOverwriteExistingContent:s};return c}e.$inject=["alerts","gettextCatalog","$q","importRepo","importErrorMessagesService"],angular.module("bonitasoft.designer.home.import").service("importArtifactService",e)}(),function(){"use strict";function e(){return{scope:{onChange:"&"},restrict:"E",templateUrl:"js/preview/app-selector/app-selector.html",controller:t,controllerAs:"vm",bindToController:!0}}function t(e,t,n,a,o){function i(e,t){0!==e.length&&!function(){var n=e.map(function(e){return e.id});p.apps=t.filter(function(e){return n.indexOf(e.profileId)>=0})}()}function r(){var e=void 0;a.get("./API/living/application?preview=true&c=200").catch(function(){c(),d(p.pathToLivingApp)}).then(function(t){return e=t.data,a.get("./API/system/session/unusedId")}).then(function(e){var t=e.data.user_id;return a.get("./API/portal/profile?p=0&c=200&f=user_id%3d"+t)}).then(function(t){i(t.data,e),s(p.apps)})}function s(e){l(o.getPathToLivingApp(),e)||c(),d(p.pathToLivingApp)}function l(e,t){for(var n=0;n<t.length;n++)if(t[n].token===e)return!0;return!1}function c(){p.pathToLivingApp=o.getDefaultAppSelection().token,o.savePathToLivingApp(p.pathToLivingApp)}function d(e){e!==o.getDefaultAppSelection().token?a.get("./API/living/application?preview=true&c=1&p=0&f=token="+e).then(function(e){p.selectedAppDisplayName=e.data[0].displayName}):p.selectedAppDisplayName=o.getDefaultAppSelection().displayName}var p=this;p.pathToLivingApp=o.getPathToLivingApp(),p.apps=[],r(),e.setNewAppTokenAndRefresh=function(e){o.savePathToLivingApp(e),d(e),p.onChange()}}t.$inject=["$scope","gettextCatalog","$localStorage","$http","appSelectorService"],angular.module("bonitasoft.designer.app-selector").directive("appSelector",e)}(),function(){function e(e,t,n){"use strict";function a(e){c=e,i(e)}function o(){return c}function i(e){n.bonitaUIDesigner.bosAppName=e}function r(){return{token:l,displayName:s}}var s=t.getString("No application selected"),l="no-app-selected",c=l,d=n.bonitaUIDesigner;return d&&d.bosAppName?c=d.bosAppName:(n.bonitaUIDesigner={},n.bonitaUIDesigner.bosAppName=c),{getDefaultAppSelection:r,savePathToLivingApp:a,getPathToLivingApp:o}}e.$inject=["$http","gettextCatalog","$localStorage"],angular.module("bonitasoft.designer.app-selector").service("appSelectorService",e)}();var OpenPreviewCtrl=function(){function e(t,n,a,o){_classCallCheck(this,e),this.$window=t,this.$state=n,this.resolutions=a,this.keyBindingService=o}return e.$inject=["$window","$state","resolutions","keyBindingService"],e.prototype.openPreview=function(){var e=this;this.onOpenPreview&&this.onOpenPreview().then(function(t){t&&(e.artifactId=t,e.previewWindow&&!e.previewWindow.closed&&(e.previewWindow.location=e.getPreviewLocation()))}),this.handlePreviewWindow()},e.prototype.handlePreviewWindow=function(){this.previewWindow&&!this.previewWindow.closed?this.previewWindow.focus():this.previewWindow=this.$window.open(this.getPreviewLocation(),"preview","width=1024,height=768,toolbar=1,resizable=1,scrollbars=1")},e.prototype.getPreviewLocation=function(){return this.$state.href("designer.preview",{resolution:this.resolutions.selected().key,id:this.artifactId,mode:this.mode})},e}();angular.module("bonitasoft.designer.preview").directive("openPreview",function(){return{controllerAs:"ctrl",controller:OpenPreviewCtrl,bindToController:{onOpenPreview:"&",artifactId:"=",mode:"@",isDisabled:"="},scope:!0,restrict:"E",templateUrl:"js/preview/open-preview.html"}}),function(){"use strict";function e(e,t,n,a,o,i,r,s,l,c,d,p,u,m){function f(){return t.trustAsResourceUrl(r.url+"/"+m.getPathToLivingApp()+"/"+r.id+"/"+g({time:c.now()}))}function g(e){var t=angular.extend({},n.search(),e||{}),o=a(t);return o?"?"+o:""}function h(){return s.selected().width}function b(){e.iframe.src=f()}function v(){o.close()}function y(){o.open(e.iframe.src,"_blank")}function w(e){p.go("designer.preview",{resolution:e.key,id:r.id,mode:u})}e.iframe={},e.refreshIframe=b,e.buildIframeSrc=f,e.iframeWidth=h,e.updateResolutionInUrl=w,e.openExpandedPreviewWindow=y,e.isNavCollapsed=!0,d.load(r.id).then(function(t){e.pageName=t.data.name}),b(),l.connect().then(function(){l.subscribe("/previewableUpdates",function(e){e===r.id&&b()}),l.subscribe("/previewableRemoval",function(e){e===r.id&&v()})},function(){return i.error("error connecting to notifications web socket for preview")})}e.$inject=["$scope","$sce","$location","$httpParamSerializer","$window","$log","iframeParameters","resolutions","webSocket","clock","artifactRepo","$state","mode","appSelectorService"],angular.module("bonitasoft.designer.preview").controller("PreviewCtrl",e)}(),angular.module("bonitasoft.designer.preview").factory("webSocket",["$rootScope","$q",function(e,t){"use strict";var n=new SockJS(window.location.origin+window.location.pathname+"/websockets"),a=Stomp.over(n);a.debug=null;var o=function(t,n){var o=function(t){e.$apply(function(){n(t.body)})};a.subscribe(t,o)},i=function(){var e=t.defer();return a.connect({},function(t){return e.resolve(t)},function(t){return e.reject(t)}),e.promise};return{connect:i,subscribe:o}}]),function(){"use strict";angular.module("bonitasoft.designer.route",["tmh.dynamicLocale","ui.router"]).config(["tmhDynamicLocaleProvider","$stateProvider",function(e,t){e.localeLocationPattern("locales/angular-locale_{{locale}}.js"),t.state("designer",{"abstract":!0,url:"/:lang",template:"<ui-view></ui-view>",resolve:{language:["$stateParams","gettextCatalog","tmhDynamicLocale",function(e,t,n){var a={en:{lang:"en"},fr:{lang:"fr",file:"lang-template-fr-FR.json"},es:{lang:"es-ES",file:"lang-template-es-ES.json"},"es-ES":{lang:"es-ES",file:"lang-template-es-ES.json"},ja:{lang:"ja",file:"lang-template-ja-JP.json"}},o=a[Object.keys(a).reduce(function(t,n){return e.lang===n?n:t})];return t.setCurrentLanguage(o.lang),o!==a.en?(n.set(o.lang),t.loadRemote("i18n/"+o.file)):void 0}]}}),t.state("designer.home",{url:"/home",views:{"@designer":{controller:"HomeCtrl",templateUrl:"js/home/home.html"}}}),t.state("designer.layout",{url:"/layouts/:id",controller:["$state","$stateParams",function(e,t){return e.go("designer.page",t,{location:!1})}]}),t.state("designer.form",{url:"/forms/:id",controller:["$state","$stateParams",function(e,t){return e.go("designer.page",t,{location:!1})}]}),t.state("designer.page",{url:"/pages/:id",resolve:{artifact:["editorService","pageRepo","$stateParams",function(e,t,n){return e.initialize(t,n.id)}],artifactRepo:["pageRepo",function(e){return e}],mode:function(){return"page"}},views:{"@designer":{controller:"EditorCtrl",templateUrl:"js/editor/editor.html"},"data@designer.page":{controller:"DataCtrl",templateUrl:"js/editor/bottom-panel/data-panel/data.html"},"header@designer.page":{controller:"EditorHeaderCtrl",controllerAs:"vm",templateUrl:"js/editor/header/header.html"}}}),t.state("designer.page.asset",{views:{"data@designer.page":{controller:"AssetCtrl",controllerAs:"vm",templateUrl:"js/assets/page-assets.html"}},resolve:{assetRepo:["AssetRepository","pageRepo",function(e,t){return new e(t.baseUrl)}]}}),t.state("designer.preview",{url:"/preview/:mode/:id?resolution",views:{"@designer":{controller:"PreviewCtrl",templateUrl:"js/preview/preview.html"}},resolve:{iframeParameters:["$stateParams",function(e){return{url:"preview/"+e.mode,id:e.id}}],mode:["$stateParams",function(e){return e.mode}],artifactRepo:["repositories","mode",function(e,t){return e.get(t)}]}}),t.state("designer.widget",{url:"/widget/:id",resolve:{artifact:["widgetRepo","$stateParams",function(e,t){return e.load(t.id).then(function(e){return e.data})}],artifactRepo:["widgetRepo",function(e){return e}],mode:function(){return"widget"},assetRepo:["AssetRepository","widgetRepo",function(e,t){return new e(t.baseUrl)}]},views:{"@designer":{controller:"CustomWidgetEditorCtrl",templateUrl:"js/custom-widget/custom-widget-editor.html"},"asset@designer.widget":{controller:"AssetCtrl",controllerAs:"vm",templateUrl:"js/assets/widget-assets.html"}}})}])}();